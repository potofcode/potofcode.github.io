{"version":3,"sources":["webpack:///path---tags-api-a568b9639664fa8a6493.js","webpack:///./.cache/json/tags-api.json"],"names":["webpackJsonp","412","module","exports","pathContext","tag","latest","images","blurUp","src","share","heroPreviewLG","heroPreviewMD","heroPreviewSM","heroPreviewXS","mediumPreview","smallPreview","excerpt","id","slug","permalink","html","color","title","description","category","tags","date","type","posts","total","page"],"mappings":"AAAAA,cAAc,iBAERC,IACA,SAAUC,EAAQC,GCHxBD,EAAAC,SAAkBC,aAAeC,IAAA,MAAAC,SAAuBC,QAAUC,QAAUC,IAAA,kdAAudC,OAAUD,IAAA,sDAA2DE,eAAkBF,IAAA,uDAA4DG,eAAkBH,IAAA,uDAA4DI,eAAkBJ,IAAA,uDAA4DK,eAAkBL,IAAA,uDAA4DM,eAAkBN,IAAA,uDAA4DO,cAAiBP,IAAA,wDAA6DQ,QAAA,kIAAAC,GAAA,wIAAAC,KAAA,kDAAAC,UAAA,wEAAAC,KAAA,0olBAA8+lBC,MAAA,0BAAAC,MAAA,0BAAAC,YAAA,gEAAAC,SAAA,SAAAC,MAAA,cAAAC,KAAA,2BAAAC,KAAA,OAAkcC,QAAYtB,QAAUC,QAAUC,IAAA,kdAAudC,OAAUD,IAAA,sDAA2DE,eAAkBF,IAAA,uDAA4DG,eAAkBH,IAAA,uDAA4DI,eAAkBJ,IAAA,uDAA4DK,eAAkBL,IAAA,uDAA4DM,eAAkBN,IAAA,uDAA4DO,cAAiBP,IAAA,wDAA6DQ,QAAA,kIAAAC,GAAA,wIAAAC,KAAA,kDAAAC,UAAA,wEAAAC,KAAA;AAA8+lBC,MAAA,0BAAAC,MAAA,0BAAAC,YAAA,gEAAAC,SAAA,SAAAC,MAAA,cAAAC,KAAA,2BAAAC,KAAA,OAAkcE,MAAA,EAAAC,KAAA","file":"path---tags-api-a568b9639664fa8a6493.js","sourcesContent":["webpackJsonp([155610972471906],{\n\n/***/ 412:\n/***/ (function(module, exports) {\n\n\tmodule.exports = {\"pathContext\":{\"tag\":\"api\",\"latest\":[{\"images\":{\"blurUp\":{\"src\":\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAAA/ElEQVQoz62QvWvCUBTF/atLuxaHIhShgzgoDlKH6uDQTVwEXQxVa2tUEjVGkxg/UqMmxpic3jxQkWziWd7h8t7vnvMiuLMiJ3P0PYjb5U2Q/mYRBpZ0AcOdQWAfD/URXttTrPYunjgJ0aaMjrHD26+CwnCBl9YEjzT/HK/Y29SICwOLSgfGwWL+uSEj9j2FZjnMVzWTgBbiPwoq6ho+LU33ZuwM9DFpY+s618CyLkK1TeaTXQ1JXsPB85DuzyCYNrj5Bn+OiwSvsjsB8KSc3DrDz0De1FFbjlnlPNXiKZGwtvEu6MiJc0pwRJZ8kHRAC4rS5b8z0le48r30D7DuFKOmFdvEAAAAAElFTkSuQmCC\"},\"share\":{\"src\":\"/static/0211be6ff0f879d0d8481d9480297691-f5537.jpg\"},\"heroPreviewLG\":{\"src\":\"/static/0211be6ff0f879d0d8481d9480297691-294b1.webp\"},\"heroPreviewMD\":{\"src\":\"/static/0211be6ff0f879d0d8481d9480297691-d8cc9.webp\"},\"heroPreviewSM\":{\"src\":\"/static/0211be6ff0f879d0d8481d9480297691-c14dc.webp\"},\"heroPreviewXS\":{\"src\":\"/static/0211be6ff0f879d0d8481d9480297691-227ee.webp\"},\"mediumPreview\":{\"src\":\"/static/0211be6ff0f879d0d8481d9480297691-ce211.webp\"},\"smallPreview\":{\"src\":\"/static/0211be6ff0f879d0d8481d9480297691-051c1.webp\"}},\"excerpt\":\"Ave $USER! Спроектировать Rest API для мобильного приложения, SPA( Single Page Application ) или просто как отдельного сервиса…\",\"id\":\"/Users/ivan/projects/gatsby-blog/src/pages/2016/12/article-rest-api-design-best-practices/index.md absPath of file >>> MarkdownRemark\",\"slug\":\"/2016/12/article-rest-api-design-best-practices\",\"permalink\":\"https://potofcode.com/2016/12/article-rest-api-design-best-practices/\",\"html\":\"<p>Ave $USER!</p>\\n<p>Спроектировать Rest API для мобильного приложения, SPA( Single Page Application ) или просто как отдельного сервиса не так уж и просто.\\nС учетом моделей данных и особенностей архитектуры стэка, на котором он будет запущен этот процесс становится еще сложнее.\\nА если еще добавить аутентификацию пользователя, через авторизацию на стороннем сервисе, то процесс проектирования может очень сильно затянуться.\\nЧто бы не потеряться во всем этом, я составил небольшой список лучших практик проектирования Rest API с подробными объяснениями.</p>\\n<h2>Содержание:</h2>\\n<ol class=\\\"contents\\\">\\n  <li><a href=\\\"#&#x41E;&#x43F;&#x440;&#x435;&#x434;&#x435;&#x43B;&#x435;&#x43D;&#x438;&#x44F;\\\">&#x41E;&#x43F;&#x440;&#x435;&#x434;&#x435;&#x43B;&#x435;&#x43D;&#x438;&#x44F;</a></li>\\n  <li><a href=\\\"#&#x41F;&#x440;&#x43E;&#x435;&#x43A;&#x442;&#x438;&#x440;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x435; &#x441;&#x445;&#x435;&#x43C;&#x44B;\\\">&#x41F;&#x440;&#x43E;&#x435;&#x43A;&#x442;&#x438;&#x440;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x435; &#x441;&#x445;&#x435;&#x43C;&#x44B;</a></li>\\n  <li><a href=\\\"#&#x41A;&#x43E;&#x43D;&#x435;&#x447;&#x43D;&#x44B;&#x435; &#x430;&#x434;&#x440;&#x435;&#x441;&#x430;\\\">&#x41A;&#x43E;&#x43D;&#x435;&#x447;&#x43D;&#x44B;&#x435; &#x430;&#x434;&#x440;&#x435;&#x441;&#x430;</a></li>\\n  <li><a href=\\\"#&#x414;&#x43E;&#x43A;&#x443;&#x43C;&#x435;&#x43D;&#x442;&#x430;&#x446;&#x438;&#x44F;\\\">&#x414;&#x43E;&#x43A;&#x443;&#x43C;&#x435;&#x43D;&#x442;&#x430;&#x446;&#x438;&#x44F;</a></li>\\n  <li><a href=\\\"#&#x428;&#x438;&#x444;&#x440;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x435;\\\">&#x428;&#x438;&#x444;&#x440;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x435;</a></li>\\n</ol>\\n<h3><a name=\\\"&#x41E;&#x43F;&#x440;&#x435;&#x434;&#x435;&#x43B;&#x435;&#x43D;&#x438;&#x44F;\\\">&#x41E;&#x43F;&#x440;&#x435;&#x434;&#x435;&#x43B;&#x435;&#x43D;&#x438;&#x44F;</a></h3>\\n<p>Сначала дадим некоторые определения и понятия, которые я буду использовать далее:</p>\\n<ul>\\n<li>Ресурс (Resource) - Экземпляр одиночного объекта. Например: товар</li>\\n<li>Коллекция (Collection) - Коллекция однотипных объектов. Например: товар</li>\\n<li>Схема (Schema) - Описание модели объекта или коллекции объектов. Например: для товара схема описывает название, цену,\\nтип, количество на складе, список свойств товара и т.д.</li>\\n<li>Конечный адрес (Endpoint) - URL который представляет ресурс или коллекцию</li>\\n</ul>\\n<h3><a name=\\\"&#x41F;&#x440;&#x43E;&#x435;&#x43A;&#x442;&#x438;&#x440;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x435; &#x441;&#x445;&#x435;&#x43C;&#x44B;\\\">&#x41F;&#x440;&#x43E;&#x435;&#x43A;&#x442;&#x438;&#x440;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x435; &#x441;&#x445;&#x435;&#x43C;&#x44B;</a></h3>\\n<p>На самом деле, проектирование Rest API начинается гораздо раньше чем вы можете подумать.\\nПроектирование начинается со схемы ресурсов и коллекций и их связей. Например вы проектируете социальную сеть Switter.\\nБазовые сущности социальной сети - это профили пользователей <code>Profile</code>.\\nМежду профилями существуют связи в виде дружбы типа многие ко многим и разрешается она через вспомогательную схему <code>Friends</code>.\\nВнутри социальной сети можно обмениваться сообщениями <code>Message</code>.\\nСообщение имеет отправителя и один или несколько адресатов.\\nВсе участники беседы <code>Profiles</code> объединяются в <code>MessageGroups</code> через <code>ProfilesMessageGroups</code>,\\nи каждое сообщение <code>Messages</code> имеет свою <code>MessageGroups</code>. Визуально это выглядит так:</p>\\n<div class=\\\"presentation\\\">\\n  \\n  <a class=\\\"gatsby-resp-image-link\\\" href=\\\"/static/9bc7c46bbf25b62e8033538c4560291a-3f470.png\\\" style=\\\"display: block\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">\\n  \\n  <span class=\\\"gatsby-resp-image-wrapper\\\" style=\\\"position: relative; display: block; z-index: 1; max-width: 601px; margin-left: auto; margin-right: auto;\\\">\\n    <span class=\\\"gatsby-resp-image-background-image\\\" style=\\\"padding-bottom: 88.85191347753744%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsSAAALEgHS3X78AAAB60lEQVQ4y5WT64vTQBTF+/9/FEQQBREREVlZ8IVCxbXuupvtkjSbx8QkTF6TTl5tmqRt0ke8zaypQiLsYVpKM785d869GdR1vd3uxr/oGa9xun+DI82L6i7pJD05E14Puc8CrjZb+GcAn7Kqrm6VcwHdYorIHNN5J5zEM1m3RM1E2Kuq6g7ebDazNJ1Op2EY0kZ5ni8bFUXR/ogp9X0ftmVZBsgdDMcgTZtMJqIo8jwvy3ILr1YrZrvf7z1C4CnHcbCtLMsjLEkSxjhoBP5tqeDQOjuOo+s62MLRx7J3u70VpAr24RvZNJjnTRDbYl2xVTbxWIReiehGNSXTO5bNBMcfmKYe0Ei0n338+fTd6OTS+KE4nRH2wsksME1zvV6z4u8HZ4uF67qQ/D1giBd4iMS2LEVREEKqqkKWEFj5R2xnB9xK0zRogd0ISvj7UVtdLxzHMBSUTU7b7V4YGviPM3YveGUs69Abw/G7YQknr4bj5x++Pzn9+uLT+csvl9c6qf8ruD8M3AGOolg1LGTaSb5ia5YVfdi1Rh+djh68GT58++3x+4tB6BMIRhAEmFhoLFzSsiy4wrJLSexDeGw2D86wFd4Elg0TjHefMyGEvT/QP7AcuNOQV3TFsGGZXhCmy2TRW3Y0zw0St+s34fP3nEuR8kQAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;\\\">\\n      <img class=\\\"gatsby-resp-image-image\\\" style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\" alt=\\\"schema\\\" title=\\\"\\\" src=\\\"/static/9bc7c46bbf25b62e8033538c4560291a-3f470.png\\\" srcset=\\\"/static/9bc7c46bbf25b62e8033538c4560291a-2efde.png 245w,\\n/static/9bc7c46bbf25b62e8033538c4560291a-821bc.png 490w,\\n/static/9bc7c46bbf25b62e8033538c4560291a-3f470.png 601w\\\" sizes=\\\"(max-width: 601px) 100vw, 601px\\\">\\n    </span>\\n  </span>\\n  \\n  </a>\\n    \\n</div>\\n<p><a href=\\\"/a5400ffd621c3c5c781102159c7a0b12.mwb\\\">Скачать проект MySQL Workbench</a></p>\\n<p>Из схемы видно, что два профиля дружат, если в <code>Friend</code> существует запись в обе стороны с подтверждением.\\nАналогично легко получить список переписок и всех участников каждой переписки и их сообщения.</p>\\n<p>Таким образом, перед проектирование Rest API необходимо определить схемы всех сущностей вашего приложения.</p>\\n<h3><a name=\\\"&#x41A;&#x43E;&#x43D;&#x435;&#x447;&#x43D;&#x44B;&#x435; &#x430;&#x434;&#x440;&#x435;&#x441;&#x430;\\\">&#x41A;&#x43E;&#x43D;&#x435;&#x447;&#x43D;&#x44B;&#x435; &#x430;&#x434;&#x440;&#x435;&#x441;&#x430;</a></h3>\\n<p>Есть несколько общепринятых правил составления конечных адресов.</p>\\n<h4><a name=\\\"&#x41D;&#x438;&#x43A;&#x430;&#x43A;&#x438;&#x445; &#x433;&#x43B;&#x430;&#x433;&#x43E;&#x43B;&#x43E;&#x432; &#x432; &#x43A;&#x43E;&#x43D;&#x435;&#x447;&#x43D;&#x44B;&#x445; &#x430;&#x434;&#x440;&#x435;&#x441;&#x430;&#x445;\\\">1. &#x41D;&#x438;&#x43A;&#x430;&#x43A;&#x438;&#x445; &#x433;&#x43B;&#x430;&#x433;&#x43E;&#x43B;&#x43E;&#x432; &#x432; &#x43A;&#x43E;&#x43D;&#x435;&#x447;&#x43D;&#x44B;&#x445; &#x430;&#x434;&#x440;&#x435;&#x441;&#x430;&#x445;</a></h4>\\n<p>Все возможные действия в Rest API выполняются с помощью HTTP методов:</p>\\n<ul>\\n<li>GET - получить</li>\\n<li>POST - создать</li>\\n<li>PUT - заменить</li>\\n<li>PATCH - частично изменить</li>\\n<li>DELETE - удалить</li>\\n</ul>\\n<p>Отсюда видно, что никаких изменений данных при GET запросе не должно происходить.</p>\\n<h4><a name=\\\"&#x422;&#x43E;&#x43B;&#x44C;&#x43A;&#x43E; &#x441;&#x443;&#x449;&#x435;&#x441;&#x442;&#x432;&#x438;&#x442;&#x435;&#x43B;&#x44C;&#x43D;&#x44B;&#x435; &#x432;&#x43E; &#x43C;&#x43D;&#x43E;&#x436;&#x435;&#x441;&#x442;&#x432;&#x435;&#x43D;&#x43D;&#x43E;&#x43C; &#x447;&#x438;&#x441;&#x43B;&#x435;\\\">2. &#x422;&#x43E;&#x43B;&#x44C;&#x43A;&#x43E; &#x441;&#x443;&#x449;&#x435;&#x441;&#x442;&#x432;&#x438;&#x442;&#x435;&#x43B;&#x44C;&#x43D;&#x44B;&#x435; &#x432;&#x43E; &#x43C;&#x43D;&#x43E;&#x436;&#x435;&#x441;&#x442;&#x432;&#x435;&#x43D;&#x43D;&#x43E;&#x43C; &#x447;&#x438;&#x441;&#x43B;&#x435;</a></h4>\\n<p>Не стоит смешивать единственное и множественное число ресурсов, это нарушает семантическое значение и может ввести в заблуждение.\\nИспользуйте всегда множественное. Например у вас есть ресурс <code>users</code>,\\nзайдя на него по конечному адресу <code>/api/v1/users</code> вы получите список пользователей, естественно ограниченный фильтрами по умолчанию,\\nкак если бы вы зашли по адресу <code>/api/v1/users?offset=0&#x26;limit=50</code>.\\nНо перейдя на адрес <code>/api/v1/users/1</code> мы как бы говорим: “получить объект с id=1 из ресурса пользователи”</p>\\n<h4><a name=\\\"&#x418;&#x441;&#x43F;&#x43E;&#x43B;&#x44C;&#x437;&#x443;&#x439;&#x442;&#x435; &#x43F;&#x43E;&#x434;&#x437;&#x430;&#x43F;&#x440;&#x43E;&#x441;&#x44B; &#x432; &#x440;&#x435;&#x441;&#x443;&#x440;&#x441;&#x430;&#x445; &#x441; &#x43E;&#x442;&#x43D;&#x43E;&#x448;&#x435;&#x43D;&#x438;&#x44F;&#x43C;&#x438;\\\">3. &#x418;&#x441;&#x43F;&#x43E;&#x43B;&#x44C;&#x437;&#x443;&#x439;&#x442;&#x435; &#x43F;&#x43E;&#x434;&#x437;&#x430;&#x43F;&#x440;&#x43E;&#x441;&#x44B; &#x432; &#x440;&#x435;&#x441;&#x443;&#x440;&#x441;&#x430;&#x445; &#x441; &#x43E;&#x442;&#x43D;&#x43E;&#x448;&#x435;&#x43D;&#x438;&#x44F;&#x43C;&#x438;</a></h4>\\n<p>Если мы хотим получить друзей пользователя под номером 1, то адрес будет следующим <code>/api/v1/users/1/friends</code>.\\nЭтот подход позволяет избежать дополнительных запросов на сервер.</p>\\n<h4><a name=\\\"&#x418;&#x441;&#x43F;&#x43E;&#x43B;&#x44C;&#x437;&#x443;&#x439;&#x442;&#x435; HTTP &#x437;&#x430;&#x433;&#x43E;&#x43B;&#x43E;&#x432;&#x43A;&#x438; &#x434;&#x43B;&#x44F; &#x441;&#x43E;&#x43E;&#x431;&#x449;&#x435;&#x43D;&#x438;&#x44F; &#x43E;&#x431; &#x43E;&#x436;&#x438;&#x434;&#x435;&#x43C;&#x43E;&#x43C; &#x444;&#x43E;&#x440;&#x43C;&#x430;&#x442;&#x435; &#x43E;&#x442;&#x432;&#x435;&#x442;&#x430;\\\">4. &#x418;&#x441;&#x43F;&#x43E;&#x43B;&#x44C;&#x437;&#x443;&#x439;&#x442;&#x435; HTTP &#x437;&#x430;&#x433;&#x43E;&#x43B;&#x43E;&#x432;&#x43A;&#x438; &#x434;&#x43B;&#x44F; &#x441;&#x43E;&#x43E;&#x431;&#x449;&#x435;&#x43D;&#x438;&#x44F; &#x43E;&#x431; &#x43E;&#x436;&#x438;&#x434;&#x435;&#x43C;&#x43E;&#x43C; &#x444;&#x43E;&#x440;&#x43C;&#x430;&#x442;&#x435; &#x43E;&#x442;&#x432;&#x435;&#x442;&#x430;</a></h4>\\n<p>И клиент и сервер должны знать в каком формате общаться и этот формат должен быть предоставлен в HTTP заголовке.</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-text\\\"><code>Content-Type - &#x444;&#x43E;&#x440;&#x43C;&#x430;&#x442; &#x437;&#x430;&#x43F;&#x440;&#x43E;&#x441;&#x430;\\nAccept - &#x441;&#x43F;&#x438;&#x441;&#x43E;&#x43A; &#x43F;&#x43E;&#x434;&#x434;&#x435;&#x440;&#x436;&#x438;&#x432;&#x430;&#x435;&#x43C;&#x44B;&#x445; &#x444;&#x43E;&#x440;&#x43C;&#x430;&#x442;&#x43E;&#x432; &#x434;&#x43B;&#x44F; &#x43E;&#x442;&#x432;&#x435;&#x442;&#x430;</code></pre>\\n      </div>\\n<p>Постарайтесь избежать использование формата в URL</p>\\n<h4><a name=\\\"&#x418;&#x441;&#x43F;&#x43E;&#x43B;&#x44C;&#x437;&#x443;&#x439;&#x442;&#x435; HATEOAS\\\">5. &#x418;&#x441;&#x43F;&#x43E;&#x43B;&#x44C;&#x437;&#x443;&#x439;&#x442;&#x435; HATEOAS</a></h4>\\n<p>HATEOAS - это Hypermedia as the Engine of Application State,\\nчто по сути это метаинформация о структуре вашего сервиса, которая может быть использована для автоматического исследования (service autodiscover).\\nЧто дает возможность некоторым приложениям без человеческого вмешательства исследовать ваш сервис.\\nНапример имеем ответ от сервера с адреса <code>/api/v1/users/1</code>:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-json\\\"><code><span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token property\\\">&quot;firstName&quot;</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">&quot;Ivan&quot;</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token property\\\">&quot;lastName&quot;</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">&quot;Ivanov&quot;</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token property\\\">&quot;autodiscover&quot;</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token property\\\">&quot;friends&quot;</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">&quot;`/api/v1/users/1/friends&quot;</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token property\\\">&quot;photos&quot;</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">&quot;`/api/v1/users/1/photos&quot;</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token property\\\">&quot;messages&quot;</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">&quot;`/api/v1/users/1/messages&quot;</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n</code></pre>\\n      </div>\\n<p>в секции <code>autodiscover</code> мы видим список ресурсов, которые относятся к текущему.</p>\\n<h4><a name=\\\"&#x41F;&#x440;&#x435;&#x434;&#x43E;&#x441;&#x442;&#x430;&#x432;&#x44C;&#x442;&#x435; &#x432;&#x43E;&#x437;&#x43C;&#x43E;&#x436;&#x43D;&#x43E;&#x441;&#x442;&#x438; &#x444;&#x438;&#x43B;&#x44C;&#x442;&#x440;&#x430;&#x446;&#x438;&#x438;, &#x441;&#x43E;&#x440;&#x442;&#x438;&#x440;&#x43E;&#x432;&#x43A;&#x438;, &#x432;&#x44B;&#x431;&#x43E;&#x440;&#x430; &#x43F;&#x43E;&#x43B;&#x435;&#x439;, &#x43E;&#x433;&#x440;&#x430;&#x43D;&#x438;&#x447;&#x435;&#x43D;&#x438;&#x44F; &#x438; &#x441;&#x43C;&#x435;&#x449;&#x435;&#x43D;&#x438;&#x44F; &#x437;&#x430;&#x43F;&#x438;&#x441;&#x435;&#x439; &#x434;&#x43B;&#x44F; &#x43A;&#x43E;&#x43B;&#x435;&#x43A;&#x446;&#x438;&#x439;\\\">6. &#x41F;&#x440;&#x435;&#x434;&#x43E;&#x441;&#x442;&#x430;&#x432;&#x44C;&#x442;&#x435; &#x432;&#x43E;&#x437;&#x43C;&#x43E;&#x436;&#x43D;&#x43E;&#x441;&#x442;&#x438; &#x444;&#x438;&#x43B;&#x44C;&#x442;&#x440;&#x430;&#x446;&#x438;&#x438;, &#x441;&#x43E;&#x440;&#x442;&#x438;&#x440;&#x43E;&#x432;&#x43A;&#x438;, &#x432;&#x44B;&#x431;&#x43E;&#x440;&#x430; &#x43F;&#x43E;&#x43B;&#x435;&#x439;, &#x43E;&#x433;&#x440;&#x430;&#x43D;&#x438;&#x447;&#x435;&#x43D;&#x438;&#x44F; &#x438; &#x441;&#x43C;&#x435;&#x449;&#x435;&#x43D;&#x438;&#x44F; &#x437;&#x430;&#x43F;&#x438;&#x441;&#x435;&#x439; &#x434;&#x43B;&#x44F; &#x43A;&#x43E;&#x43B;&#x435;&#x43A;&#x446;&#x438;&#x439;</a></h4>\\n<p>Для таких целей, лучше поддерживать какой-нибудь язык запросов, позволяющий расширить стандартный, например graphql.\\nЯ же приведу примеры на псевдоязыке:</p>\\n<ul>\\n<li>Фильтрация - Поддерживайте фильтрацию с выражениями <code>/api/v1/users?filter=(firstName='Ivan',lastName=/^Ivan/,age>=18)</code></li>\\n<li>Сортировка - Поддерживайте сортировку по возрастанию и убыванию для нескольких полей <code>/api/v1/users?sort=(firstName:1,DOB:0)</code></li>\\n<li>Выбор полей - Поддерживайте выбор полей, это не только уменьшит трафик, но и позволит быстрее работать клиенту, обрабатывая меньшее количество данных\\n<code>/api/v1/users?fields=[firstName, lastName, DOB]</code></li>\\n<li>Ограничение и смещение - Поддерживайте параметры limit и offset, для контроля количества отдаваемых сущностей,\\nтак же это более гибкий подход, чем постраничный <code>/api/v1/users?offset=20&#x26;limit=10</code></li>\\n</ul>\\n<h4><a name=\\\"&#x41F;&#x43E;&#x434;&#x434;&#x435;&#x440;&#x436;&#x438;&#x432;&#x430;&#x439;&#x442;&#x435; &#x432;&#x435;&#x440;&#x441;&#x438;&#x43E;&#x43D;&#x43D;&#x43E;&#x441;&#x442;&#x44C; API\\\">7. &#x41F;&#x43E;&#x434;&#x434;&#x435;&#x440;&#x436;&#x438;&#x432;&#x430;&#x439;&#x442;&#x435; &#x432;&#x435;&#x440;&#x441;&#x438;&#x43E;&#x43D;&#x43D;&#x43E;&#x441;&#x442;&#x44C; API</a></h4>\\n<p>Время от времени, стандарты и интерфейсы вашего API могут меняться и что бы избежать путаницы используйте версионность.\\nИзбегайте API без версий или API с дробными значениями <code>/api/v100500/users</code></p>\\n<h4><a name=\\\"&#x41E;&#x431;&#x440;&#x430;&#x431;&#x430;&#x442;&#x44B;&#x432;&#x430;&#x439;&#x442;&#x435; &#x43E;&#x448;&#x438;&#x431;&#x43A;&#x438; &#x43F;&#x43E; HTTP &#x43A;&#x43E;&#x434;&#x430;&#x43C;\\\">8. &#x41E;&#x431;&#x440;&#x430;&#x431;&#x430;&#x442;&#x44B;&#x432;&#x430;&#x439;&#x442;&#x435; &#x43E;&#x448;&#x438;&#x431;&#x43A;&#x438; &#x43F;&#x43E; HTTP &#x43A;&#x43E;&#x434;&#x430;&#x43C;</a></h4>\\n<p>Протокол HTTP поддерживает огромное количество <a href=\\\"https://ru.wikipedia.org/wiki/%D0%A1%D0%BF%D0%B8%D1%81%D0%BE%D0%BA_%D0%BA%D0%BE%D0%B4%D0%BE%D0%B2_%D1%81%D0%BE%D1%81%D1%82%D0%BE%D1%8F%D0%BD%D0%B8%D1%8F_HTTP\\\">кодов состояний</a>\\nНе обязательно использовать их все, достаточно этих 13:</p>\\n<ul>\\n<li>200 – OK – ответ отправлен успешно, обычно ответ на: GET</li>\\n<li>201 – Created – создание успешно завершено, обычно ответ на: POST, PUT</li>\\n<li>204 – Accepted – удаление или редактирование успешно завершено, обыно ответ на: PATCH, DELETE</li>\\n<li>205 – Reset Content – после выполнения операции необходимо обновить данные</li>\\n<li>304 – Not Modified – ничего не изменилось, можно взять данные из кэша приложения</li>\\n<li>400 – Bad Request – неправильный запрос, подробности обыно предоставляют в теле ответа</li>\\n<li>401 – Unauthorized – пользователь не авторизован</li>\\n<li>402 – Payment Required – пользователю необходимо произвести оплату для продолжения</li>\\n<li>403 – Forbidden – пользователь авторизован, но не имеет привиллегий для выполнения операции</li>\\n<li>404 – Not found – ресурс не найден</li>\\n<li>415 – Unsupported Media Type – например, если пользователь загружает текстовый файл вместо ожидаемой картинки</li>\\n<li>500 – Internal Server Error – этот код лучше не использовать, но записывать в логи все данные об ошибке</li>\\n<li>501 – Not implemented – используется для сообщения, что данная операция не реализована на сервере, например если ваше приложение в стадии активной разработки</li>\\n</ul>\\n<p>При ответе об ошибки помещайте дополнительную информацию в тело запроса (payload - полезная нагрузка)</p>\\n<h4><a name=\\\"&#x41F;&#x43E;&#x434;&#x434;&#x435;&#x440;&#x436;&#x438;&#x432;&#x430;&#x439;&#x442;&#x435; &#x43F;&#x435;&#x440;&#x435;&#x43E;&#x43F;&#x440;&#x435;&#x434;&#x435;&#x43B;&#x435;&#x43D;&#x438;&#x435; HTTP &#x43C;&#x435;&#x442;&#x43E;&#x434;&#x43E;&#x432;\\\">9. &#x41F;&#x43E;&#x434;&#x434;&#x435;&#x440;&#x436;&#x438;&#x432;&#x430;&#x439;&#x442;&#x435; &#x43F;&#x435;&#x440;&#x435;&#x43E;&#x43F;&#x440;&#x435;&#x434;&#x435;&#x43B;&#x435;&#x43D;&#x438;&#x435; HTTP &#x43C;&#x435;&#x442;&#x43E;&#x434;&#x43E;&#x432;</a></h4>\\n<p>Достаточно редкий случай, но некоторые прокси серверы поддерживают только GET и POST запросы.\\nВ таком случае можно реализовать служебный заголовок <code>X-HTTP-Method-Override</code>, для замены POST метода на метод указанный в нем.</p>\\n<h3><a name=\\\"&#x414;&#x43E;&#x43A;&#x443;&#x43C;&#x435;&#x43D;&#x442;&#x430;&#x446;&#x438;&#x44F;\\\">4. &#x414;&#x43E;&#x43A;&#x443;&#x43C;&#x435;&#x43D;&#x442;&#x430;&#x446;&#x438;&#x44F;</a></h3>\\n<p>Какой бы user-friendly не был ваш API он обязательно должен быть документирован, от схем до значений HTTP кодов.\\nСуществуют множество способов документирования API, наиболее популярный и на мой взляд понятный - это <a href=\\\"http://swagger.io\\\">swagger</a>,\\nко всему у них можно найти спецификацию Rest API (стандарт, которому они следуют).</p>\\n<h3><a name=\\\"&#x428;&#x438;&#x444;&#x440;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x435;\\\">5. &#x428;&#x438;&#x444;&#x440;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x435;</a></h3>\\n<p>Старайтесь использовать SSL шифрование. Сертификаты легко и бесплатно можно получить на <a href=\\\"https://www.startssl.com/\\\">StartSLL</a> или <a href=\\\"https://letsencrypt.org/\\\">LetsEncrypt</a>.</p>\",\"color\":\"rgba(37, 127, 110, 0.8)\",\"title\":\"Проектирование Rest API\",\"description\":\"Как спроектировать Rest API для мобильного приложения или SPA\",\"category\":\"кодинг\",\"tags\":[\"rest\",\"api\"],\"date\":\"2016-12-11T00:00:00.000Z\",\"type\":null}],\"posts\":[{\"images\":{\"blurUp\":{\"src\":\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAAA/ElEQVQoz62QvWvCUBTF/atLuxaHIhShgzgoDlKH6uDQTVwEXQxVa2tUEjVGkxg/UqMmxpic3jxQkWziWd7h8t7vnvMiuLMiJ3P0PYjb5U2Q/mYRBpZ0AcOdQWAfD/URXttTrPYunjgJ0aaMjrHD26+CwnCBl9YEjzT/HK/Y29SICwOLSgfGwWL+uSEj9j2FZjnMVzWTgBbiPwoq6ho+LU33ZuwM9DFpY+s618CyLkK1TeaTXQ1JXsPB85DuzyCYNrj5Bn+OiwSvsjsB8KSc3DrDz0De1FFbjlnlPNXiKZGwtvEu6MiJc0pwRJZ8kHRAC4rS5b8z0le48r30D7DuFKOmFdvEAAAAAElFTkSuQmCC\"},\"share\":{\"src\":\"/static/0211be6ff0f879d0d8481d9480297691-f5537.jpg\"},\"heroPreviewLG\":{\"src\":\"/static/0211be6ff0f879d0d8481d9480297691-294b1.webp\"},\"heroPreviewMD\":{\"src\":\"/static/0211be6ff0f879d0d8481d9480297691-d8cc9.webp\"},\"heroPreviewSM\":{\"src\":\"/static/0211be6ff0f879d0d8481d9480297691-c14dc.webp\"},\"heroPreviewXS\":{\"src\":\"/static/0211be6ff0f879d0d8481d9480297691-227ee.webp\"},\"mediumPreview\":{\"src\":\"/static/0211be6ff0f879d0d8481d9480297691-ce211.webp\"},\"smallPreview\":{\"src\":\"/static/0211be6ff0f879d0d8481d9480297691-051c1.webp\"}},\"excerpt\":\"Ave $USER! Спроектировать Rest API для мобильного приложения, SPA( Single Page Application ) или просто как отдельного сервиса…\",\"id\":\"/Users/ivan/projects/gatsby-blog/src/pages/2016/12/article-rest-api-design-best-practices/index.md absPath of file >>> MarkdownRemark\",\"slug\":\"/2016/12/article-rest-api-design-best-practices\",\"permalink\":\"https://potofcode.com/2016/12/article-rest-api-design-best-practices/\",\"html\":\"<p>Ave $USER!</p>\\n<p>Спроектировать Rest API для мобильного приложения, SPA( Single Page Application ) или просто как отдельного сервиса не так уж и просто.\\nС учетом моделей данных и особенностей архитектуры стэка, на котором он будет запущен этот процесс становится еще сложнее.\\nА если еще добавить аутентификацию пользователя, через авторизацию на стороннем сервисе, то процесс проектирования может очень сильно затянуться.\\nЧто бы не потеряться во всем этом, я составил небольшой список лучших практик проектирования Rest API с подробными объяснениями.</p>\\n<h2>Содержание:</h2>\\n<ol class=\\\"contents\\\">\\n  <li><a href=\\\"#&#x41E;&#x43F;&#x440;&#x435;&#x434;&#x435;&#x43B;&#x435;&#x43D;&#x438;&#x44F;\\\">&#x41E;&#x43F;&#x440;&#x435;&#x434;&#x435;&#x43B;&#x435;&#x43D;&#x438;&#x44F;</a></li>\\n  <li><a href=\\\"#&#x41F;&#x440;&#x43E;&#x435;&#x43A;&#x442;&#x438;&#x440;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x435; &#x441;&#x445;&#x435;&#x43C;&#x44B;\\\">&#x41F;&#x440;&#x43E;&#x435;&#x43A;&#x442;&#x438;&#x440;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x435; &#x441;&#x445;&#x435;&#x43C;&#x44B;</a></li>\\n  <li><a href=\\\"#&#x41A;&#x43E;&#x43D;&#x435;&#x447;&#x43D;&#x44B;&#x435; &#x430;&#x434;&#x440;&#x435;&#x441;&#x430;\\\">&#x41A;&#x43E;&#x43D;&#x435;&#x447;&#x43D;&#x44B;&#x435; &#x430;&#x434;&#x440;&#x435;&#x441;&#x430;</a></li>\\n  <li><a href=\\\"#&#x414;&#x43E;&#x43A;&#x443;&#x43C;&#x435;&#x43D;&#x442;&#x430;&#x446;&#x438;&#x44F;\\\">&#x414;&#x43E;&#x43A;&#x443;&#x43C;&#x435;&#x43D;&#x442;&#x430;&#x446;&#x438;&#x44F;</a></li>\\n  <li><a href=\\\"#&#x428;&#x438;&#x444;&#x440;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x435;\\\">&#x428;&#x438;&#x444;&#x440;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x435;</a></li>\\n</ol>\\n<h3><a name=\\\"&#x41E;&#x43F;&#x440;&#x435;&#x434;&#x435;&#x43B;&#x435;&#x43D;&#x438;&#x44F;\\\">&#x41E;&#x43F;&#x440;&#x435;&#x434;&#x435;&#x43B;&#x435;&#x43D;&#x438;&#x44F;</a></h3>\\n<p>Сначала дадим некоторые определения и понятия, которые я буду использовать далее:</p>\\n<ul>\\n<li>Ресурс (Resource) - Экземпляр одиночного объекта. Например: товар</li>\\n<li>Коллекция (Collection) - Коллекция однотипных объектов. Например: товар</li>\\n<li>Схема (Schema) - Описание модели объекта или коллекции объектов. Например: для товара схема описывает название, цену,\\nтип, количество на складе, список свойств товара и т.д.</li>\\n<li>Конечный адрес (Endpoint) - URL который представляет ресурс или коллекцию</li>\\n</ul>\\n<h3><a name=\\\"&#x41F;&#x440;&#x43E;&#x435;&#x43A;&#x442;&#x438;&#x440;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x435; &#x441;&#x445;&#x435;&#x43C;&#x44B;\\\">&#x41F;&#x440;&#x43E;&#x435;&#x43A;&#x442;&#x438;&#x440;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x435; &#x441;&#x445;&#x435;&#x43C;&#x44B;</a></h3>\\n<p>На самом деле, проектирование Rest API начинается гораздо раньше чем вы можете подумать.\\nПроектирование начинается со схемы ресурсов и коллекций и их связей. Например вы проектируете социальную сеть Switter.\\nБазовые сущности социальной сети - это профили пользователей <code>Profile</code>.\\nМежду профилями существуют связи в виде дружбы типа многие ко многим и разрешается она через вспомогательную схему <code>Friends</code>.\\nВнутри социальной сети можно обмениваться сообщениями <code>Message</code>.\\nСообщение имеет отправителя и один или несколько адресатов.\\nВсе участники беседы <code>Profiles</code> объединяются в <code>MessageGroups</code> через <code>ProfilesMessageGroups</code>,\\nи каждое сообщение <code>Messages</code> имеет свою <code>MessageGroups</code>. Визуально это выглядит так:</p>\\n<div class=\\\"presentation\\\">\\n  \\n  <a class=\\\"gatsby-resp-image-link\\\" href=\\\"/static/9bc7c46bbf25b62e8033538c4560291a-3f470.png\\\" style=\\\"display: block\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">\\n  \\n  <span class=\\\"gatsby-resp-image-wrapper\\\" style=\\\"position: relative; display: block; z-index: 1; max-width: 601px; margin-left: auto; margin-right: auto;\\\">\\n    <span class=\\\"gatsby-resp-image-background-image\\\" style=\\\"padding-bottom: 88.85191347753744%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsSAAALEgHS3X78AAAB60lEQVQ4y5WT64vTQBTF+/9/FEQQBREREVlZ8IVCxbXuupvtkjSbx8QkTF6TTl5tmqRt0ke8zaypQiLsYVpKM785d869GdR1vd3uxr/oGa9xun+DI82L6i7pJD05E14Puc8CrjZb+GcAn7Kqrm6VcwHdYorIHNN5J5zEM1m3RM1E2Kuq6g7ebDazNJ1Op2EY0kZ5ni8bFUXR/ogp9X0ftmVZBsgdDMcgTZtMJqIo8jwvy3ILr1YrZrvf7z1C4CnHcbCtLMsjLEkSxjhoBP5tqeDQOjuOo+s62MLRx7J3u70VpAr24RvZNJjnTRDbYl2xVTbxWIReiehGNSXTO5bNBMcfmKYe0Ei0n338+fTd6OTS+KE4nRH2wsksME1zvV6z4u8HZ4uF67qQ/D1giBd4iMS2LEVREEKqqkKWEFj5R2xnB9xK0zRogd0ISvj7UVtdLxzHMBSUTU7b7V4YGviPM3YveGUs69Abw/G7YQknr4bj5x++Pzn9+uLT+csvl9c6qf8ruD8M3AGOolg1LGTaSb5ia5YVfdi1Rh+djh68GT58++3x+4tB6BMIRhAEmFhoLFzSsiy4wrJLSexDeGw2D86wFd4Elg0TjHefMyGEvT/QP7AcuNOQV3TFsGGZXhCmy2TRW3Y0zw0St+s34fP3nEuR8kQAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;\\\">\\n      <img class=\\\"gatsby-resp-image-image\\\" style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\" alt=\\\"schema\\\" title=\\\"\\\" src=\\\"/static/9bc7c46bbf25b62e8033538c4560291a-3f470.png\\\" srcset=\\\"/static/9bc7c46bbf25b62e8033538c4560291a-2efde.png 245w,\\n/static/9bc7c46bbf25b62e8033538c4560291a-821bc.png 490w,\\n/static/9bc7c46bbf25b62e8033538c4560291a-3f470.png 601w\\\" sizes=\\\"(max-width: 601px) 100vw, 601px\\\">\\n    </span>\\n  </span>\\n  \\n  </a>\\n    \\n</div>\\n<p><a href=\\\"/a5400ffd621c3c5c781102159c7a0b12.mwb\\\">Скачать проект MySQL Workbench</a></p>\\n<p>Из схемы видно, что два профиля дружат, если в <code>Friend</code> существует запись в обе стороны с подтверждением.\\nАналогично легко получить список переписок и всех участников каждой переписки и их сообщения.</p>\\n<p>Таким образом, перед проектирование Rest API необходимо определить схемы всех сущностей вашего приложения.</p>\\n<h3><a name=\\\"&#x41A;&#x43E;&#x43D;&#x435;&#x447;&#x43D;&#x44B;&#x435; &#x430;&#x434;&#x440;&#x435;&#x441;&#x430;\\\">&#x41A;&#x43E;&#x43D;&#x435;&#x447;&#x43D;&#x44B;&#x435; &#x430;&#x434;&#x440;&#x435;&#x441;&#x430;</a></h3>\\n<p>Есть несколько общепринятых правил составления конечных адресов.</p>\\n<h4><a name=\\\"&#x41D;&#x438;&#x43A;&#x430;&#x43A;&#x438;&#x445; &#x433;&#x43B;&#x430;&#x433;&#x43E;&#x43B;&#x43E;&#x432; &#x432; &#x43A;&#x43E;&#x43D;&#x435;&#x447;&#x43D;&#x44B;&#x445; &#x430;&#x434;&#x440;&#x435;&#x441;&#x430;&#x445;\\\">1. &#x41D;&#x438;&#x43A;&#x430;&#x43A;&#x438;&#x445; &#x433;&#x43B;&#x430;&#x433;&#x43E;&#x43B;&#x43E;&#x432; &#x432; &#x43A;&#x43E;&#x43D;&#x435;&#x447;&#x43D;&#x44B;&#x445; &#x430;&#x434;&#x440;&#x435;&#x441;&#x430;&#x445;</a></h4>\\n<p>Все возможные действия в Rest API выполняются с помощью HTTP методов:</p>\\n<ul>\\n<li>GET - получить</li>\\n<li>POST - создать</li>\\n<li>PUT - заменить</li>\\n<li>PATCH - частично изменить</li>\\n<li>DELETE - удалить</li>\\n</ul>\\n<p>Отсюда видно, что никаких изменений данных при GET запросе не должно происходить.</p>\\n<h4><a name=\\\"&#x422;&#x43E;&#x43B;&#x44C;&#x43A;&#x43E; &#x441;&#x443;&#x449;&#x435;&#x441;&#x442;&#x432;&#x438;&#x442;&#x435;&#x43B;&#x44C;&#x43D;&#x44B;&#x435; &#x432;&#x43E; &#x43C;&#x43D;&#x43E;&#x436;&#x435;&#x441;&#x442;&#x432;&#x435;&#x43D;&#x43D;&#x43E;&#x43C; &#x447;&#x438;&#x441;&#x43B;&#x435;\\\">2. &#x422;&#x43E;&#x43B;&#x44C;&#x43A;&#x43E; &#x441;&#x443;&#x449;&#x435;&#x441;&#x442;&#x432;&#x438;&#x442;&#x435;&#x43B;&#x44C;&#x43D;&#x44B;&#x435; &#x432;&#x43E; &#x43C;&#x43D;&#x43E;&#x436;&#x435;&#x441;&#x442;&#x432;&#x435;&#x43D;&#x43D;&#x43E;&#x43C; &#x447;&#x438;&#x441;&#x43B;&#x435;</a></h4>\\n<p>Не стоит смешивать единственное и множественное число ресурсов, это нарушает семантическое значение и может ввести в заблуждение.\\nИспользуйте всегда множественное. Например у вас есть ресурс <code>users</code>,\\nзайдя на него по конечному адресу <code>/api/v1/users</code> вы получите список пользователей, естественно ограниченный фильтрами по умолчанию,\\nкак если бы вы зашли по адресу <code>/api/v1/users?offset=0&#x26;limit=50</code>.\\nНо перейдя на адрес <code>/api/v1/users/1</code> мы как бы говорим: “получить объект с id=1 из ресурса пользователи”</p>\\n<h4><a name=\\\"&#x418;&#x441;&#x43F;&#x43E;&#x43B;&#x44C;&#x437;&#x443;&#x439;&#x442;&#x435; &#x43F;&#x43E;&#x434;&#x437;&#x430;&#x43F;&#x440;&#x43E;&#x441;&#x44B; &#x432; &#x440;&#x435;&#x441;&#x443;&#x440;&#x441;&#x430;&#x445; &#x441; &#x43E;&#x442;&#x43D;&#x43E;&#x448;&#x435;&#x43D;&#x438;&#x44F;&#x43C;&#x438;\\\">3. &#x418;&#x441;&#x43F;&#x43E;&#x43B;&#x44C;&#x437;&#x443;&#x439;&#x442;&#x435; &#x43F;&#x43E;&#x434;&#x437;&#x430;&#x43F;&#x440;&#x43E;&#x441;&#x44B; &#x432; &#x440;&#x435;&#x441;&#x443;&#x440;&#x441;&#x430;&#x445; &#x441; &#x43E;&#x442;&#x43D;&#x43E;&#x448;&#x435;&#x43D;&#x438;&#x44F;&#x43C;&#x438;</a></h4>\\n<p>Если мы хотим получить друзей пользователя под номером 1, то адрес будет следующим <code>/api/v1/users/1/friends</code>.\\nЭтот подход позволяет избежать дополнительных запросов на сервер.</p>\\n<h4><a name=\\\"&#x418;&#x441;&#x43F;&#x43E;&#x43B;&#x44C;&#x437;&#x443;&#x439;&#x442;&#x435; HTTP &#x437;&#x430;&#x433;&#x43E;&#x43B;&#x43E;&#x432;&#x43A;&#x438; &#x434;&#x43B;&#x44F; &#x441;&#x43E;&#x43E;&#x431;&#x449;&#x435;&#x43D;&#x438;&#x44F; &#x43E;&#x431; &#x43E;&#x436;&#x438;&#x434;&#x435;&#x43C;&#x43E;&#x43C; &#x444;&#x43E;&#x440;&#x43C;&#x430;&#x442;&#x435; &#x43E;&#x442;&#x432;&#x435;&#x442;&#x430;\\\">4. &#x418;&#x441;&#x43F;&#x43E;&#x43B;&#x44C;&#x437;&#x443;&#x439;&#x442;&#x435; HTTP &#x437;&#x430;&#x433;&#x43E;&#x43B;&#x43E;&#x432;&#x43A;&#x438; &#x434;&#x43B;&#x44F; &#x441;&#x43E;&#x43E;&#x431;&#x449;&#x435;&#x43D;&#x438;&#x44F; &#x43E;&#x431; &#x43E;&#x436;&#x438;&#x434;&#x435;&#x43C;&#x43E;&#x43C; &#x444;&#x43E;&#x440;&#x43C;&#x430;&#x442;&#x435; &#x43E;&#x442;&#x432;&#x435;&#x442;&#x430;</a></h4>\\n<p>И клиент и сервер должны знать в каком формате общаться и этот формат должен быть предоставлен в HTTP заголовке.</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-text\\\"><code>Content-Type - &#x444;&#x43E;&#x440;&#x43C;&#x430;&#x442; &#x437;&#x430;&#x43F;&#x440;&#x43E;&#x441;&#x430;\\nAccept - &#x441;&#x43F;&#x438;&#x441;&#x43E;&#x43A; &#x43F;&#x43E;&#x434;&#x434;&#x435;&#x440;&#x436;&#x438;&#x432;&#x430;&#x435;&#x43C;&#x44B;&#x445; &#x444;&#x43E;&#x440;&#x43C;&#x430;&#x442;&#x43E;&#x432; &#x434;&#x43B;&#x44F; &#x43E;&#x442;&#x432;&#x435;&#x442;&#x430;</code></pre>\\n      </div>\\n<p>Постарайтесь избежать использование формата в URL</p>\\n<h4><a name=\\\"&#x418;&#x441;&#x43F;&#x43E;&#x43B;&#x44C;&#x437;&#x443;&#x439;&#x442;&#x435; HATEOAS\\\">5. &#x418;&#x441;&#x43F;&#x43E;&#x43B;&#x44C;&#x437;&#x443;&#x439;&#x442;&#x435; HATEOAS</a></h4>\\n<p>HATEOAS - это Hypermedia as the Engine of Application State,\\nчто по сути это метаинформация о структуре вашего сервиса, которая может быть использована для автоматического исследования (service autodiscover).\\nЧто дает возможность некоторым приложениям без человеческого вмешательства исследовать ваш сервис.\\nНапример имеем ответ от сервера с адреса <code>/api/v1/users/1</code>:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-json\\\"><code><span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token property\\\">&quot;firstName&quot;</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">&quot;Ivan&quot;</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token property\\\">&quot;lastName&quot;</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">&quot;Ivanov&quot;</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token property\\\">&quot;autodiscover&quot;</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token property\\\">&quot;friends&quot;</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">&quot;`/api/v1/users/1/friends&quot;</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token property\\\">&quot;photos&quot;</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">&quot;`/api/v1/users/1/photos&quot;</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token property\\\">&quot;messages&quot;</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">&quot;`/api/v1/users/1/messages&quot;</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n</code></pre>\\n      </div>\\n<p>в секции <code>autodiscover</code> мы видим список ресурсов, которые относятся к текущему.</p>\\n<h4><a name=\\\"&#x41F;&#x440;&#x435;&#x434;&#x43E;&#x441;&#x442;&#x430;&#x432;&#x44C;&#x442;&#x435; &#x432;&#x43E;&#x437;&#x43C;&#x43E;&#x436;&#x43D;&#x43E;&#x441;&#x442;&#x438; &#x444;&#x438;&#x43B;&#x44C;&#x442;&#x440;&#x430;&#x446;&#x438;&#x438;, &#x441;&#x43E;&#x440;&#x442;&#x438;&#x440;&#x43E;&#x432;&#x43A;&#x438;, &#x432;&#x44B;&#x431;&#x43E;&#x440;&#x430; &#x43F;&#x43E;&#x43B;&#x435;&#x439;, &#x43E;&#x433;&#x440;&#x430;&#x43D;&#x438;&#x447;&#x435;&#x43D;&#x438;&#x44F; &#x438; &#x441;&#x43C;&#x435;&#x449;&#x435;&#x43D;&#x438;&#x44F; &#x437;&#x430;&#x43F;&#x438;&#x441;&#x435;&#x439; &#x434;&#x43B;&#x44F; &#x43A;&#x43E;&#x43B;&#x435;&#x43A;&#x446;&#x438;&#x439;\\\">6. &#x41F;&#x440;&#x435;&#x434;&#x43E;&#x441;&#x442;&#x430;&#x432;&#x44C;&#x442;&#x435; &#x432;&#x43E;&#x437;&#x43C;&#x43E;&#x436;&#x43D;&#x43E;&#x441;&#x442;&#x438; &#x444;&#x438;&#x43B;&#x44C;&#x442;&#x440;&#x430;&#x446;&#x438;&#x438;, &#x441;&#x43E;&#x440;&#x442;&#x438;&#x440;&#x43E;&#x432;&#x43A;&#x438;, &#x432;&#x44B;&#x431;&#x43E;&#x440;&#x430; &#x43F;&#x43E;&#x43B;&#x435;&#x439;, &#x43E;&#x433;&#x440;&#x430;&#x43D;&#x438;&#x447;&#x435;&#x43D;&#x438;&#x44F; &#x438; &#x441;&#x43C;&#x435;&#x449;&#x435;&#x43D;&#x438;&#x44F; &#x437;&#x430;&#x43F;&#x438;&#x441;&#x435;&#x439; &#x434;&#x43B;&#x44F; &#x43A;&#x43E;&#x43B;&#x435;&#x43A;&#x446;&#x438;&#x439;</a></h4>\\n<p>Для таких целей, лучше поддерживать какой-нибудь язык запросов, позволяющий расширить стандартный, например graphql.\\nЯ же приведу примеры на псевдоязыке:</p>\\n<ul>\\n<li>Фильтрация - Поддерживайте фильтрацию с выражениями <code>/api/v1/users?filter=(firstName='Ivan',lastName=/^Ivan/,age>=18)</code></li>\\n<li>Сортировка - Поддерживайте сортировку по возрастанию и убыванию для нескольких полей <code>/api/v1/users?sort=(firstName:1,DOB:0)</code></li>\\n<li>Выбор полей - Поддерживайте выбор полей, это не только уменьшит трафик, но и позволит быстрее работать клиенту, обрабатывая меньшее количество данных\\n<code>/api/v1/users?fields=[firstName, lastName, DOB]</code></li>\\n<li>Ограничение и смещение - Поддерживайте параметры limit и offset, для контроля количества отдаваемых сущностей,\\nтак же это более гибкий подход, чем постраничный <code>/api/v1/users?offset=20&#x26;limit=10</code></li>\\n</ul>\\n<h4><a name=\\\"&#x41F;&#x43E;&#x434;&#x434;&#x435;&#x440;&#x436;&#x438;&#x432;&#x430;&#x439;&#x442;&#x435; &#x432;&#x435;&#x440;&#x441;&#x438;&#x43E;&#x43D;&#x43D;&#x43E;&#x441;&#x442;&#x44C; API\\\">7. &#x41F;&#x43E;&#x434;&#x434;&#x435;&#x440;&#x436;&#x438;&#x432;&#x430;&#x439;&#x442;&#x435; &#x432;&#x435;&#x440;&#x441;&#x438;&#x43E;&#x43D;&#x43D;&#x43E;&#x441;&#x442;&#x44C; API</a></h4>\\n<p>Время от времени, стандарты и интерфейсы вашего API могут меняться и что бы избежать путаницы используйте версионность.\\nИзбегайте API без версий или API с дробными значениями <code>/api/v100500/users</code></p>\\n<h4><a name=\\\"&#x41E;&#x431;&#x440;&#x430;&#x431;&#x430;&#x442;&#x44B;&#x432;&#x430;&#x439;&#x442;&#x435; &#x43E;&#x448;&#x438;&#x431;&#x43A;&#x438; &#x43F;&#x43E; HTTP &#x43A;&#x43E;&#x434;&#x430;&#x43C;\\\">8. &#x41E;&#x431;&#x440;&#x430;&#x431;&#x430;&#x442;&#x44B;&#x432;&#x430;&#x439;&#x442;&#x435; &#x43E;&#x448;&#x438;&#x431;&#x43A;&#x438; &#x43F;&#x43E; HTTP &#x43A;&#x43E;&#x434;&#x430;&#x43C;</a></h4>\\n<p>Протокол HTTP поддерживает огромное количество <a href=\\\"https://ru.wikipedia.org/wiki/%D0%A1%D0%BF%D0%B8%D1%81%D0%BE%D0%BA_%D0%BA%D0%BE%D0%B4%D0%BE%D0%B2_%D1%81%D0%BE%D1%81%D1%82%D0%BE%D1%8F%D0%BD%D0%B8%D1%8F_HTTP\\\">кодов состояний</a>\\nНе обязательно использовать их все, достаточно этих 13:</p>\\n<ul>\\n<li>200 – OK – ответ отправлен успешно, обычно ответ на: GET</li>\\n<li>201 – Created – создание успешно завершено, обычно ответ на: POST, PUT</li>\\n<li>204 – Accepted – удаление или редактирование успешно завершено, обыно ответ на: PATCH, DELETE</li>\\n<li>205 – Reset Content – после выполнения операции необходимо обновить данные</li>\\n<li>304 – Not Modified – ничего не изменилось, можно взять данные из кэша приложения</li>\\n<li>400 – Bad Request – неправильный запрос, подробности обыно предоставляют в теле ответа</li>\\n<li>401 – Unauthorized – пользователь не авторизован</li>\\n<li>402 – Payment Required – пользователю необходимо произвести оплату для продолжения</li>\\n<li>403 – Forbidden – пользователь авторизован, но не имеет привиллегий для выполнения операции</li>\\n<li>404 – Not found – ресурс не найден</li>\\n<li>415 – Unsupported Media Type – например, если пользователь загружает текстовый файл вместо ожидаемой картинки</li>\\n<li>500 – Internal Server Error – этот код лучше не использовать, но записывать в логи все данные об ошибке</li>\\n<li>501 – Not implemented – используется для сообщения, что данная операция не реализована на сервере, например если ваше приложение в стадии активной разработки</li>\\n</ul>\\n<p>При ответе об ошибки помещайте дополнительную информацию в тело запроса (payload - полезная нагрузка)</p>\\n<h4><a name=\\\"&#x41F;&#x43E;&#x434;&#x434;&#x435;&#x440;&#x436;&#x438;&#x432;&#x430;&#x439;&#x442;&#x435; &#x43F;&#x435;&#x440;&#x435;&#x43E;&#x43F;&#x440;&#x435;&#x434;&#x435;&#x43B;&#x435;&#x43D;&#x438;&#x435; HTTP &#x43C;&#x435;&#x442;&#x43E;&#x434;&#x43E;&#x432;\\\">9. &#x41F;&#x43E;&#x434;&#x434;&#x435;&#x440;&#x436;&#x438;&#x432;&#x430;&#x439;&#x442;&#x435; &#x43F;&#x435;&#x440;&#x435;&#x43E;&#x43F;&#x440;&#x435;&#x434;&#x435;&#x43B;&#x435;&#x43D;&#x438;&#x435; HTTP &#x43C;&#x435;&#x442;&#x43E;&#x434;&#x43E;&#x432;</a></h4>\\n<p>Достаточно редкий случай, но некоторые прокси серверы поддерживают только GET и POST запросы.\\nВ таком случае можно реализовать служебный заголовок <code>X-HTTP-Method-Override</code>, для замены POST метода на метод указанный в нем.</p>\\n<h3><a name=\\\"&#x414;&#x43E;&#x43A;&#x443;&#x43C;&#x435;&#x43D;&#x442;&#x430;&#x446;&#x438;&#x44F;\\\">4. &#x414;&#x43E;&#x43A;&#x443;&#x43C;&#x435;&#x43D;&#x442;&#x430;&#x446;&#x438;&#x44F;</a></h3>\\n<p>Какой бы user-friendly не был ваш API он обязательно должен быть документирован, от схем до значений HTTP кодов.\\nСуществуют множество способов документирования API, наиболее популярный и на мой взляд понятный - это <a href=\\\"http://swagger.io\\\">swagger</a>,\\nко всему у них можно найти спецификацию Rest API (стандарт, которому они следуют).</p>\\n<h3><a name=\\\"&#x428;&#x438;&#x444;&#x440;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x435;\\\">5. &#x428;&#x438;&#x444;&#x440;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x435;</a></h3>\\n<p>Старайтесь использовать SSL шифрование. Сертификаты легко и бесплатно можно получить на <a href=\\\"https://www.startssl.com/\\\">StartSLL</a> или <a href=\\\"https://letsencrypt.org/\\\">LetsEncrypt</a>.</p>\",\"color\":\"rgba(37, 127, 110, 0.8)\",\"title\":\"Проектирование Rest API\",\"description\":\"Как спроектировать Rest API для мобильного приложения или SPA\",\"category\":\"кодинг\",\"tags\":[\"rest\",\"api\"],\"date\":\"2016-12-11T00:00:00.000Z\",\"type\":null}],\"total\":1,\"page\":1}}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// path---tags-api-a568b9639664fa8a6493.js","module.exports = {\"pathContext\":{\"tag\":\"api\",\"latest\":[{\"images\":{\"blurUp\":{\"src\":\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAAA/ElEQVQoz62QvWvCUBTF/atLuxaHIhShgzgoDlKH6uDQTVwEXQxVa2tUEjVGkxg/UqMmxpic3jxQkWziWd7h8t7vnvMiuLMiJ3P0PYjb5U2Q/mYRBpZ0AcOdQWAfD/URXttTrPYunjgJ0aaMjrHD26+CwnCBl9YEjzT/HK/Y29SICwOLSgfGwWL+uSEj9j2FZjnMVzWTgBbiPwoq6ho+LU33ZuwM9DFpY+s618CyLkK1TeaTXQ1JXsPB85DuzyCYNrj5Bn+OiwSvsjsB8KSc3DrDz0De1FFbjlnlPNXiKZGwtvEu6MiJc0pwRJZ8kHRAC4rS5b8z0le48r30D7DuFKOmFdvEAAAAAElFTkSuQmCC\"},\"share\":{\"src\":\"/static/0211be6ff0f879d0d8481d9480297691-f5537.jpg\"},\"heroPreviewLG\":{\"src\":\"/static/0211be6ff0f879d0d8481d9480297691-294b1.webp\"},\"heroPreviewMD\":{\"src\":\"/static/0211be6ff0f879d0d8481d9480297691-d8cc9.webp\"},\"heroPreviewSM\":{\"src\":\"/static/0211be6ff0f879d0d8481d9480297691-c14dc.webp\"},\"heroPreviewXS\":{\"src\":\"/static/0211be6ff0f879d0d8481d9480297691-227ee.webp\"},\"mediumPreview\":{\"src\":\"/static/0211be6ff0f879d0d8481d9480297691-ce211.webp\"},\"smallPreview\":{\"src\":\"/static/0211be6ff0f879d0d8481d9480297691-051c1.webp\"}},\"excerpt\":\"Ave $USER! Спроектировать Rest API для мобильного приложения, SPA( Single Page Application ) или просто как отдельного сервиса…\",\"id\":\"/Users/ivan/projects/gatsby-blog/src/pages/2016/12/article-rest-api-design-best-practices/index.md absPath of file >>> MarkdownRemark\",\"slug\":\"/2016/12/article-rest-api-design-best-practices\",\"permalink\":\"https://potofcode.com/2016/12/article-rest-api-design-best-practices/\",\"html\":\"<p>Ave $USER!</p>\\n<p>Спроектировать Rest API для мобильного приложения, SPA( Single Page Application ) или просто как отдельного сервиса не так уж и просто.\\nС учетом моделей данных и особенностей архитектуры стэка, на котором он будет запущен этот процесс становится еще сложнее.\\nА если еще добавить аутентификацию пользователя, через авторизацию на стороннем сервисе, то процесс проектирования может очень сильно затянуться.\\nЧто бы не потеряться во всем этом, я составил небольшой список лучших практик проектирования Rest API с подробными объяснениями.</p>\\n<h2>Содержание:</h2>\\n<ol class=\\\"contents\\\">\\n  <li><a href=\\\"#&#x41E;&#x43F;&#x440;&#x435;&#x434;&#x435;&#x43B;&#x435;&#x43D;&#x438;&#x44F;\\\">&#x41E;&#x43F;&#x440;&#x435;&#x434;&#x435;&#x43B;&#x435;&#x43D;&#x438;&#x44F;</a></li>\\n  <li><a href=\\\"#&#x41F;&#x440;&#x43E;&#x435;&#x43A;&#x442;&#x438;&#x440;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x435; &#x441;&#x445;&#x435;&#x43C;&#x44B;\\\">&#x41F;&#x440;&#x43E;&#x435;&#x43A;&#x442;&#x438;&#x440;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x435; &#x441;&#x445;&#x435;&#x43C;&#x44B;</a></li>\\n  <li><a href=\\\"#&#x41A;&#x43E;&#x43D;&#x435;&#x447;&#x43D;&#x44B;&#x435; &#x430;&#x434;&#x440;&#x435;&#x441;&#x430;\\\">&#x41A;&#x43E;&#x43D;&#x435;&#x447;&#x43D;&#x44B;&#x435; &#x430;&#x434;&#x440;&#x435;&#x441;&#x430;</a></li>\\n  <li><a href=\\\"#&#x414;&#x43E;&#x43A;&#x443;&#x43C;&#x435;&#x43D;&#x442;&#x430;&#x446;&#x438;&#x44F;\\\">&#x414;&#x43E;&#x43A;&#x443;&#x43C;&#x435;&#x43D;&#x442;&#x430;&#x446;&#x438;&#x44F;</a></li>\\n  <li><a href=\\\"#&#x428;&#x438;&#x444;&#x440;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x435;\\\">&#x428;&#x438;&#x444;&#x440;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x435;</a></li>\\n</ol>\\n<h3><a name=\\\"&#x41E;&#x43F;&#x440;&#x435;&#x434;&#x435;&#x43B;&#x435;&#x43D;&#x438;&#x44F;\\\">&#x41E;&#x43F;&#x440;&#x435;&#x434;&#x435;&#x43B;&#x435;&#x43D;&#x438;&#x44F;</a></h3>\\n<p>Сначала дадим некоторые определения и понятия, которые я буду использовать далее:</p>\\n<ul>\\n<li>Ресурс (Resource) - Экземпляр одиночного объекта. Например: товар</li>\\n<li>Коллекция (Collection) - Коллекция однотипных объектов. Например: товар</li>\\n<li>Схема (Schema) - Описание модели объекта или коллекции объектов. Например: для товара схема описывает название, цену,\\nтип, количество на складе, список свойств товара и т.д.</li>\\n<li>Конечный адрес (Endpoint) - URL который представляет ресурс или коллекцию</li>\\n</ul>\\n<h3><a name=\\\"&#x41F;&#x440;&#x43E;&#x435;&#x43A;&#x442;&#x438;&#x440;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x435; &#x441;&#x445;&#x435;&#x43C;&#x44B;\\\">&#x41F;&#x440;&#x43E;&#x435;&#x43A;&#x442;&#x438;&#x440;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x435; &#x441;&#x445;&#x435;&#x43C;&#x44B;</a></h3>\\n<p>На самом деле, проектирование Rest API начинается гораздо раньше чем вы можете подумать.\\nПроектирование начинается со схемы ресурсов и коллекций и их связей. Например вы проектируете социальную сеть Switter.\\nБазовые сущности социальной сети - это профили пользователей <code>Profile</code>.\\nМежду профилями существуют связи в виде дружбы типа многие ко многим и разрешается она через вспомогательную схему <code>Friends</code>.\\nВнутри социальной сети можно обмениваться сообщениями <code>Message</code>.\\nСообщение имеет отправителя и один или несколько адресатов.\\nВсе участники беседы <code>Profiles</code> объединяются в <code>MessageGroups</code> через <code>ProfilesMessageGroups</code>,\\nи каждое сообщение <code>Messages</code> имеет свою <code>MessageGroups</code>. Визуально это выглядит так:</p>\\n<div class=\\\"presentation\\\">\\n  \\n  <a class=\\\"gatsby-resp-image-link\\\" href=\\\"/static/9bc7c46bbf25b62e8033538c4560291a-3f470.png\\\" style=\\\"display: block\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">\\n  \\n  <span class=\\\"gatsby-resp-image-wrapper\\\" style=\\\"position: relative; display: block; z-index: 1; max-width: 601px; margin-left: auto; margin-right: auto;\\\">\\n    <span class=\\\"gatsby-resp-image-background-image\\\" style=\\\"padding-bottom: 88.85191347753744%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsSAAALEgHS3X78AAAB60lEQVQ4y5WT64vTQBTF+/9/FEQQBREREVlZ8IVCxbXuupvtkjSbx8QkTF6TTl5tmqRt0ke8zaypQiLsYVpKM785d869GdR1vd3uxr/oGa9xun+DI82L6i7pJD05E14Puc8CrjZb+GcAn7Kqrm6VcwHdYorIHNN5J5zEM1m3RM1E2Kuq6g7ebDazNJ1Op2EY0kZ5ni8bFUXR/ogp9X0ftmVZBsgdDMcgTZtMJqIo8jwvy3ILr1YrZrvf7z1C4CnHcbCtLMsjLEkSxjhoBP5tqeDQOjuOo+s62MLRx7J3u70VpAr24RvZNJjnTRDbYl2xVTbxWIReiehGNSXTO5bNBMcfmKYe0Ei0n338+fTd6OTS+KE4nRH2wsksME1zvV6z4u8HZ4uF67qQ/D1giBd4iMS2LEVREEKqqkKWEFj5R2xnB9xK0zRogd0ISvj7UVtdLxzHMBSUTU7b7V4YGviPM3YveGUs69Abw/G7YQknr4bj5x++Pzn9+uLT+csvl9c6qf8ruD8M3AGOolg1LGTaSb5ia5YVfdi1Rh+djh68GT58++3x+4tB6BMIRhAEmFhoLFzSsiy4wrJLSexDeGw2D86wFd4Elg0TjHefMyGEvT/QP7AcuNOQV3TFsGGZXhCmy2TRW3Y0zw0St+s34fP3nEuR8kQAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;\\\">\\n      <img class=\\\"gatsby-resp-image-image\\\" style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\" alt=\\\"schema\\\" title=\\\"\\\" src=\\\"/static/9bc7c46bbf25b62e8033538c4560291a-3f470.png\\\" srcset=\\\"/static/9bc7c46bbf25b62e8033538c4560291a-2efde.png 245w,\\n/static/9bc7c46bbf25b62e8033538c4560291a-821bc.png 490w,\\n/static/9bc7c46bbf25b62e8033538c4560291a-3f470.png 601w\\\" sizes=\\\"(max-width: 601px) 100vw, 601px\\\">\\n    </span>\\n  </span>\\n  \\n  </a>\\n    \\n</div>\\n<p><a href=\\\"/a5400ffd621c3c5c781102159c7a0b12.mwb\\\">Скачать проект MySQL Workbench</a></p>\\n<p>Из схемы видно, что два профиля дружат, если в <code>Friend</code> существует запись в обе стороны с подтверждением.\\nАналогично легко получить список переписок и всех участников каждой переписки и их сообщения.</p>\\n<p>Таким образом, перед проектирование Rest API необходимо определить схемы всех сущностей вашего приложения.</p>\\n<h3><a name=\\\"&#x41A;&#x43E;&#x43D;&#x435;&#x447;&#x43D;&#x44B;&#x435; &#x430;&#x434;&#x440;&#x435;&#x441;&#x430;\\\">&#x41A;&#x43E;&#x43D;&#x435;&#x447;&#x43D;&#x44B;&#x435; &#x430;&#x434;&#x440;&#x435;&#x441;&#x430;</a></h3>\\n<p>Есть несколько общепринятых правил составления конечных адресов.</p>\\n<h4><a name=\\\"&#x41D;&#x438;&#x43A;&#x430;&#x43A;&#x438;&#x445; &#x433;&#x43B;&#x430;&#x433;&#x43E;&#x43B;&#x43E;&#x432; &#x432; &#x43A;&#x43E;&#x43D;&#x435;&#x447;&#x43D;&#x44B;&#x445; &#x430;&#x434;&#x440;&#x435;&#x441;&#x430;&#x445;\\\">1. &#x41D;&#x438;&#x43A;&#x430;&#x43A;&#x438;&#x445; &#x433;&#x43B;&#x430;&#x433;&#x43E;&#x43B;&#x43E;&#x432; &#x432; &#x43A;&#x43E;&#x43D;&#x435;&#x447;&#x43D;&#x44B;&#x445; &#x430;&#x434;&#x440;&#x435;&#x441;&#x430;&#x445;</a></h4>\\n<p>Все возможные действия в Rest API выполняются с помощью HTTP методов:</p>\\n<ul>\\n<li>GET - получить</li>\\n<li>POST - создать</li>\\n<li>PUT - заменить</li>\\n<li>PATCH - частично изменить</li>\\n<li>DELETE - удалить</li>\\n</ul>\\n<p>Отсюда видно, что никаких изменений данных при GET запросе не должно происходить.</p>\\n<h4><a name=\\\"&#x422;&#x43E;&#x43B;&#x44C;&#x43A;&#x43E; &#x441;&#x443;&#x449;&#x435;&#x441;&#x442;&#x432;&#x438;&#x442;&#x435;&#x43B;&#x44C;&#x43D;&#x44B;&#x435; &#x432;&#x43E; &#x43C;&#x43D;&#x43E;&#x436;&#x435;&#x441;&#x442;&#x432;&#x435;&#x43D;&#x43D;&#x43E;&#x43C; &#x447;&#x438;&#x441;&#x43B;&#x435;\\\">2. &#x422;&#x43E;&#x43B;&#x44C;&#x43A;&#x43E; &#x441;&#x443;&#x449;&#x435;&#x441;&#x442;&#x432;&#x438;&#x442;&#x435;&#x43B;&#x44C;&#x43D;&#x44B;&#x435; &#x432;&#x43E; &#x43C;&#x43D;&#x43E;&#x436;&#x435;&#x441;&#x442;&#x432;&#x435;&#x43D;&#x43D;&#x43E;&#x43C; &#x447;&#x438;&#x441;&#x43B;&#x435;</a></h4>\\n<p>Не стоит смешивать единственное и множественное число ресурсов, это нарушает семантическое значение и может ввести в заблуждение.\\nИспользуйте всегда множественное. Например у вас есть ресурс <code>users</code>,\\nзайдя на него по конечному адресу <code>/api/v1/users</code> вы получите список пользователей, естественно ограниченный фильтрами по умолчанию,\\nкак если бы вы зашли по адресу <code>/api/v1/users?offset=0&#x26;limit=50</code>.\\nНо перейдя на адрес <code>/api/v1/users/1</code> мы как бы говорим: “получить объект с id=1 из ресурса пользователи”</p>\\n<h4><a name=\\\"&#x418;&#x441;&#x43F;&#x43E;&#x43B;&#x44C;&#x437;&#x443;&#x439;&#x442;&#x435; &#x43F;&#x43E;&#x434;&#x437;&#x430;&#x43F;&#x440;&#x43E;&#x441;&#x44B; &#x432; &#x440;&#x435;&#x441;&#x443;&#x440;&#x441;&#x430;&#x445; &#x441; &#x43E;&#x442;&#x43D;&#x43E;&#x448;&#x435;&#x43D;&#x438;&#x44F;&#x43C;&#x438;\\\">3. &#x418;&#x441;&#x43F;&#x43E;&#x43B;&#x44C;&#x437;&#x443;&#x439;&#x442;&#x435; &#x43F;&#x43E;&#x434;&#x437;&#x430;&#x43F;&#x440;&#x43E;&#x441;&#x44B; &#x432; &#x440;&#x435;&#x441;&#x443;&#x440;&#x441;&#x430;&#x445; &#x441; &#x43E;&#x442;&#x43D;&#x43E;&#x448;&#x435;&#x43D;&#x438;&#x44F;&#x43C;&#x438;</a></h4>\\n<p>Если мы хотим получить друзей пользователя под номером 1, то адрес будет следующим <code>/api/v1/users/1/friends</code>.\\nЭтот подход позволяет избежать дополнительных запросов на сервер.</p>\\n<h4><a name=\\\"&#x418;&#x441;&#x43F;&#x43E;&#x43B;&#x44C;&#x437;&#x443;&#x439;&#x442;&#x435; HTTP &#x437;&#x430;&#x433;&#x43E;&#x43B;&#x43E;&#x432;&#x43A;&#x438; &#x434;&#x43B;&#x44F; &#x441;&#x43E;&#x43E;&#x431;&#x449;&#x435;&#x43D;&#x438;&#x44F; &#x43E;&#x431; &#x43E;&#x436;&#x438;&#x434;&#x435;&#x43C;&#x43E;&#x43C; &#x444;&#x43E;&#x440;&#x43C;&#x430;&#x442;&#x435; &#x43E;&#x442;&#x432;&#x435;&#x442;&#x430;\\\">4. &#x418;&#x441;&#x43F;&#x43E;&#x43B;&#x44C;&#x437;&#x443;&#x439;&#x442;&#x435; HTTP &#x437;&#x430;&#x433;&#x43E;&#x43B;&#x43E;&#x432;&#x43A;&#x438; &#x434;&#x43B;&#x44F; &#x441;&#x43E;&#x43E;&#x431;&#x449;&#x435;&#x43D;&#x438;&#x44F; &#x43E;&#x431; &#x43E;&#x436;&#x438;&#x434;&#x435;&#x43C;&#x43E;&#x43C; &#x444;&#x43E;&#x440;&#x43C;&#x430;&#x442;&#x435; &#x43E;&#x442;&#x432;&#x435;&#x442;&#x430;</a></h4>\\n<p>И клиент и сервер должны знать в каком формате общаться и этот формат должен быть предоставлен в HTTP заголовке.</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-text\\\"><code>Content-Type - &#x444;&#x43E;&#x440;&#x43C;&#x430;&#x442; &#x437;&#x430;&#x43F;&#x440;&#x43E;&#x441;&#x430;\\nAccept - &#x441;&#x43F;&#x438;&#x441;&#x43E;&#x43A; &#x43F;&#x43E;&#x434;&#x434;&#x435;&#x440;&#x436;&#x438;&#x432;&#x430;&#x435;&#x43C;&#x44B;&#x445; &#x444;&#x43E;&#x440;&#x43C;&#x430;&#x442;&#x43E;&#x432; &#x434;&#x43B;&#x44F; &#x43E;&#x442;&#x432;&#x435;&#x442;&#x430;</code></pre>\\n      </div>\\n<p>Постарайтесь избежать использование формата в URL</p>\\n<h4><a name=\\\"&#x418;&#x441;&#x43F;&#x43E;&#x43B;&#x44C;&#x437;&#x443;&#x439;&#x442;&#x435; HATEOAS\\\">5. &#x418;&#x441;&#x43F;&#x43E;&#x43B;&#x44C;&#x437;&#x443;&#x439;&#x442;&#x435; HATEOAS</a></h4>\\n<p>HATEOAS - это Hypermedia as the Engine of Application State,\\nчто по сути это метаинформация о структуре вашего сервиса, которая может быть использована для автоматического исследования (service autodiscover).\\nЧто дает возможность некоторым приложениям без человеческого вмешательства исследовать ваш сервис.\\nНапример имеем ответ от сервера с адреса <code>/api/v1/users/1</code>:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-json\\\"><code><span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token property\\\">&quot;firstName&quot;</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">&quot;Ivan&quot;</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token property\\\">&quot;lastName&quot;</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">&quot;Ivanov&quot;</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token property\\\">&quot;autodiscover&quot;</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token property\\\">&quot;friends&quot;</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">&quot;`/api/v1/users/1/friends&quot;</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token property\\\">&quot;photos&quot;</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">&quot;`/api/v1/users/1/photos&quot;</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token property\\\">&quot;messages&quot;</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">&quot;`/api/v1/users/1/messages&quot;</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n</code></pre>\\n      </div>\\n<p>в секции <code>autodiscover</code> мы видим список ресурсов, которые относятся к текущему.</p>\\n<h4><a name=\\\"&#x41F;&#x440;&#x435;&#x434;&#x43E;&#x441;&#x442;&#x430;&#x432;&#x44C;&#x442;&#x435; &#x432;&#x43E;&#x437;&#x43C;&#x43E;&#x436;&#x43D;&#x43E;&#x441;&#x442;&#x438; &#x444;&#x438;&#x43B;&#x44C;&#x442;&#x440;&#x430;&#x446;&#x438;&#x438;, &#x441;&#x43E;&#x440;&#x442;&#x438;&#x440;&#x43E;&#x432;&#x43A;&#x438;, &#x432;&#x44B;&#x431;&#x43E;&#x440;&#x430; &#x43F;&#x43E;&#x43B;&#x435;&#x439;, &#x43E;&#x433;&#x440;&#x430;&#x43D;&#x438;&#x447;&#x435;&#x43D;&#x438;&#x44F; &#x438; &#x441;&#x43C;&#x435;&#x449;&#x435;&#x43D;&#x438;&#x44F; &#x437;&#x430;&#x43F;&#x438;&#x441;&#x435;&#x439; &#x434;&#x43B;&#x44F; &#x43A;&#x43E;&#x43B;&#x435;&#x43A;&#x446;&#x438;&#x439;\\\">6. &#x41F;&#x440;&#x435;&#x434;&#x43E;&#x441;&#x442;&#x430;&#x432;&#x44C;&#x442;&#x435; &#x432;&#x43E;&#x437;&#x43C;&#x43E;&#x436;&#x43D;&#x43E;&#x441;&#x442;&#x438; &#x444;&#x438;&#x43B;&#x44C;&#x442;&#x440;&#x430;&#x446;&#x438;&#x438;, &#x441;&#x43E;&#x440;&#x442;&#x438;&#x440;&#x43E;&#x432;&#x43A;&#x438;, &#x432;&#x44B;&#x431;&#x43E;&#x440;&#x430; &#x43F;&#x43E;&#x43B;&#x435;&#x439;, &#x43E;&#x433;&#x440;&#x430;&#x43D;&#x438;&#x447;&#x435;&#x43D;&#x438;&#x44F; &#x438; &#x441;&#x43C;&#x435;&#x449;&#x435;&#x43D;&#x438;&#x44F; &#x437;&#x430;&#x43F;&#x438;&#x441;&#x435;&#x439; &#x434;&#x43B;&#x44F; &#x43A;&#x43E;&#x43B;&#x435;&#x43A;&#x446;&#x438;&#x439;</a></h4>\\n<p>Для таких целей, лучше поддерживать какой-нибудь язык запросов, позволяющий расширить стандартный, например graphql.\\nЯ же приведу примеры на псевдоязыке:</p>\\n<ul>\\n<li>Фильтрация - Поддерживайте фильтрацию с выражениями <code>/api/v1/users?filter=(firstName='Ivan',lastName=/^Ivan/,age>=18)</code></li>\\n<li>Сортировка - Поддерживайте сортировку по возрастанию и убыванию для нескольких полей <code>/api/v1/users?sort=(firstName:1,DOB:0)</code></li>\\n<li>Выбор полей - Поддерживайте выбор полей, это не только уменьшит трафик, но и позволит быстрее работать клиенту, обрабатывая меньшее количество данных\\n<code>/api/v1/users?fields=[firstName, lastName, DOB]</code></li>\\n<li>Ограничение и смещение - Поддерживайте параметры limit и offset, для контроля количества отдаваемых сущностей,\\nтак же это более гибкий подход, чем постраничный <code>/api/v1/users?offset=20&#x26;limit=10</code></li>\\n</ul>\\n<h4><a name=\\\"&#x41F;&#x43E;&#x434;&#x434;&#x435;&#x440;&#x436;&#x438;&#x432;&#x430;&#x439;&#x442;&#x435; &#x432;&#x435;&#x440;&#x441;&#x438;&#x43E;&#x43D;&#x43D;&#x43E;&#x441;&#x442;&#x44C; API\\\">7. &#x41F;&#x43E;&#x434;&#x434;&#x435;&#x440;&#x436;&#x438;&#x432;&#x430;&#x439;&#x442;&#x435; &#x432;&#x435;&#x440;&#x441;&#x438;&#x43E;&#x43D;&#x43D;&#x43E;&#x441;&#x442;&#x44C; API</a></h4>\\n<p>Время от времени, стандарты и интерфейсы вашего API могут меняться и что бы избежать путаницы используйте версионность.\\nИзбегайте API без версий или API с дробными значениями <code>/api/v100500/users</code></p>\\n<h4><a name=\\\"&#x41E;&#x431;&#x440;&#x430;&#x431;&#x430;&#x442;&#x44B;&#x432;&#x430;&#x439;&#x442;&#x435; &#x43E;&#x448;&#x438;&#x431;&#x43A;&#x438; &#x43F;&#x43E; HTTP &#x43A;&#x43E;&#x434;&#x430;&#x43C;\\\">8. &#x41E;&#x431;&#x440;&#x430;&#x431;&#x430;&#x442;&#x44B;&#x432;&#x430;&#x439;&#x442;&#x435; &#x43E;&#x448;&#x438;&#x431;&#x43A;&#x438; &#x43F;&#x43E; HTTP &#x43A;&#x43E;&#x434;&#x430;&#x43C;</a></h4>\\n<p>Протокол HTTP поддерживает огромное количество <a href=\\\"https://ru.wikipedia.org/wiki/%D0%A1%D0%BF%D0%B8%D1%81%D0%BE%D0%BA_%D0%BA%D0%BE%D0%B4%D0%BE%D0%B2_%D1%81%D0%BE%D1%81%D1%82%D0%BE%D1%8F%D0%BD%D0%B8%D1%8F_HTTP\\\">кодов состояний</a>\\nНе обязательно использовать их все, достаточно этих 13:</p>\\n<ul>\\n<li>200 – OK – ответ отправлен успешно, обычно ответ на: GET</li>\\n<li>201 – Created – создание успешно завершено, обычно ответ на: POST, PUT</li>\\n<li>204 – Accepted – удаление или редактирование успешно завершено, обыно ответ на: PATCH, DELETE</li>\\n<li>205 – Reset Content – после выполнения операции необходимо обновить данные</li>\\n<li>304 – Not Modified – ничего не изменилось, можно взять данные из кэша приложения</li>\\n<li>400 – Bad Request – неправильный запрос, подробности обыно предоставляют в теле ответа</li>\\n<li>401 – Unauthorized – пользователь не авторизован</li>\\n<li>402 – Payment Required – пользователю необходимо произвести оплату для продолжения</li>\\n<li>403 – Forbidden – пользователь авторизован, но не имеет привиллегий для выполнения операции</li>\\n<li>404 – Not found – ресурс не найден</li>\\n<li>415 – Unsupported Media Type – например, если пользователь загружает текстовый файл вместо ожидаемой картинки</li>\\n<li>500 – Internal Server Error – этот код лучше не использовать, но записывать в логи все данные об ошибке</li>\\n<li>501 – Not implemented – используется для сообщения, что данная операция не реализована на сервере, например если ваше приложение в стадии активной разработки</li>\\n</ul>\\n<p>При ответе об ошибки помещайте дополнительную информацию в тело запроса (payload - полезная нагрузка)</p>\\n<h4><a name=\\\"&#x41F;&#x43E;&#x434;&#x434;&#x435;&#x440;&#x436;&#x438;&#x432;&#x430;&#x439;&#x442;&#x435; &#x43F;&#x435;&#x440;&#x435;&#x43E;&#x43F;&#x440;&#x435;&#x434;&#x435;&#x43B;&#x435;&#x43D;&#x438;&#x435; HTTP &#x43C;&#x435;&#x442;&#x43E;&#x434;&#x43E;&#x432;\\\">9. &#x41F;&#x43E;&#x434;&#x434;&#x435;&#x440;&#x436;&#x438;&#x432;&#x430;&#x439;&#x442;&#x435; &#x43F;&#x435;&#x440;&#x435;&#x43E;&#x43F;&#x440;&#x435;&#x434;&#x435;&#x43B;&#x435;&#x43D;&#x438;&#x435; HTTP &#x43C;&#x435;&#x442;&#x43E;&#x434;&#x43E;&#x432;</a></h4>\\n<p>Достаточно редкий случай, но некоторые прокси серверы поддерживают только GET и POST запросы.\\nВ таком случае можно реализовать служебный заголовок <code>X-HTTP-Method-Override</code>, для замены POST метода на метод указанный в нем.</p>\\n<h3><a name=\\\"&#x414;&#x43E;&#x43A;&#x443;&#x43C;&#x435;&#x43D;&#x442;&#x430;&#x446;&#x438;&#x44F;\\\">4. &#x414;&#x43E;&#x43A;&#x443;&#x43C;&#x435;&#x43D;&#x442;&#x430;&#x446;&#x438;&#x44F;</a></h3>\\n<p>Какой бы user-friendly не был ваш API он обязательно должен быть документирован, от схем до значений HTTP кодов.\\nСуществуют множество способов документирования API, наиболее популярный и на мой взляд понятный - это <a href=\\\"http://swagger.io\\\">swagger</a>,\\nко всему у них можно найти спецификацию Rest API (стандарт, которому они следуют).</p>\\n<h3><a name=\\\"&#x428;&#x438;&#x444;&#x440;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x435;\\\">5. &#x428;&#x438;&#x444;&#x440;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x435;</a></h3>\\n<p>Старайтесь использовать SSL шифрование. Сертификаты легко и бесплатно можно получить на <a href=\\\"https://www.startssl.com/\\\">StartSLL</a> или <a href=\\\"https://letsencrypt.org/\\\">LetsEncrypt</a>.</p>\",\"color\":\"rgba(37, 127, 110, 0.8)\",\"title\":\"Проектирование Rest API\",\"description\":\"Как спроектировать Rest API для мобильного приложения или SPA\",\"category\":\"кодинг\",\"tags\":[\"rest\",\"api\"],\"date\":\"2016-12-11T00:00:00.000Z\",\"type\":null}],\"posts\":[{\"images\":{\"blurUp\":{\"src\":\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAAA/ElEQVQoz62QvWvCUBTF/atLuxaHIhShgzgoDlKH6uDQTVwEXQxVa2tUEjVGkxg/UqMmxpic3jxQkWziWd7h8t7vnvMiuLMiJ3P0PYjb5U2Q/mYRBpZ0AcOdQWAfD/URXttTrPYunjgJ0aaMjrHD26+CwnCBl9YEjzT/HK/Y29SICwOLSgfGwWL+uSEj9j2FZjnMVzWTgBbiPwoq6ho+LU33ZuwM9DFpY+s618CyLkK1TeaTXQ1JXsPB85DuzyCYNrj5Bn+OiwSvsjsB8KSc3DrDz0De1FFbjlnlPNXiKZGwtvEu6MiJc0pwRJZ8kHRAC4rS5b8z0le48r30D7DuFKOmFdvEAAAAAElFTkSuQmCC\"},\"share\":{\"src\":\"/static/0211be6ff0f879d0d8481d9480297691-f5537.jpg\"},\"heroPreviewLG\":{\"src\":\"/static/0211be6ff0f879d0d8481d9480297691-294b1.webp\"},\"heroPreviewMD\":{\"src\":\"/static/0211be6ff0f879d0d8481d9480297691-d8cc9.webp\"},\"heroPreviewSM\":{\"src\":\"/static/0211be6ff0f879d0d8481d9480297691-c14dc.webp\"},\"heroPreviewXS\":{\"src\":\"/static/0211be6ff0f879d0d8481d9480297691-227ee.webp\"},\"mediumPreview\":{\"src\":\"/static/0211be6ff0f879d0d8481d9480297691-ce211.webp\"},\"smallPreview\":{\"src\":\"/static/0211be6ff0f879d0d8481d9480297691-051c1.webp\"}},\"excerpt\":\"Ave $USER! Спроектировать Rest API для мобильного приложения, SPA( Single Page Application ) или просто как отдельного сервиса…\",\"id\":\"/Users/ivan/projects/gatsby-blog/src/pages/2016/12/article-rest-api-design-best-practices/index.md absPath of file >>> MarkdownRemark\",\"slug\":\"/2016/12/article-rest-api-design-best-practices\",\"permalink\":\"https://potofcode.com/2016/12/article-rest-api-design-best-practices/\",\"html\":\"<p>Ave $USER!</p>\\n<p>Спроектировать Rest API для мобильного приложения, SPA( Single Page Application ) или просто как отдельного сервиса не так уж и просто.\\nС учетом моделей данных и особенностей архитектуры стэка, на котором он будет запущен этот процесс становится еще сложнее.\\nА если еще добавить аутентификацию пользователя, через авторизацию на стороннем сервисе, то процесс проектирования может очень сильно затянуться.\\nЧто бы не потеряться во всем этом, я составил небольшой список лучших практик проектирования Rest API с подробными объяснениями.</p>\\n<h2>Содержание:</h2>\\n<ol class=\\\"contents\\\">\\n  <li><a href=\\\"#&#x41E;&#x43F;&#x440;&#x435;&#x434;&#x435;&#x43B;&#x435;&#x43D;&#x438;&#x44F;\\\">&#x41E;&#x43F;&#x440;&#x435;&#x434;&#x435;&#x43B;&#x435;&#x43D;&#x438;&#x44F;</a></li>\\n  <li><a href=\\\"#&#x41F;&#x440;&#x43E;&#x435;&#x43A;&#x442;&#x438;&#x440;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x435; &#x441;&#x445;&#x435;&#x43C;&#x44B;\\\">&#x41F;&#x440;&#x43E;&#x435;&#x43A;&#x442;&#x438;&#x440;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x435; &#x441;&#x445;&#x435;&#x43C;&#x44B;</a></li>\\n  <li><a href=\\\"#&#x41A;&#x43E;&#x43D;&#x435;&#x447;&#x43D;&#x44B;&#x435; &#x430;&#x434;&#x440;&#x435;&#x441;&#x430;\\\">&#x41A;&#x43E;&#x43D;&#x435;&#x447;&#x43D;&#x44B;&#x435; &#x430;&#x434;&#x440;&#x435;&#x441;&#x430;</a></li>\\n  <li><a href=\\\"#&#x414;&#x43E;&#x43A;&#x443;&#x43C;&#x435;&#x43D;&#x442;&#x430;&#x446;&#x438;&#x44F;\\\">&#x414;&#x43E;&#x43A;&#x443;&#x43C;&#x435;&#x43D;&#x442;&#x430;&#x446;&#x438;&#x44F;</a></li>\\n  <li><a href=\\\"#&#x428;&#x438;&#x444;&#x440;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x435;\\\">&#x428;&#x438;&#x444;&#x440;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x435;</a></li>\\n</ol>\\n<h3><a name=\\\"&#x41E;&#x43F;&#x440;&#x435;&#x434;&#x435;&#x43B;&#x435;&#x43D;&#x438;&#x44F;\\\">&#x41E;&#x43F;&#x440;&#x435;&#x434;&#x435;&#x43B;&#x435;&#x43D;&#x438;&#x44F;</a></h3>\\n<p>Сначала дадим некоторые определения и понятия, которые я буду использовать далее:</p>\\n<ul>\\n<li>Ресурс (Resource) - Экземпляр одиночного объекта. Например: товар</li>\\n<li>Коллекция (Collection) - Коллекция однотипных объектов. Например: товар</li>\\n<li>Схема (Schema) - Описание модели объекта или коллекции объектов. Например: для товара схема описывает название, цену,\\nтип, количество на складе, список свойств товара и т.д.</li>\\n<li>Конечный адрес (Endpoint) - URL который представляет ресурс или коллекцию</li>\\n</ul>\\n<h3><a name=\\\"&#x41F;&#x440;&#x43E;&#x435;&#x43A;&#x442;&#x438;&#x440;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x435; &#x441;&#x445;&#x435;&#x43C;&#x44B;\\\">&#x41F;&#x440;&#x43E;&#x435;&#x43A;&#x442;&#x438;&#x440;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x435; &#x441;&#x445;&#x435;&#x43C;&#x44B;</a></h3>\\n<p>На самом деле, проектирование Rest API начинается гораздо раньше чем вы можете подумать.\\nПроектирование начинается со схемы ресурсов и коллекций и их связей. Например вы проектируете социальную сеть Switter.\\nБазовые сущности социальной сети - это профили пользователей <code>Profile</code>.\\nМежду профилями существуют связи в виде дружбы типа многие ко многим и разрешается она через вспомогательную схему <code>Friends</code>.\\nВнутри социальной сети можно обмениваться сообщениями <code>Message</code>.\\nСообщение имеет отправителя и один или несколько адресатов.\\nВсе участники беседы <code>Profiles</code> объединяются в <code>MessageGroups</code> через <code>ProfilesMessageGroups</code>,\\nи каждое сообщение <code>Messages</code> имеет свою <code>MessageGroups</code>. Визуально это выглядит так:</p>\\n<div class=\\\"presentation\\\">\\n  \\n  <a class=\\\"gatsby-resp-image-link\\\" href=\\\"/static/9bc7c46bbf25b62e8033538c4560291a-3f470.png\\\" style=\\\"display: block\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">\\n  \\n  <span class=\\\"gatsby-resp-image-wrapper\\\" style=\\\"position: relative; display: block; z-index: 1; max-width: 601px; margin-left: auto; margin-right: auto;\\\">\\n    <span class=\\\"gatsby-resp-image-background-image\\\" style=\\\"padding-bottom: 88.85191347753744%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsSAAALEgHS3X78AAAB60lEQVQ4y5WT64vTQBTF+/9/FEQQBREREVlZ8IVCxbXuupvtkjSbx8QkTF6TTl5tmqRt0ke8zaypQiLsYVpKM785d869GdR1vd3uxr/oGa9xun+DI82L6i7pJD05E14Puc8CrjZb+GcAn7Kqrm6VcwHdYorIHNN5J5zEM1m3RM1E2Kuq6g7ebDazNJ1Op2EY0kZ5ni8bFUXR/ogp9X0ftmVZBsgdDMcgTZtMJqIo8jwvy3ILr1YrZrvf7z1C4CnHcbCtLMsjLEkSxjhoBP5tqeDQOjuOo+s62MLRx7J3u70VpAr24RvZNJjnTRDbYl2xVTbxWIReiehGNSXTO5bNBMcfmKYe0Ei0n338+fTd6OTS+KE4nRH2wsksME1zvV6z4u8HZ4uF67qQ/D1giBd4iMS2LEVREEKqqkKWEFj5R2xnB9xK0zRogd0ISvj7UVtdLxzHMBSUTU7b7V4YGviPM3YveGUs69Abw/G7YQknr4bj5x++Pzn9+uLT+csvl9c6qf8ruD8M3AGOolg1LGTaSb5ia5YVfdi1Rh+djh68GT58++3x+4tB6BMIRhAEmFhoLFzSsiy4wrJLSexDeGw2D86wFd4Elg0TjHefMyGEvT/QP7AcuNOQV3TFsGGZXhCmy2TRW3Y0zw0St+s34fP3nEuR8kQAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;\\\">\\n      <img class=\\\"gatsby-resp-image-image\\\" style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\" alt=\\\"schema\\\" title=\\\"\\\" src=\\\"/static/9bc7c46bbf25b62e8033538c4560291a-3f470.png\\\" srcset=\\\"/static/9bc7c46bbf25b62e8033538c4560291a-2efde.png 245w,\\n/static/9bc7c46bbf25b62e8033538c4560291a-821bc.png 490w,\\n/static/9bc7c46bbf25b62e8033538c4560291a-3f470.png 601w\\\" sizes=\\\"(max-width: 601px) 100vw, 601px\\\">\\n    </span>\\n  </span>\\n  \\n  </a>\\n    \\n</div>\\n<p><a href=\\\"/a5400ffd621c3c5c781102159c7a0b12.mwb\\\">Скачать проект MySQL Workbench</a></p>\\n<p>Из схемы видно, что два профиля дружат, если в <code>Friend</code> существует запись в обе стороны с подтверждением.\\nАналогично легко получить список переписок и всех участников каждой переписки и их сообщения.</p>\\n<p>Таким образом, перед проектирование Rest API необходимо определить схемы всех сущностей вашего приложения.</p>\\n<h3><a name=\\\"&#x41A;&#x43E;&#x43D;&#x435;&#x447;&#x43D;&#x44B;&#x435; &#x430;&#x434;&#x440;&#x435;&#x441;&#x430;\\\">&#x41A;&#x43E;&#x43D;&#x435;&#x447;&#x43D;&#x44B;&#x435; &#x430;&#x434;&#x440;&#x435;&#x441;&#x430;</a></h3>\\n<p>Есть несколько общепринятых правил составления конечных адресов.</p>\\n<h4><a name=\\\"&#x41D;&#x438;&#x43A;&#x430;&#x43A;&#x438;&#x445; &#x433;&#x43B;&#x430;&#x433;&#x43E;&#x43B;&#x43E;&#x432; &#x432; &#x43A;&#x43E;&#x43D;&#x435;&#x447;&#x43D;&#x44B;&#x445; &#x430;&#x434;&#x440;&#x435;&#x441;&#x430;&#x445;\\\">1. &#x41D;&#x438;&#x43A;&#x430;&#x43A;&#x438;&#x445; &#x433;&#x43B;&#x430;&#x433;&#x43E;&#x43B;&#x43E;&#x432; &#x432; &#x43A;&#x43E;&#x43D;&#x435;&#x447;&#x43D;&#x44B;&#x445; &#x430;&#x434;&#x440;&#x435;&#x441;&#x430;&#x445;</a></h4>\\n<p>Все возможные действия в Rest API выполняются с помощью HTTP методов:</p>\\n<ul>\\n<li>GET - получить</li>\\n<li>POST - создать</li>\\n<li>PUT - заменить</li>\\n<li>PATCH - частично изменить</li>\\n<li>DELETE - удалить</li>\\n</ul>\\n<p>Отсюда видно, что никаких изменений данных при GET запросе не должно происходить.</p>\\n<h4><a name=\\\"&#x422;&#x43E;&#x43B;&#x44C;&#x43A;&#x43E; &#x441;&#x443;&#x449;&#x435;&#x441;&#x442;&#x432;&#x438;&#x442;&#x435;&#x43B;&#x44C;&#x43D;&#x44B;&#x435; &#x432;&#x43E; &#x43C;&#x43D;&#x43E;&#x436;&#x435;&#x441;&#x442;&#x432;&#x435;&#x43D;&#x43D;&#x43E;&#x43C; &#x447;&#x438;&#x441;&#x43B;&#x435;\\\">2. &#x422;&#x43E;&#x43B;&#x44C;&#x43A;&#x43E; &#x441;&#x443;&#x449;&#x435;&#x441;&#x442;&#x432;&#x438;&#x442;&#x435;&#x43B;&#x44C;&#x43D;&#x44B;&#x435; &#x432;&#x43E; &#x43C;&#x43D;&#x43E;&#x436;&#x435;&#x441;&#x442;&#x432;&#x435;&#x43D;&#x43D;&#x43E;&#x43C; &#x447;&#x438;&#x441;&#x43B;&#x435;</a></h4>\\n<p>Не стоит смешивать единственное и множественное число ресурсов, это нарушает семантическое значение и может ввести в заблуждение.\\nИспользуйте всегда множественное. Например у вас есть ресурс <code>users</code>,\\nзайдя на него по конечному адресу <code>/api/v1/users</code> вы получите список пользователей, естественно ограниченный фильтрами по умолчанию,\\nкак если бы вы зашли по адресу <code>/api/v1/users?offset=0&#x26;limit=50</code>.\\nНо перейдя на адрес <code>/api/v1/users/1</code> мы как бы говорим: “получить объект с id=1 из ресурса пользователи”</p>\\n<h4><a name=\\\"&#x418;&#x441;&#x43F;&#x43E;&#x43B;&#x44C;&#x437;&#x443;&#x439;&#x442;&#x435; &#x43F;&#x43E;&#x434;&#x437;&#x430;&#x43F;&#x440;&#x43E;&#x441;&#x44B; &#x432; &#x440;&#x435;&#x441;&#x443;&#x440;&#x441;&#x430;&#x445; &#x441; &#x43E;&#x442;&#x43D;&#x43E;&#x448;&#x435;&#x43D;&#x438;&#x44F;&#x43C;&#x438;\\\">3. &#x418;&#x441;&#x43F;&#x43E;&#x43B;&#x44C;&#x437;&#x443;&#x439;&#x442;&#x435; &#x43F;&#x43E;&#x434;&#x437;&#x430;&#x43F;&#x440;&#x43E;&#x441;&#x44B; &#x432; &#x440;&#x435;&#x441;&#x443;&#x440;&#x441;&#x430;&#x445; &#x441; &#x43E;&#x442;&#x43D;&#x43E;&#x448;&#x435;&#x43D;&#x438;&#x44F;&#x43C;&#x438;</a></h4>\\n<p>Если мы хотим получить друзей пользователя под номером 1, то адрес будет следующим <code>/api/v1/users/1/friends</code>.\\nЭтот подход позволяет избежать дополнительных запросов на сервер.</p>\\n<h4><a name=\\\"&#x418;&#x441;&#x43F;&#x43E;&#x43B;&#x44C;&#x437;&#x443;&#x439;&#x442;&#x435; HTTP &#x437;&#x430;&#x433;&#x43E;&#x43B;&#x43E;&#x432;&#x43A;&#x438; &#x434;&#x43B;&#x44F; &#x441;&#x43E;&#x43E;&#x431;&#x449;&#x435;&#x43D;&#x438;&#x44F; &#x43E;&#x431; &#x43E;&#x436;&#x438;&#x434;&#x435;&#x43C;&#x43E;&#x43C; &#x444;&#x43E;&#x440;&#x43C;&#x430;&#x442;&#x435; &#x43E;&#x442;&#x432;&#x435;&#x442;&#x430;\\\">4. &#x418;&#x441;&#x43F;&#x43E;&#x43B;&#x44C;&#x437;&#x443;&#x439;&#x442;&#x435; HTTP &#x437;&#x430;&#x433;&#x43E;&#x43B;&#x43E;&#x432;&#x43A;&#x438; &#x434;&#x43B;&#x44F; &#x441;&#x43E;&#x43E;&#x431;&#x449;&#x435;&#x43D;&#x438;&#x44F; &#x43E;&#x431; &#x43E;&#x436;&#x438;&#x434;&#x435;&#x43C;&#x43E;&#x43C; &#x444;&#x43E;&#x440;&#x43C;&#x430;&#x442;&#x435; &#x43E;&#x442;&#x432;&#x435;&#x442;&#x430;</a></h4>\\n<p>И клиент и сервер должны знать в каком формате общаться и этот формат должен быть предоставлен в HTTP заголовке.</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-text\\\"><code>Content-Type - &#x444;&#x43E;&#x440;&#x43C;&#x430;&#x442; &#x437;&#x430;&#x43F;&#x440;&#x43E;&#x441;&#x430;\\nAccept - &#x441;&#x43F;&#x438;&#x441;&#x43E;&#x43A; &#x43F;&#x43E;&#x434;&#x434;&#x435;&#x440;&#x436;&#x438;&#x432;&#x430;&#x435;&#x43C;&#x44B;&#x445; &#x444;&#x43E;&#x440;&#x43C;&#x430;&#x442;&#x43E;&#x432; &#x434;&#x43B;&#x44F; &#x43E;&#x442;&#x432;&#x435;&#x442;&#x430;</code></pre>\\n      </div>\\n<p>Постарайтесь избежать использование формата в URL</p>\\n<h4><a name=\\\"&#x418;&#x441;&#x43F;&#x43E;&#x43B;&#x44C;&#x437;&#x443;&#x439;&#x442;&#x435; HATEOAS\\\">5. &#x418;&#x441;&#x43F;&#x43E;&#x43B;&#x44C;&#x437;&#x443;&#x439;&#x442;&#x435; HATEOAS</a></h4>\\n<p>HATEOAS - это Hypermedia as the Engine of Application State,\\nчто по сути это метаинформация о структуре вашего сервиса, которая может быть использована для автоматического исследования (service autodiscover).\\nЧто дает возможность некоторым приложениям без человеческого вмешательства исследовать ваш сервис.\\nНапример имеем ответ от сервера с адреса <code>/api/v1/users/1</code>:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-json\\\"><code><span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token property\\\">&quot;firstName&quot;</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">&quot;Ivan&quot;</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token property\\\">&quot;lastName&quot;</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">&quot;Ivanov&quot;</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token property\\\">&quot;autodiscover&quot;</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token property\\\">&quot;friends&quot;</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">&quot;`/api/v1/users/1/friends&quot;</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token property\\\">&quot;photos&quot;</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">&quot;`/api/v1/users/1/photos&quot;</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token property\\\">&quot;messages&quot;</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">&quot;`/api/v1/users/1/messages&quot;</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n</code></pre>\\n      </div>\\n<p>в секции <code>autodiscover</code> мы видим список ресурсов, которые относятся к текущему.</p>\\n<h4><a name=\\\"&#x41F;&#x440;&#x435;&#x434;&#x43E;&#x441;&#x442;&#x430;&#x432;&#x44C;&#x442;&#x435; &#x432;&#x43E;&#x437;&#x43C;&#x43E;&#x436;&#x43D;&#x43E;&#x441;&#x442;&#x438; &#x444;&#x438;&#x43B;&#x44C;&#x442;&#x440;&#x430;&#x446;&#x438;&#x438;, &#x441;&#x43E;&#x440;&#x442;&#x438;&#x440;&#x43E;&#x432;&#x43A;&#x438;, &#x432;&#x44B;&#x431;&#x43E;&#x440;&#x430; &#x43F;&#x43E;&#x43B;&#x435;&#x439;, &#x43E;&#x433;&#x440;&#x430;&#x43D;&#x438;&#x447;&#x435;&#x43D;&#x438;&#x44F; &#x438; &#x441;&#x43C;&#x435;&#x449;&#x435;&#x43D;&#x438;&#x44F; &#x437;&#x430;&#x43F;&#x438;&#x441;&#x435;&#x439; &#x434;&#x43B;&#x44F; &#x43A;&#x43E;&#x43B;&#x435;&#x43A;&#x446;&#x438;&#x439;\\\">6. &#x41F;&#x440;&#x435;&#x434;&#x43E;&#x441;&#x442;&#x430;&#x432;&#x44C;&#x442;&#x435; &#x432;&#x43E;&#x437;&#x43C;&#x43E;&#x436;&#x43D;&#x43E;&#x441;&#x442;&#x438; &#x444;&#x438;&#x43B;&#x44C;&#x442;&#x440;&#x430;&#x446;&#x438;&#x438;, &#x441;&#x43E;&#x440;&#x442;&#x438;&#x440;&#x43E;&#x432;&#x43A;&#x438;, &#x432;&#x44B;&#x431;&#x43E;&#x440;&#x430; &#x43F;&#x43E;&#x43B;&#x435;&#x439;, &#x43E;&#x433;&#x440;&#x430;&#x43D;&#x438;&#x447;&#x435;&#x43D;&#x438;&#x44F; &#x438; &#x441;&#x43C;&#x435;&#x449;&#x435;&#x43D;&#x438;&#x44F; &#x437;&#x430;&#x43F;&#x438;&#x441;&#x435;&#x439; &#x434;&#x43B;&#x44F; &#x43A;&#x43E;&#x43B;&#x435;&#x43A;&#x446;&#x438;&#x439;</a></h4>\\n<p>Для таких целей, лучше поддерживать какой-нибудь язык запросов, позволяющий расширить стандартный, например graphql.\\nЯ же приведу примеры на псевдоязыке:</p>\\n<ul>\\n<li>Фильтрация - Поддерживайте фильтрацию с выражениями <code>/api/v1/users?filter=(firstName='Ivan',lastName=/^Ivan/,age>=18)</code></li>\\n<li>Сортировка - Поддерживайте сортировку по возрастанию и убыванию для нескольких полей <code>/api/v1/users?sort=(firstName:1,DOB:0)</code></li>\\n<li>Выбор полей - Поддерживайте выбор полей, это не только уменьшит трафик, но и позволит быстрее работать клиенту, обрабатывая меньшее количество данных\\n<code>/api/v1/users?fields=[firstName, lastName, DOB]</code></li>\\n<li>Ограничение и смещение - Поддерживайте параметры limit и offset, для контроля количества отдаваемых сущностей,\\nтак же это более гибкий подход, чем постраничный <code>/api/v1/users?offset=20&#x26;limit=10</code></li>\\n</ul>\\n<h4><a name=\\\"&#x41F;&#x43E;&#x434;&#x434;&#x435;&#x440;&#x436;&#x438;&#x432;&#x430;&#x439;&#x442;&#x435; &#x432;&#x435;&#x440;&#x441;&#x438;&#x43E;&#x43D;&#x43D;&#x43E;&#x441;&#x442;&#x44C; API\\\">7. &#x41F;&#x43E;&#x434;&#x434;&#x435;&#x440;&#x436;&#x438;&#x432;&#x430;&#x439;&#x442;&#x435; &#x432;&#x435;&#x440;&#x441;&#x438;&#x43E;&#x43D;&#x43D;&#x43E;&#x441;&#x442;&#x44C; API</a></h4>\\n<p>Время от времени, стандарты и интерфейсы вашего API могут меняться и что бы избежать путаницы используйте версионность.\\nИзбегайте API без версий или API с дробными значениями <code>/api/v100500/users</code></p>\\n<h4><a name=\\\"&#x41E;&#x431;&#x440;&#x430;&#x431;&#x430;&#x442;&#x44B;&#x432;&#x430;&#x439;&#x442;&#x435; &#x43E;&#x448;&#x438;&#x431;&#x43A;&#x438; &#x43F;&#x43E; HTTP &#x43A;&#x43E;&#x434;&#x430;&#x43C;\\\">8. &#x41E;&#x431;&#x440;&#x430;&#x431;&#x430;&#x442;&#x44B;&#x432;&#x430;&#x439;&#x442;&#x435; &#x43E;&#x448;&#x438;&#x431;&#x43A;&#x438; &#x43F;&#x43E; HTTP &#x43A;&#x43E;&#x434;&#x430;&#x43C;</a></h4>\\n<p>Протокол HTTP поддерживает огромное количество <a href=\\\"https://ru.wikipedia.org/wiki/%D0%A1%D0%BF%D0%B8%D1%81%D0%BE%D0%BA_%D0%BA%D0%BE%D0%B4%D0%BE%D0%B2_%D1%81%D0%BE%D1%81%D1%82%D0%BE%D1%8F%D0%BD%D0%B8%D1%8F_HTTP\\\">кодов состояний</a>\\nНе обязательно использовать их все, достаточно этих 13:</p>\\n<ul>\\n<li>200 – OK – ответ отправлен успешно, обычно ответ на: GET</li>\\n<li>201 – Created – создание успешно завершено, обычно ответ на: POST, PUT</li>\\n<li>204 – Accepted – удаление или редактирование успешно завершено, обыно ответ на: PATCH, DELETE</li>\\n<li>205 – Reset Content – после выполнения операции необходимо обновить данные</li>\\n<li>304 – Not Modified – ничего не изменилось, можно взять данные из кэша приложения</li>\\n<li>400 – Bad Request – неправильный запрос, подробности обыно предоставляют в теле ответа</li>\\n<li>401 – Unauthorized – пользователь не авторизован</li>\\n<li>402 – Payment Required – пользователю необходимо произвести оплату для продолжения</li>\\n<li>403 – Forbidden – пользователь авторизован, но не имеет привиллегий для выполнения операции</li>\\n<li>404 – Not found – ресурс не найден</li>\\n<li>415 – Unsupported Media Type – например, если пользователь загружает текстовый файл вместо ожидаемой картинки</li>\\n<li>500 – Internal Server Error – этот код лучше не использовать, но записывать в логи все данные об ошибке</li>\\n<li>501 – Not implemented – используется для сообщения, что данная операция не реализована на сервере, например если ваше приложение в стадии активной разработки</li>\\n</ul>\\n<p>При ответе об ошибки помещайте дополнительную информацию в тело запроса (payload - полезная нагрузка)</p>\\n<h4><a name=\\\"&#x41F;&#x43E;&#x434;&#x434;&#x435;&#x440;&#x436;&#x438;&#x432;&#x430;&#x439;&#x442;&#x435; &#x43F;&#x435;&#x440;&#x435;&#x43E;&#x43F;&#x440;&#x435;&#x434;&#x435;&#x43B;&#x435;&#x43D;&#x438;&#x435; HTTP &#x43C;&#x435;&#x442;&#x43E;&#x434;&#x43E;&#x432;\\\">9. &#x41F;&#x43E;&#x434;&#x434;&#x435;&#x440;&#x436;&#x438;&#x432;&#x430;&#x439;&#x442;&#x435; &#x43F;&#x435;&#x440;&#x435;&#x43E;&#x43F;&#x440;&#x435;&#x434;&#x435;&#x43B;&#x435;&#x43D;&#x438;&#x435; HTTP &#x43C;&#x435;&#x442;&#x43E;&#x434;&#x43E;&#x432;</a></h4>\\n<p>Достаточно редкий случай, но некоторые прокси серверы поддерживают только GET и POST запросы.\\nВ таком случае можно реализовать служебный заголовок <code>X-HTTP-Method-Override</code>, для замены POST метода на метод указанный в нем.</p>\\n<h3><a name=\\\"&#x414;&#x43E;&#x43A;&#x443;&#x43C;&#x435;&#x43D;&#x442;&#x430;&#x446;&#x438;&#x44F;\\\">4. &#x414;&#x43E;&#x43A;&#x443;&#x43C;&#x435;&#x43D;&#x442;&#x430;&#x446;&#x438;&#x44F;</a></h3>\\n<p>Какой бы user-friendly не был ваш API он обязательно должен быть документирован, от схем до значений HTTP кодов.\\nСуществуют множество способов документирования API, наиболее популярный и на мой взляд понятный - это <a href=\\\"http://swagger.io\\\">swagger</a>,\\nко всему у них можно найти спецификацию Rest API (стандарт, которому они следуют).</p>\\n<h3><a name=\\\"&#x428;&#x438;&#x444;&#x440;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x435;\\\">5. &#x428;&#x438;&#x444;&#x440;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x435;</a></h3>\\n<p>Старайтесь использовать SSL шифрование. Сертификаты легко и бесплатно можно получить на <a href=\\\"https://www.startssl.com/\\\">StartSLL</a> или <a href=\\\"https://letsencrypt.org/\\\">LetsEncrypt</a>.</p>\",\"color\":\"rgba(37, 127, 110, 0.8)\",\"title\":\"Проектирование Rest API\",\"description\":\"Как спроектировать Rest API для мобильного приложения или SPA\",\"category\":\"кодинг\",\"tags\":[\"rest\",\"api\"],\"date\":\"2016-12-11T00:00:00.000Z\",\"type\":null}],\"total\":1,\"page\":1}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/json-loader!./.cache/json/tags-api.json\n// module id = 412\n// module chunks = 155610972471906"],"sourceRoot":""}