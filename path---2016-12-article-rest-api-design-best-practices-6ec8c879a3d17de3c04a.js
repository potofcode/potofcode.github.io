webpackJsonp([0xb6eb4b9a6d83],{400:function(n,s){n.exports={pathContext:{post:{images:{blurUp:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAAA/ElEQVQoz62QvWvCUBTF/atLuxaHIhShgzgoDlKH6uDQTVwEXQxVa2tUEjVGkxg/UqMmxpic3jxQkWziWd7h8t7vnvMiuLMiJ3P0PYjb5U2Q/mYRBpZ0AcOdQWAfD/URXttTrPYunjgJ0aaMjrHD26+CwnCBl9YEjzT/HK/Y29SICwOLSgfGwWL+uSEj9j2FZjnMVzWTgBbiPwoq6ho+LU33ZuwM9DFpY+s618CyLkK1TeaTXQ1JXsPB85DuzyCYNrj5Bn+OiwSvsjsB8KSc3DrDz0De1FFbjlnlPNXiKZGwtvEu6MiJc0pwRJZ8kHRAC4rS5b8z0le48r30D7DuFKOmFdvEAAAAAElFTkSuQmCC"},share:{src:"/static/0211be6ff0f879d0d8481d9480297691-f5537.jpg"},heroPreviewLG:{src:"/static/0211be6ff0f879d0d8481d9480297691-294b1.webp"},heroPreviewMD:{src:"/static/0211be6ff0f879d0d8481d9480297691-d8cc9.webp"},heroPreviewSM:{src:"/static/0211be6ff0f879d0d8481d9480297691-c14dc.webp"},heroPreviewXS:{src:"/static/0211be6ff0f879d0d8481d9480297691-227ee.webp"},mediumPreview:{src:"/static/0211be6ff0f879d0d8481d9480297691-ce211.webp"},smallPreview:{src:"/static/0211be6ff0f879d0d8481d9480297691-051c1.webp"}},excerpt:"Ave $USER! Спроектировать Rest API для мобильного приложения, SPA( Single Page Application ) или просто как отдельного сервиса…",id:"/Users/ivan/projects/gatsby-blog/src/pages/2016/12/article-rest-api-design-best-practices/index.md absPath of file >>> MarkdownRemark",slug:"/2016/12/article-rest-api-design-best-practices",permalink:"https://potofcode.com/2016/12/article-rest-api-design-best-practices/",html:'<p>Ave $USER!</p>\n<p>Спроектировать Rest API для мобильного приложения, SPA( Single Page Application ) или просто как отдельного сервиса не так уж и просто.\nС учетом моделей данных и особенностей архитектуры стэка, на котором он будет запущен этот процесс становится еще сложнее.\nА если еще добавить аутентификацию пользователя, через авторизацию на стороннем сервисе, то процесс проектирования может очень сильно затянуться.\nЧто бы не потеряться во всем этом, я составил небольшой список лучших практик проектирования Rest API с подробными объяснениями.</p>\n<h2>Содержание:</h2>\n<ol class="contents">\n  <li><a href="#&#x41E;&#x43F;&#x440;&#x435;&#x434;&#x435;&#x43B;&#x435;&#x43D;&#x438;&#x44F;">&#x41E;&#x43F;&#x440;&#x435;&#x434;&#x435;&#x43B;&#x435;&#x43D;&#x438;&#x44F;</a></li>\n  <li><a href="#&#x41F;&#x440;&#x43E;&#x435;&#x43A;&#x442;&#x438;&#x440;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x435; &#x441;&#x445;&#x435;&#x43C;&#x44B;">&#x41F;&#x440;&#x43E;&#x435;&#x43A;&#x442;&#x438;&#x440;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x435; &#x441;&#x445;&#x435;&#x43C;&#x44B;</a></li>\n  <li><a href="#&#x41A;&#x43E;&#x43D;&#x435;&#x447;&#x43D;&#x44B;&#x435; &#x430;&#x434;&#x440;&#x435;&#x441;&#x430;">&#x41A;&#x43E;&#x43D;&#x435;&#x447;&#x43D;&#x44B;&#x435; &#x430;&#x434;&#x440;&#x435;&#x441;&#x430;</a></li>\n  <li><a href="#&#x414;&#x43E;&#x43A;&#x443;&#x43C;&#x435;&#x43D;&#x442;&#x430;&#x446;&#x438;&#x44F;">&#x414;&#x43E;&#x43A;&#x443;&#x43C;&#x435;&#x43D;&#x442;&#x430;&#x446;&#x438;&#x44F;</a></li>\n  <li><a href="#&#x428;&#x438;&#x444;&#x440;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x435;">&#x428;&#x438;&#x444;&#x440;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x435;</a></li>\n</ol>\n<h3><a name="&#x41E;&#x43F;&#x440;&#x435;&#x434;&#x435;&#x43B;&#x435;&#x43D;&#x438;&#x44F;">&#x41E;&#x43F;&#x440;&#x435;&#x434;&#x435;&#x43B;&#x435;&#x43D;&#x438;&#x44F;</a></h3>\n<p>Сначала дадим некоторые определения и понятия, которые я буду использовать далее:</p>\n<ul>\n<li>Ресурс (Resource) - Экземпляр одиночного объекта. Например: товар</li>\n<li>Коллекция (Collection) - Коллекция однотипных объектов. Например: товар</li>\n<li>Схема (Schema) - Описание модели объекта или коллекции объектов. Например: для товара схема описывает название, цену,\nтип, количество на складе, список свойств товара и т.д.</li>\n<li>Конечный адрес (Endpoint) - URL который представляет ресурс или коллекцию</li>\n</ul>\n<h3><a name="&#x41F;&#x440;&#x43E;&#x435;&#x43A;&#x442;&#x438;&#x440;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x435; &#x441;&#x445;&#x435;&#x43C;&#x44B;">&#x41F;&#x440;&#x43E;&#x435;&#x43A;&#x442;&#x438;&#x440;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x435; &#x441;&#x445;&#x435;&#x43C;&#x44B;</a></h3>\n<p>На самом деле, проектирование Rest API начинается гораздо раньше чем вы можете подумать.\nПроектирование начинается со схемы ресурсов и коллекций и их связей. Например вы проектируете социальную сеть Switter.\nБазовые сущности социальной сети - это профили пользователей <code>Profile</code>.\nМежду профилями существуют связи в виде дружбы типа многие ко многим и разрешается она через вспомогательную схему <code>Friends</code>.\nВнутри социальной сети можно обмениваться сообщениями <code>Message</code>.\nСообщение имеет отправителя и один или несколько адресатов.\nВсе участники беседы <code>Profiles</code> объединяются в <code>MessageGroups</code> через <code>ProfilesMessageGroups</code>,\nи каждое сообщение <code>Messages</code> имеет свою <code>MessageGroups</code>. Визуально это выглядит так:</p>\n<div class="presentation">\n  \n  <a class="gatsby-resp-image-link" href="/static/9bc7c46bbf25b62e8033538c4560291a-3f470.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; z-index: 1; max-width: 601px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 88.85191347753744%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsSAAALEgHS3X78AAAB60lEQVQ4y5WT64vTQBTF+/9/FEQQBREREVlZ8IVCxbXuupvtkjSbx8QkTF6TTl5tmqRt0ke8zaypQiLsYVpKM785d869GdR1vd3uxr/oGa9xun+DI82L6i7pJD05E14Puc8CrjZb+GcAn7Kqrm6VcwHdYorIHNN5J5zEM1m3RM1E2Kuq6g7ebDazNJ1Op2EY0kZ5ni8bFUXR/ogp9X0ftmVZBsgdDMcgTZtMJqIo8jwvy3ILr1YrZrvf7z1C4CnHcbCtLMsjLEkSxjhoBP5tqeDQOjuOo+s62MLRx7J3u70VpAr24RvZNJjnTRDbYl2xVTbxWIReiehGNSXTO5bNBMcfmKYe0Ei0n338+fTd6OTS+KE4nRH2wsksME1zvV6z4u8HZ4uF67qQ/D1giBd4iMS2LEVREEKqqkKWEFj5R2xnB9xK0zRogd0ISvj7UVtdLxzHMBSUTU7b7V4YGviPM3YveGUs69Abw/G7YQknr4bj5x++Pzn9+uLT+csvl9c6qf8ruD8M3AGOolg1LGTaSb5ia5YVfdi1Rh+djh68GT58++3x+4tB6BMIRhAEmFhoLFzSsiy4wrJLSexDeGw2D86wFd4Elg0TjHefMyGEvT/QP7AcuNOQV3TFsGGZXhCmy2TRW3Y0zw0St+s34fP3nEuR8kQAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;" alt="schema" title="" src="/static/9bc7c46bbf25b62e8033538c4560291a-3f470.png" srcset="/static/9bc7c46bbf25b62e8033538c4560291a-2efde.png 245w,\n/static/9bc7c46bbf25b62e8033538c4560291a-821bc.png 490w,\n/static/9bc7c46bbf25b62e8033538c4560291a-3f470.png 601w" sizes="(max-width: 601px) 100vw, 601px">\n    </span>\n  </span>\n  \n  </a>\n    \n</div>\n<p><a href="/a5400ffd621c3c5c781102159c7a0b12.mwb">Скачать проект MySQL Workbench</a></p>\n<p>Из схемы видно, что два профиля дружат, если в <code>Friend</code> существует запись в обе стороны с подтверждением.\nАналогично легко получить список переписок и всех участников каждой переписки и их сообщения.</p>\n<p>Таким образом, перед проектирование Rest API необходимо определить схемы всех сущностей вашего приложения.</p>\n<h3><a name="&#x41A;&#x43E;&#x43D;&#x435;&#x447;&#x43D;&#x44B;&#x435; &#x430;&#x434;&#x440;&#x435;&#x441;&#x430;">&#x41A;&#x43E;&#x43D;&#x435;&#x447;&#x43D;&#x44B;&#x435; &#x430;&#x434;&#x440;&#x435;&#x441;&#x430;</a></h3>\n<p>Есть несколько общепринятых правил составления конечных адресов.</p>\n<h4><a name="&#x41D;&#x438;&#x43A;&#x430;&#x43A;&#x438;&#x445; &#x433;&#x43B;&#x430;&#x433;&#x43E;&#x43B;&#x43E;&#x432; &#x432; &#x43A;&#x43E;&#x43D;&#x435;&#x447;&#x43D;&#x44B;&#x445; &#x430;&#x434;&#x440;&#x435;&#x441;&#x430;&#x445;">1. &#x41D;&#x438;&#x43A;&#x430;&#x43A;&#x438;&#x445; &#x433;&#x43B;&#x430;&#x433;&#x43E;&#x43B;&#x43E;&#x432; &#x432; &#x43A;&#x43E;&#x43D;&#x435;&#x447;&#x43D;&#x44B;&#x445; &#x430;&#x434;&#x440;&#x435;&#x441;&#x430;&#x445;</a></h4>\n<p>Все возможные действия в Rest API выполняются с помощью HTTP методов:</p>\n<ul>\n<li>GET - получить</li>\n<li>POST - создать</li>\n<li>PUT - заменить</li>\n<li>PATCH - частично изменить</li>\n<li>DELETE - удалить</li>\n</ul>\n<p>Отсюда видно, что никаких изменений данных при GET запросе не должно происходить.</p>\n<h4><a name="&#x422;&#x43E;&#x43B;&#x44C;&#x43A;&#x43E; &#x441;&#x443;&#x449;&#x435;&#x441;&#x442;&#x432;&#x438;&#x442;&#x435;&#x43B;&#x44C;&#x43D;&#x44B;&#x435; &#x432;&#x43E; &#x43C;&#x43D;&#x43E;&#x436;&#x435;&#x441;&#x442;&#x432;&#x435;&#x43D;&#x43D;&#x43E;&#x43C; &#x447;&#x438;&#x441;&#x43B;&#x435;">2. &#x422;&#x43E;&#x43B;&#x44C;&#x43A;&#x43E; &#x441;&#x443;&#x449;&#x435;&#x441;&#x442;&#x432;&#x438;&#x442;&#x435;&#x43B;&#x44C;&#x43D;&#x44B;&#x435; &#x432;&#x43E; &#x43C;&#x43D;&#x43E;&#x436;&#x435;&#x441;&#x442;&#x432;&#x435;&#x43D;&#x43D;&#x43E;&#x43C; &#x447;&#x438;&#x441;&#x43B;&#x435;</a></h4>\n<p>Не стоит смешивать единственное и множественное число ресурсов, это нарушает семантическое значение и может ввести в заблуждение.\nИспользуйте всегда множественное. Например у вас есть ресурс <code>users</code>,\nзайдя на него по конечному адресу <code>/api/v1/users</code> вы получите список пользователей, естественно ограниченный фильтрами по умолчанию,\nкак если бы вы зашли по адресу <code>/api/v1/users?offset=0&#x26;limit=50</code>.\nНо перейдя на адрес <code>/api/v1/users/1</code> мы как бы говорим: “получить объект с id=1 из ресурса пользователи”</p>\n<h4><a name="&#x418;&#x441;&#x43F;&#x43E;&#x43B;&#x44C;&#x437;&#x443;&#x439;&#x442;&#x435; &#x43F;&#x43E;&#x434;&#x437;&#x430;&#x43F;&#x440;&#x43E;&#x441;&#x44B; &#x432; &#x440;&#x435;&#x441;&#x443;&#x440;&#x441;&#x430;&#x445; &#x441; &#x43E;&#x442;&#x43D;&#x43E;&#x448;&#x435;&#x43D;&#x438;&#x44F;&#x43C;&#x438;">3. &#x418;&#x441;&#x43F;&#x43E;&#x43B;&#x44C;&#x437;&#x443;&#x439;&#x442;&#x435; &#x43F;&#x43E;&#x434;&#x437;&#x430;&#x43F;&#x440;&#x43E;&#x441;&#x44B; &#x432; &#x440;&#x435;&#x441;&#x443;&#x440;&#x441;&#x430;&#x445; &#x441; &#x43E;&#x442;&#x43D;&#x43E;&#x448;&#x435;&#x43D;&#x438;&#x44F;&#x43C;&#x438;</a></h4>\n<p>Если мы хотим получить друзей пользователя под номером 1, то адрес будет следующим <code>/api/v1/users/1/friends</code>.\nЭтот подход позволяет избежать дополнительных запросов на сервер.</p>\n<h4><a name="&#x418;&#x441;&#x43F;&#x43E;&#x43B;&#x44C;&#x437;&#x443;&#x439;&#x442;&#x435; HTTP &#x437;&#x430;&#x433;&#x43E;&#x43B;&#x43E;&#x432;&#x43A;&#x438; &#x434;&#x43B;&#x44F; &#x441;&#x43E;&#x43E;&#x431;&#x449;&#x435;&#x43D;&#x438;&#x44F; &#x43E;&#x431; &#x43E;&#x436;&#x438;&#x434;&#x435;&#x43C;&#x43E;&#x43C; &#x444;&#x43E;&#x440;&#x43C;&#x430;&#x442;&#x435; &#x43E;&#x442;&#x432;&#x435;&#x442;&#x430;">4. &#x418;&#x441;&#x43F;&#x43E;&#x43B;&#x44C;&#x437;&#x443;&#x439;&#x442;&#x435; HTTP &#x437;&#x430;&#x433;&#x43E;&#x43B;&#x43E;&#x432;&#x43A;&#x438; &#x434;&#x43B;&#x44F; &#x441;&#x43E;&#x43E;&#x431;&#x449;&#x435;&#x43D;&#x438;&#x44F; &#x43E;&#x431; &#x43E;&#x436;&#x438;&#x434;&#x435;&#x43C;&#x43E;&#x43C; &#x444;&#x43E;&#x440;&#x43C;&#x430;&#x442;&#x435; &#x43E;&#x442;&#x432;&#x435;&#x442;&#x430;</a></h4>\n<p>И клиент и сервер должны знать в каком формате общаться и этот формат должен быть предоставлен в HTTP заголовке.</p>\n<div class="gatsby-highlight">\n      <pre class="language-text"><code>Content-Type - &#x444;&#x43E;&#x440;&#x43C;&#x430;&#x442; &#x437;&#x430;&#x43F;&#x440;&#x43E;&#x441;&#x430;\nAccept - &#x441;&#x43F;&#x438;&#x441;&#x43E;&#x43A; &#x43F;&#x43E;&#x434;&#x434;&#x435;&#x440;&#x436;&#x438;&#x432;&#x430;&#x435;&#x43C;&#x44B;&#x445; &#x444;&#x43E;&#x440;&#x43C;&#x430;&#x442;&#x43E;&#x432; &#x434;&#x43B;&#x44F; &#x43E;&#x442;&#x432;&#x435;&#x442;&#x430;</code></pre>\n      </div>\n<p>Постарайтесь избежать использование формата в URL</p>\n<h4><a name="&#x418;&#x441;&#x43F;&#x43E;&#x43B;&#x44C;&#x437;&#x443;&#x439;&#x442;&#x435; HATEOAS">5. &#x418;&#x441;&#x43F;&#x43E;&#x43B;&#x44C;&#x437;&#x443;&#x439;&#x442;&#x435; HATEOAS</a></h4>\n<p>HATEOAS - это Hypermedia as the Engine of Application State,\nчто по сути это метаинформация о структуре вашего сервиса, которая может быть использована для автоматического исследования (service autodiscover).\nЧто дает возможность некоторым приложениям без человеческого вмешательства исследовать ваш сервис.\nНапример имеем ответ от сервера с адреса <code>/api/v1/users/1</code>:</p>\n<div class="gatsby-highlight">\n      <pre class="language-json"><code><span class="token punctuation">{</span>\n    <span class="token property">&quot;firstName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Ivan&quot;</span><span class="token punctuation">,</span>\n    <span class="token property">&quot;lastName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Ivanov&quot;</span><span class="token punctuation">,</span>\n    <span class="token property">&quot;autodiscover&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n        <span class="token property">&quot;friends&quot;</span><span class="token operator">:</span> <span class="token string">&quot;`/api/v1/users/1/friends&quot;</span><span class="token punctuation">,</span>\n        <span class="token property">&quot;photos&quot;</span><span class="token operator">:</span> <span class="token string">&quot;`/api/v1/users/1/photos&quot;</span><span class="token punctuation">,</span>\n        <span class="token property">&quot;messages&quot;</span><span class="token operator">:</span> <span class="token string">&quot;`/api/v1/users/1/messages&quot;</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre>\n      </div>\n<p>в секции <code>autodiscover</code> мы видим список ресурсов, которые относятся к текущему.</p>\n<h4><a name="&#x41F;&#x440;&#x435;&#x434;&#x43E;&#x441;&#x442;&#x430;&#x432;&#x44C;&#x442;&#x435; &#x432;&#x43E;&#x437;&#x43C;&#x43E;&#x436;&#x43D;&#x43E;&#x441;&#x442;&#x438; &#x444;&#x438;&#x43B;&#x44C;&#x442;&#x440;&#x430;&#x446;&#x438;&#x438;, &#x441;&#x43E;&#x440;&#x442;&#x438;&#x440;&#x43E;&#x432;&#x43A;&#x438;, &#x432;&#x44B;&#x431;&#x43E;&#x440;&#x430; &#x43F;&#x43E;&#x43B;&#x435;&#x439;, &#x43E;&#x433;&#x440;&#x430;&#x43D;&#x438;&#x447;&#x435;&#x43D;&#x438;&#x44F; &#x438; &#x441;&#x43C;&#x435;&#x449;&#x435;&#x43D;&#x438;&#x44F; &#x437;&#x430;&#x43F;&#x438;&#x441;&#x435;&#x439; &#x434;&#x43B;&#x44F; &#x43A;&#x43E;&#x43B;&#x435;&#x43A;&#x446;&#x438;&#x439;">6. &#x41F;&#x440;&#x435;&#x434;&#x43E;&#x441;&#x442;&#x430;&#x432;&#x44C;&#x442;&#x435; &#x432;&#x43E;&#x437;&#x43C;&#x43E;&#x436;&#x43D;&#x43E;&#x441;&#x442;&#x438; &#x444;&#x438;&#x43B;&#x44C;&#x442;&#x440;&#x430;&#x446;&#x438;&#x438;, &#x441;&#x43E;&#x440;&#x442;&#x438;&#x440;&#x43E;&#x432;&#x43A;&#x438;, &#x432;&#x44B;&#x431;&#x43E;&#x440;&#x430; &#x43F;&#x43E;&#x43B;&#x435;&#x439;, &#x43E;&#x433;&#x440;&#x430;&#x43D;&#x438;&#x447;&#x435;&#x43D;&#x438;&#x44F; &#x438; &#x441;&#x43C;&#x435;&#x449;&#x435;&#x43D;&#x438;&#x44F; &#x437;&#x430;&#x43F;&#x438;&#x441;&#x435;&#x439; &#x434;&#x43B;&#x44F; &#x43A;&#x43E;&#x43B;&#x435;&#x43A;&#x446;&#x438;&#x439;</a></h4>\n<p>Для таких целей, лучше поддерживать какой-нибудь язык запросов, позволяющий расширить стандартный, например graphql.\nЯ же приведу примеры на псевдоязыке:</p>\n<ul>\n<li>Фильтрация - Поддерживайте фильтрацию с выражениями <code>/api/v1/users?filter=(firstName=\'Ivan\',lastName=/^Ivan/,age>=18)</code></li>\n<li>Сортировка - Поддерживайте сортировку по возрастанию и убыванию для нескольких полей <code>/api/v1/users?sort=(firstName:1,DOB:0)</code></li>\n<li>Выбор полей - Поддерживайте выбор полей, это не только уменьшит трафик, но и позволит быстрее работать клиенту, обрабатывая меньшее количество данных\n<code>/api/v1/users?fields=[firstName, lastName, DOB]</code></li>\n<li>Ограничение и смещение - Поддерживайте параметры limit и offset, для контроля количества отдаваемых сущностей,\nтак же это более гибкий подход, чем постраничный <code>/api/v1/users?offset=20&#x26;limit=10</code></li>\n</ul>\n<h4><a name="&#x41F;&#x43E;&#x434;&#x434;&#x435;&#x440;&#x436;&#x438;&#x432;&#x430;&#x439;&#x442;&#x435; &#x432;&#x435;&#x440;&#x441;&#x438;&#x43E;&#x43D;&#x43D;&#x43E;&#x441;&#x442;&#x44C; API">7. &#x41F;&#x43E;&#x434;&#x434;&#x435;&#x440;&#x436;&#x438;&#x432;&#x430;&#x439;&#x442;&#x435; &#x432;&#x435;&#x440;&#x441;&#x438;&#x43E;&#x43D;&#x43D;&#x43E;&#x441;&#x442;&#x44C; API</a></h4>\n<p>Время от времени, стандарты и интерфейсы вашего API могут меняться и что бы избежать путаницы используйте версионность.\nИзбегайте API без версий или API с дробными значениями <code>/api/v100500/users</code></p>\n<h4><a name="&#x41E;&#x431;&#x440;&#x430;&#x431;&#x430;&#x442;&#x44B;&#x432;&#x430;&#x439;&#x442;&#x435; &#x43E;&#x448;&#x438;&#x431;&#x43A;&#x438; &#x43F;&#x43E; HTTP &#x43A;&#x43E;&#x434;&#x430;&#x43C;">8. &#x41E;&#x431;&#x440;&#x430;&#x431;&#x430;&#x442;&#x44B;&#x432;&#x430;&#x439;&#x442;&#x435; &#x43E;&#x448;&#x438;&#x431;&#x43A;&#x438; &#x43F;&#x43E; HTTP &#x43A;&#x43E;&#x434;&#x430;&#x43C;</a></h4>\n<p>Протокол HTTP поддерживает огромное количество <a href="https://ru.wikipedia.org/wiki/%D0%A1%D0%BF%D0%B8%D1%81%D0%BE%D0%BA_%D0%BA%D0%BE%D0%B4%D0%BE%D0%B2_%D1%81%D0%BE%D1%81%D1%82%D0%BE%D1%8F%D0%BD%D0%B8%D1%8F_HTTP">кодов состояний</a>\nНе обязательно использовать их все, достаточно этих 13:</p>\n<ul>\n<li>200 – OK – ответ отправлен успешно, обычно ответ на: GET</li>\n<li>201 – Created – создание успешно завершено, обычно ответ на: POST, PUT</li>\n<li>204 – Accepted – удаление или редактирование успешно завершено, обыно ответ на: PATCH, DELETE</li>\n<li>205 – Reset Content – после выполнения операции необходимо обновить данные</li>\n<li>304 – Not Modified – ничего не изменилось, можно взять данные из кэша приложения</li>\n<li>400 – Bad Request – неправильный запрос, подробности обыно предоставляют в теле ответа</li>\n<li>401 – Unauthorized – пользователь не авторизован</li>\n<li>402 – Payment Required – пользователю необходимо произвести оплату для продолжения</li>\n<li>403 – Forbidden – пользователь авторизован, но не имеет привиллегий для выполнения операции</li>\n<li>404 – Not found – ресурс не найден</li>\n<li>415 – Unsupported Media Type – например, если пользователь загружает текстовый файл вместо ожидаемой картинки</li>\n<li>500 – Internal Server Error – этот код лучше не использовать, но записывать в логи все данные об ошибке</li>\n<li>501 – Not implemented – используется для сообщения, что данная операция не реализована на сервере, например если ваше приложение в стадии активной разработки</li>\n</ul>\n<p>При ответе об ошибки помещайте дополнительную информацию в тело запроса (payload - полезная нагрузка)</p>\n<h4><a name="&#x41F;&#x43E;&#x434;&#x434;&#x435;&#x440;&#x436;&#x438;&#x432;&#x430;&#x439;&#x442;&#x435; &#x43F;&#x435;&#x440;&#x435;&#x43E;&#x43F;&#x440;&#x435;&#x434;&#x435;&#x43B;&#x435;&#x43D;&#x438;&#x435; HTTP &#x43C;&#x435;&#x442;&#x43E;&#x434;&#x43E;&#x432;">9. &#x41F;&#x43E;&#x434;&#x434;&#x435;&#x440;&#x436;&#x438;&#x432;&#x430;&#x439;&#x442;&#x435; &#x43F;&#x435;&#x440;&#x435;&#x43E;&#x43F;&#x440;&#x435;&#x434;&#x435;&#x43B;&#x435;&#x43D;&#x438;&#x435; HTTP &#x43C;&#x435;&#x442;&#x43E;&#x434;&#x43E;&#x432;</a></h4>\n<p>Достаточно редкий случай, но некоторые прокси серверы поддерживают только GET и POST запросы.\nВ таком случае можно реализовать служебный заголовок <code>X-HTTP-Method-Override</code>, для замены POST метода на метод указанный в нем.</p>\n<h3><a name="&#x414;&#x43E;&#x43A;&#x443;&#x43C;&#x435;&#x43D;&#x442;&#x430;&#x446;&#x438;&#x44F;">4. &#x414;&#x43E;&#x43A;&#x443;&#x43C;&#x435;&#x43D;&#x442;&#x430;&#x446;&#x438;&#x44F;</a></h3>\n<p>Какой бы user-friendly не был ваш API он обязательно должен быть документирован, от схем до значений HTTP кодов.\nСуществуют множество способов документирования API, наиболее популярный и на мой взляд понятный - это <a href="http://swagger.io">swagger</a>,\nко всему у них можно найти спецификацию Rest API (стандарт, которому они следуют).</p>\n<h3><a name="&#x428;&#x438;&#x444;&#x440;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x435;">5. &#x428;&#x438;&#x444;&#x440;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x435;</a></h3>\n<p>Старайтесь использовать SSL шифрование. Сертификаты легко и бесплатно можно получить на <a href="https://www.startssl.com/">StartSLL</a> или <a href="https://letsencrypt.org/">LetsEncrypt</a>.</p>',color:"rgba(37, 127, 110, 0.8)",title:"Проектирование Rest API",description:"Как спроектировать Rest API для мобильного приложения или SPA",category:"кодинг",tags:["rest","api"],date:"2016-12-11T00:00:00.000Z",type:null},recommended:[{images:{blurUp:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAxUlEQVQY02Nw97QDIjcPW1IRUBcDfs3RsSF49BPQvGnzusysRAKaY+NC9+/f093T5h1gWzzZPrPZ3tvXadHiuc+fP8vKTpo+Y9LWrRtDQr1D4u3Ckuz8w+08fJA0A6VnzZ56586t2Dy7icccgCgtO/rCxXOnTp/IzUt9+uzRzEWdsfGhiaX2Oe32Ycl2KH4uKMqMjA5sbqn1DbatmGOf12PvH+i6Y8eWPXt3BgZ7LFu+cO68GUANEel2kRl2fmF2RPkZPwIAZi2QqNzjmmsAAAAASUVORK5CYII="},share:{src:"/static/b36310abf764c91568d26a134e70d9fa-f5537.jpg"},heroPreviewLG:{src:"/static/b36310abf764c91568d26a134e70d9fa-294b1.webp"},heroPreviewMD:{src:"/static/b36310abf764c91568d26a134e70d9fa-d8cc9.webp"},heroPreviewSM:{src:"/static/b36310abf764c91568d26a134e70d9fa-c14dc.webp"},heroPreviewXS:{src:"/static/b36310abf764c91568d26a134e70d9fa-227ee.webp"},mediumPreview:{src:"/static/b36310abf764c91568d26a134e70d9fa-ce211.webp"},smallPreview:{src:"/static/b36310abf764c91568d26a134e70d9fa-051c1.webp"}},excerpt:"Ave $USER! Node.JS - это платформа для выполнения JavaScript основаная на движке V8. \nВ этой статье мы установим node.js и…",id:"/Users/ivan/projects/gatsby-blog/src/pages/2017/09/hello-world-node-js/index.md absPath of file >>> MarkdownRemark",slug:"/2017/09/hello-world-node-js",permalink:"https://potofcode.com/2017/09/hello-world-node-js/",html:'<p>Ave $USER!</p>\n<p>Node.JS - это платформа для выполнения JavaScript основаная на движке V8.\nВ этой статье мы установим node.js и напишем простой веб-сервис,\nкоторый будет показывать топ 10 новостей с Hacker News.</p>\n<h3>Установка</h3>\n<h4>Windows</h4>\n<p>Для установки нужно перейти на сайт <a href="https://nodejs.org/en/">nodejs.org</a> скачать и установить.</p>\n<blockquote>\n<p><strong>Примечание:</strong>\nЕсли вы используете <code>Visual Studio 2015</code>, установите переменную окружения <code>GYP_MSVS_VERSION=2015</code>, что бы собирать модули Node JS с помощью <code>Visual Studio 2015</code></p>\n</blockquote>\n<h4>Ubuntu</h4>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code>curl -sL https://deb.nodesource.com/setup_8.x <span class="token operator">|</span> <span class="token function">sudo</span> -E <span class="token function">bash</span> -\n<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> -y nodejs\n</code></pre>\n      </div>\n<h4>MacOS</h4>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code>brew <span class="token function">install</span> node\n</code></pre>\n      </div>\n<h3>Проверка</h3>\n<p>Вместе с node.js будет установлен менеджер пакетов <code>npm</code>. Что бы проверить версию <code>node</code> и <code>npm</code> введем команды</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code>node -v\n<span class="token function">npm</span> -v\n</code></pre>\n      </div>\n<p>На момент написания статьи я использую <code>node</code> версии <code>8.4.0</code>. Давайте запустим простейший http сервер на node.js.</p>\n<h3>Создание проекта</h3>\n<p>У меня все проекты находятся по пути <code>~/projects/JavaScript</code>.\nОткроем консоль, создадим директорию для нашего проекта <code>hacker-blog</code> и перейдем в нее.\nСначала нам нужно инициализировать проект командой <code>npm init -y</code>.\nВ результате должен появиться файл <code>package.json</code>. Откроем его и изменим секцию <code>scripts</code>:</p>\n<div class="gatsby-highlight">\n      <pre class="language-json"><code>...\n  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;nodemon index.js&quot;</span>\n  <span class="token punctuation">}</span>\n...\n</code></pre>\n      </div>\n<p>Далее установим необходимые модули с помощью следующей команды:</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> --save express isomorphic-fetch nodemon\n</code></pre>\n      </div>\n<p>Немного о модулях:</p>\n<ul>\n<li>express - <a href="https://expressjs.com/">мини веб-фреймворк</a>, с очень удобным API</li>\n<li>isomorphic-fetch - модуль позволяет использовать <a href="https://developer.mozilla.org/ru/docs/Web/API/Fetch_API">Fetch API</a> на стороне сервера</li>\n<li>nodemon - модуль позволяет автоматически перезапускать скрипт при его изменении </li>\n</ul>\n<p>Сначала создадим шаблон для нашего сайта в обычном <code>index.html</code> файле</p>\n<div class="gatsby-highlight">\n      <pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Top 10 Hacker News stories<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style language-css">\n    <span class="token selector">html, body</span> <span class="token punctuation">{</span>\n      <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n      <span class="token property">min-height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>\n      <span class="token property">background-color</span><span class="token punctuation">:</span> #f6f6ef<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token selector">.title</span> <span class="token punctuation">{</span>\n      <span class="token property">background-color</span><span class="token punctuation">:</span> #f60<span class="token punctuation">;</span>\n      <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>\n      <span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token selector">.stories</span> <span class="token punctuation">{</span>\n      <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>\n      <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token selector">.story</span> <span class="token punctuation">{</span>\n      <span class="token property">text-decoration</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>\n      <span class="token property">color</span><span class="token punctuation">:</span> #333<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token selector">.story__details</span> <span class="token punctuation">{</span>\n      <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>\n      <span class="token property">color</span><span class="token punctuation">:</span> #888\n    <span class="token punctuation">}</span>\n  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Top 10 Hacker News<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ol</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>stories<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\n  <span class="token comment" spellcheck="true">&lt;!--STORIES--&gt;</span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ol</span><span class="token punctuation">&gt;</span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>\n</code></pre>\n      </div>\n<p>Здесь все просто, в списке есть комментарий <code>&#x3C;!--STORIES--></code>, который будем использовать как метку, куда поместить наши новости.\nСтили можете изменить на свой вкус и цвет.</p>\n<p>Теперь создадим файл <code>service.js</code> где будут функции вызова API Hacker News:</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;isomorphic-fetch&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment" spellcheck="true">// &#x422;.&#x43A;. &#x443; &#x43D;&#x430;&#x441; &#x443;&#x441;&#x442;&#x430;&#x43D;&#x43E;&#x432;&#x43B;&#x435;&#x43D; node 8+ &#x442;&#x43E; &#x43C;&#x43E;&#x436;&#x435;&#x43C; &#x438;&#x441;&#x43F;&#x43E;&#x43B;&#x44C;&#x437;&#x43E;&#x432;&#x430;&#x442;&#x44C; async/await, </span>\n<span class="token comment" spellcheck="true">// &#x447;&#x442;&#x43E; &#x434;&#x435;&#x43B;&#x430;&#x435;&#x442; &#x43A;&#x43E;&#x434; &#x431;&#x43E;&#x43B;&#x435;&#x435; &#x447;&#x438;&#x442;&#x430;&#x431;&#x435;&#x43B;&#x44C;&#x43D;&#x44B;&#x43C; &#x438; &#x43B;&#x438;&#x43D;&#x435;&#x439;&#x43D;&#x44B;&#x43C;, &#x43D;&#x435;&#x436;&#x435;&#x43B;&#x438; &#x43B;&#x430;&#x43F;&#x448;&#x430; &#x438;&#x437; `Promise.then`.</span>\n\n<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getTopStoriesIds</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n<span class="token comment" spellcheck="true">// &#x417;&#x434;&#x435;&#x441;&#x44C; &#x438;&#x441;&#x43F;&#x43E;&#x43B;&#x44C;&#x437;&#x443;&#x435;&#x442;&#x441;&#x44F; URL `https://hacker-news.firebaseio.com/v0/topstories.json?print=pretty`,</span>\n<span class="token comment" spellcheck="true">// &#x43A;&#x43E;&#x442;&#x43E;&#x440;&#x44B;&#x439; &#x432;&#x43E;&#x437;&#x432;&#x440;&#x430;&#x449;&#x430;&#x435;&#x442; &#x43C;&#x430;&#x441;&#x441;&#x438;&#x432; &#x438;&#x437; &#x447;&#x438;&#x441;&#x43B;&#x43E;&#x432;&#x44B;&#x445; &#x437;&#x43D;&#x430;&#x447;&#x435;&#x43D;&#x438;&#x439; &#x442;&#x43E;&#x43F; &#x43D;&#x43E;&#x432;&#x43E;&#x441;&#x442;&#x435;&#x439;, &#x433;&#x434;&#x435; &#x43C;&#x44B; &#x43F;&#x43E;&#x43B;&#x443;&#x447;&#x430;&#x43C; `count` &#x43F;&#x435;&#x440;&#x432;&#x44B;&#x445; &#x437;&#x43D;&#x430;&#x447;&#x435;&#x43D;&#x438;&#x439;.</span>\n\n  <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&apos;https://hacker-news.firebaseio.com/v0/topstories.json?print=pretty&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">const</span> ids <span class="token operator">=</span> <span class="token keyword">await</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">return</span> ids<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fetchTopStories</span><span class="token punctuation">(</span>ids<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n<span class="token comment" spellcheck="true">// &#x417;&#x434;&#x435;&#x441;&#x44C; &#x43C;&#x44B; &#x43F;&#x43E;&#x43B;&#x443;&#x447;&#x435;&#x43C; &#x438;&#x43D;&#x444;&#x43E;&#x440;&#x43C;&#x430;&#x446;&#x438;&#x44E; &#x43E; &#x43A;&#x430;&#x436;&#x434;&#x43E;&#x439; &#x43D;&#x43E;&#x432;&#x43E;&#x441;&#x442;&#x438; &#x43F;&#x43E; &#x435;&#x435; &#x43D;&#x43E;&#x43C;&#x435;&#x440;&#x443; </span>\n<span class="token comment" spellcheck="true">// &#x447;&#x435;&#x440;&#x435;&#x437; URL `https://hacker-news.firebaseio.com/v0/item/${id}.json`.</span>\n\n  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>ids<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">async</span> id <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`https://hacker-news.firebaseio.com/v0/item/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.json`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  getTopStoriesIds<span class="token punctuation">,</span>\n  fetchTopStories<span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n</code></pre>\n      </div>\n<p>И наконец создадим файл <code>index.js</code>, это и будет наш сервер:</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code><span class="token comment" spellcheck="true">// &#x418;&#x43C;&#x43F;&#x43E;&#x440;&#x442;&#x438;&#x440;&#x443;&#x435;&#x43C; &#x443;&#x441;&#x442;&#x430;&#x43D;&#x43E;&#x432;&#x43B;&#x435;&#x43D;&#x43D;&#x44B;&#x435; &#x43C;&#x43E;&#x434;&#x443;&#x43B;&#x438;</span>\n<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;fs&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> Express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;express&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">Express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment" spellcheck="true">// &#x418;&#x43C;&#x43F;&#x43E;&#x440;&#x442;&#x438;&#x440;&#x443;&#x435;&#x43C; &#x43D;&#x430;&#x448; &#x441;&#x435;&#x440;&#x432;&#x438;&#x441;</span>\n<span class="token keyword">const</span> <span class="token punctuation">{</span> getTopStoriesIds<span class="token punctuation">,</span> fetchTopStories <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;./services&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment" spellcheck="true">// &#x417;&#x430;&#x43F;&#x438;&#x441;&#x44B;&#x432;&#x430;&#x435;&#x43C; &#x448;&#x430;&#x431;&#x43B;&#x43E;&#x43D; &#x432; &#x441;&#x442;&#x440;&#x43E;&#x43A;&#x443;</span>\n<span class="token keyword">const</span> template <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">&apos;./index.html&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;utf8&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment" spellcheck="true">// &#x424;&#x443;&#x43D;&#x43A;&#x446;&#x438;&#x44F; &#x434;&#x43B;&#x44F; &#x43E;&#x442;&#x440;&#x438;&#x441;&#x43E;&#x432;&#x43A;&#x438; &#x43D;&#x43E;&#x432;&#x43E;&#x441;&#x442;&#x438;</span>\n<span class="token keyword">function</span> <span class="token function">renderStory</span><span class="token punctuation">(</span><span class="token punctuation">{</span> url<span class="token punctuation">,</span> title<span class="token punctuation">,</span> by<span class="token punctuation">,</span> time <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`\n&lt;li class=&quot;story&quot;&gt;\n  &lt;a href=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot; class=&quot;story&quot; target=&quot;_blank&quot;&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>title<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/a&gt;\n  &lt;div class=&quot;story__details&quot;&gt;by </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>by<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> | </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>time <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/div&gt;\n&lt;/li&gt;\n`</span></span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment" spellcheck="true">// &#x417;&#x430;&#x434;&#x430;&#x435;&#x43C; &#x43E;&#x431;&#x440;&#x430;&#x431;&#x430;&#x442;&#x447;&#x438;&#x43A; HTTP &#x437;&#x430;&#x43F;&#x440;&#x43E;&#x441;&#x430;</span>\napp<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&apos;/&apos;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n  <span class="token keyword">try</span> <span class="token punctuation">{</span>\n    <span class="token comment" spellcheck="true">// &#x41E;&#x436;&#x438;&#x434;&#x430;&#x435;&#x43C; &#x43F;&#x43E;&#x43B;&#x443;&#x447;&#x435;&#x43D;&#x438;&#x435; &#x442;&#x43E;&#x43F; 10 &#x43D;&#x43E;&#x432;&#x43E;&#x441;&#x442;&#x435;&#x439;</span>\n    <span class="token keyword">const</span> topIds <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getTopStoriesIds</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment" spellcheck="true">// &#x41E;&#x436;&#x438;&#x434;&#x430;&#x435;&#x43C; &#x43F;&#x43E;&#x43B;&#x443;&#x447;&#x435;&#x43D;&#x438;&#x435; &#x438;&#x43D;&#x444;&#x43E;&#x440;&#x43C;&#x430;&#x446;&#x438;&#x438; &#x43E; &#x43D;&#x43E;&#x432;&#x43E;&#x441;&#x442;&#x44F;&#x445;</span>\n    <span class="token keyword">const</span> items <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetchTopStories</span><span class="token punctuation">(</span>topIds<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment" spellcheck="true">// &#x41E;&#x442;&#x440;&#x438;&#x441;&#x43E;&#x432;&#x44B;&#x432;&#x430;&#x435;&#x43C; &#x438;&#x445; &#x432; &#x441;&#x442;&#x440;&#x43E;&#x43A;&#x438;</span>\n    <span class="token keyword">const</span> stories <span class="token operator">=</span> items<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>renderStory<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment" spellcheck="true">// &#x417;&#x430;&#x434;&#x430;&#x435;&#x43C; &#x432;&#x440;&#x435;&#x43C;&#x44F; &#x430;&#x43A;&#x442;&#x443;&#x430;&#x43B;&#x44C;&#x43D;&#x43E;&#x441;&#x442;&#x438; &#x437;&#x430;&#x43F;&#x440;&#x43E;&#x441;&#x430;</span>\n    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&apos;Cache-Control&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;public, max-age=100&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&apos;Expires&apos;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUTCString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    \n    <span class="token comment" spellcheck="true">// &#x417;&#x430;&#x43C;&#x435;&#x43D;&#x44F;&#x435;&#x43C; &#x43D;&#x430;&#x448;&#x443; &#x43C;&#x435;&#x442;&#x43A;&#x443; &#x43D;&#x430; &#x441;&#x442;&#x440;&#x43E;&#x43A;&#x438; &#x438; &#x43E;&#x442;&#x43F;&#x440;&#x430;&#x432;&#x43B;&#x44F;&#x435;&#x43C; &#x43E;&#x442;&#x432;&#x435;&#x442;</span>\n    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>template<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&apos;&lt;!--STORIES--&gt;&apos;</span><span class="token punctuation">,</span> stories<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&apos;\\n&apos;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    \n  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment" spellcheck="true">// &#x41E;&#x431;&#x440;&#x430;&#x431;&#x430;&#x442;&#x44B;&#x432;&#x430;&#x435;&#x43C; &#x43E;&#x448;&#x438;&#x431;&#x43A;&#x443;, &#x435;&#x441;&#x43B;&#x438; &#x447;&#x442;&#x43E;-&#x442;&#x43E; &#x43D;&#x435; &#x442;&#x430;&#x43A;</span>\n    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>stack<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&apos;Something broke!&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> port <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>NODE_PORT <span class="token operator">||</span> <span class="token number">9191</span><span class="token punctuation">;</span>\n\n<span class="token comment" spellcheck="true">// &#x417;&#x430;&#x43F;&#x443;&#x441;&#x43A;&#x430;&#x435;&#x43C; &#x441;&#x435;&#x440;&#x432;&#x435;&#x440;</span>\napp<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Served from http://localhost:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  \n</code></pre>\n      </div>\n<h3>Запуск</h3>\n<p>Теперь запустим наш сервер командой:</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code><span class="token function">npm</span> start\n</code></pre>\n      </div>\n<p>Перейдя по адресу <a href="http://127.0.0.1:9191">127.0.0.1:9191</a> мы увидим нашу страницу:</p>\n<div class="gallery">\n  \n  <a class="gatsby-resp-image-link" href="/static/905384fc0b7743bab771ef2893a36f3d-56888.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; z-index: 1; max-width: 980px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAAA7ElEQVQ4y+2RQW7CMBBFfdYcqKoqcYDehCULCAI7EJMU6pDINhapQCVddPHrGSR2SCRdVeri68uW/fQ8Ft+vCe6lHCVYPCeYPl179ZLgbXT/PEWcygm8GsPJMXdnZviqUk4X82nS2/qRiBBqbDYKeb5EUWRomi0ul5bTdR+9I6x9R5bNodScW8oU6/UCh8N+GJAM81xGyBJluWLLoXYM9L6KVjM2I2Bdb+H9HrRvrUEITX9DrRUbai2j4RXqnGEwdR9jQRY0O/qU3U7DmOIGcq6Ks6y5HwaezwFkSU9rW4vj0f5uhkMv/gP/EPAH51Fgl8eicBEAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;" alt="result" title="" src="/static/905384fc0b7743bab771ef2893a36f3d-70dbf.png" srcset="/static/905384fc0b7743bab771ef2893a36f3d-5dcff.png 245w,\n/static/905384fc0b7743bab771ef2893a36f3d-4d433.png 490w,\n/static/905384fc0b7743bab771ef2893a36f3d-70dbf.png 980w,\n/static/905384fc0b7743bab771ef2893a36f3d-56888.png 1024w" sizes="(max-width: 980px) 100vw, 980px">\n    </span>\n  </span>\n  \n  </a>\n    \n</div>\n<p><a href="https://github.com/potofcode/hacker-blog.git" target="_github"></a>Исходники</p>',
color:"rgba(70, 72, 62, 0.9)",title:"Hello World. Простейший Node JS Hacker News сервер",description:"Hello World. Установка и запуск простейшего приложения на Node JS показывающее новости с Hacker News",category:"кодинг",tags:["hello world","node js"],date:"2017-09-01T00:00:00.000Z",type:null},{images:{blurUp:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsSAAALEgHS3X78AAAAjElEQVQY02P4jwP8/vtv+qlXPUeef//9F5caBqyie+9+NJt+la/5LBDpTr688fp7EjSLtJ1LWnfPYOoVhZ6LxdsfAY14//0PCZrztjxcfOHNrNOvGvc9JUez7Zzr2pMuk6zZe/Etw6lXpLsuAE0xn3HNbs51rMHGgCsk1119B7RWpe/SovNv/v7DrgYADWJ267YVWrgAAAAASUVORK5CYII="},share:{src:"/static/f618e2623a2a113b1b0427aab565f9ac-f5537.jpg"},heroPreviewLG:{src:"/static/f618e2623a2a113b1b0427aab565f9ac-294b1.webp"},heroPreviewMD:{src:"/static/f618e2623a2a113b1b0427aab565f9ac-d8cc9.webp"},heroPreviewSM:{src:"/static/f618e2623a2a113b1b0427aab565f9ac-c14dc.webp"},heroPreviewXS:{src:"/static/f618e2623a2a113b1b0427aab565f9ac-227ee.webp"},mediumPreview:{src:"/static/f618e2623a2a113b1b0427aab565f9ac-ce211.webp"},smallPreview:{src:"/static/f618e2623a2a113b1b0427aab565f9ac-051c1.webp"}},excerpt:"Ave $USER! Я уже писал о том  как бесплатно захостить статический сайт на GitHub с Custom Domain и HTTPS . В этот раз я расскажу…",id:"/Users/ivan/projects/gatsby-blog/src/pages/2016/10/article-free-static-blog-with-hexo/index.md absPath of file >>> MarkdownRemark",slug:"/2016/10/article-free-static-blog-with-hexo",permalink:"https://potofcode.com/2016/10/article-free-static-blog-with-hexo/",html:'<p>Ave $USER!</p>\n<p>Я уже писал о том <a href="/2016/09/hello-world-github-pages/">как бесплатно захостить статический сайт на GitHub с Custom Domain и HTTPS</a>.</p>\n<p>В этот раз я расскажу немного о преимуществах статических сайтов и как создать свой статический блог, подключить к нему сервис коментариев, кнопки соц. сетей, который можно будет хостить на GitHub.</p>\n<p>Действительно, статический сайт, это очень удобно, просто и практично, различные динамические данные можно поключить через сторонние сервисы,\nоставив только статику, которую намного проще хостить и поддерживать, например на том же Github.</p>\n<h2>Содержание:</h2>\n<ol class="contents">\n  <li><a href="#&#x41F;&#x43E;&#x447;&#x435;&#x43C;&#x443; &#x441;&#x442;&#x430;&#x442;&#x438;&#x447;&#x435;&#x441;&#x43A;&#x438;&#x439; &#x441;&#x430;&#x439;&#x442;?">&#x41F;&#x43E;&#x447;&#x435;&#x43C;&#x443; &#x441;&#x442;&#x430;&#x442;&#x438;&#x447;&#x435;&#x441;&#x43A;&#x438;&#x439; &#x441;&#x430;&#x439;&#x442;?</a></li>\n  <li><a href="#&#x427;&#x442;&#x43E; &#x436;&#x435; &#x442;&#x430;&#x43A;&#x43E;&#x435; Hexo?">&#x427;&#x442;&#x43E; &#x436;&#x435; &#x442;&#x430;&#x43A;&#x43E;&#x435; Hexo?</a></li>\n  <li><a href="#&#x423;&#x441;&#x442;&#x430;&#x43D;&#x43E;&#x432;&#x43A;&#x430; &#x438; &#x43D;&#x430;&#x441;&#x442;&#x440;&#x43E;&#x439;&#x43A;&#x430;">&#x423;&#x441;&#x442;&#x430;&#x43D;&#x43E;&#x432;&#x43A;&#x430; &#x438; &#x43D;&#x430;&#x441;&#x442;&#x440;&#x43E;&#x439;&#x43A;&#x430;</a></li>\n  <li><a href="#&#x41F;&#x435;&#x440;&#x432;&#x44B;&#x439; &#x43F;&#x43E;&#x441;&#x442;">&#x41F;&#x435;&#x440;&#x432;&#x44B;&#x439; &#x43F;&#x43E;&#x441;&#x442;</a></li>\n</ol>\n<h3><a name="&#x41F;&#x43E;&#x447;&#x435;&#x43C;&#x443; &#x441;&#x442;&#x430;&#x442;&#x438;&#x447;&#x435;&#x441;&#x43A;&#x438;&#x439; &#x441;&#x430;&#x439;&#x442;?">&#x41F;&#x43E;&#x447;&#x435;&#x43C;&#x443; &#x441;&#x442;&#x430;&#x442;&#x438;&#x447;&#x435;&#x441;&#x43A;&#x438;&#x439; &#x441;&#x430;&#x439;&#x442;?</a></h3>\n<p>Здесь можно много спорить о статике и динамике, но существуют неоспоримые два преимущества статики перед динамикой:</p>\n<ol>\n<li>Скорость - даже кешированая динамическая страница грузится первый раз ( для кэша) медленнее. А закэшировав ее необходимо отслеживать ее консистентность, т.к.\nизмененные данные, могут не отобразиться, т.к. не обновился кэш.</li>\n<li>Безопасность - для создания сайта используются различные готовые решения, такие как WordPress и зачастую содержат ошибки, которые открывают двери злоумышленникам.\nНе верите? Вбейте в гугл <code>уязвимости wordpress</code>. И это не говоря о уязвимостях самих языков программирования, таких как PHP, Ruby и прочие.</li>\n</ol>\n<p>Единственное неудобство статики связано с генерацией страниц и загрузкой их на сервер при каждом обновлении контента, но этот процесс можно легко автоматизировать,\nа все динамические данные легко работают со сторонними сервисами, например интеграция социальных сетей типа фейсбука или вконтакте, все равно без них сейчас никак =)</p>\n<h3><a name="&#x427;&#x442;&#x43E; &#x436;&#x435; &#x442;&#x430;&#x43A;&#x43E;&#x435; Hexo?">&#x427;&#x442;&#x43E; &#x436;&#x435; &#x442;&#x430;&#x43A;&#x43E;&#x435; Hexo?</a></h3>\n<p>Hexo - это фреймворк написанный на node js для генерации статических блогов, который поддерживает несколько языков разметки (в том числе Markdown),\nимеет <a href="https://hexo.io/plugins/">множество плагинов</a> и <a href="https://hexo.io/themes/">там оформления</a>.\nТак же не составит труда создать свою тему с минимальными знаниями верстки.\nВсю информацию можно найти <a href="https://hexo.io/">на официальном сайте HEXO</a></p>\n<h3><a name="&#x423;&#x441;&#x442;&#x430;&#x43D;&#x43E;&#x432;&#x43A;&#x430; &#x438; &#x43D;&#x430;&#x441;&#x442;&#x440;&#x43E;&#x439;&#x43A;&#x430;">&#x423;&#x441;&#x442;&#x430;&#x43D;&#x43E;&#x432;&#x43A;&#x430; &#x438; &#x43D;&#x430;&#x441;&#x442;&#x440;&#x43E;&#x439;&#x43A;&#x430;</a></h3>\n<p>Для начала нам понадобится установить Node JS и npm, про установку, можно <a href="/2017/09/hello-world-node-js/">прочесть здесь</a>\nТак же понадобиться аккаунт на Github с именем вашего блога, например <code>my-cool-blog</code>, в нем необходимо создать репозиторий <code>my-cool-blog.github.io</code>,\nгде будет храниться наш сайт, подробнее можно <a href="/2016/09/hello-world-github-pages/">прочесть здесь</a></p>\n<p>После того как Node JS и npm установлены, необходимо установить HEXO, создадать проект и настроить его. Запускаем комндную строку и выполняем:</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code><span class="token function">npm</span> i -g hexo-cli\nhexo init my-cool-blog\n<span class="token function">cd</span> my-cool-blog\n<span class="token function">npm</span> i\n</code></pre>\n      </div>\n<p>После недолгого ожидания у вас должна появится готовая директория с проектом.</p>\n<div class="gatsby-highlight">\n      <pre class="language-none"><code>.\n&#x251C;&#x2500;&#x2500; _config.yml\n&#x251C;&#x2500;&#x2500; package.json\n&#x251C;&#x2500;&#x2500; scaffolds\n&#x251C;&#x2500;&#x2500; source\n|   &#x251C;&#x2500;&#x2500; _drafts\n|   &#x2514;&#x2500;&#x2500; _posts\n&#x2514;&#x2500;&#x2500; themes</code></pre>\n      </div>\n<ul>\n<li><code>_config.yml</code> - конфигурационный файл</li>\n<li><code>scaffolds</code>   - директория с шаблонами страниц, поумолчанию используется <code>post</code></li>\n<li><code>source</code>      - исходные файлы вашего блога. Здесь можно хранить картинки, стили, скрипты. Файлы и директории начинающиеся с <code>_</code> будут игнорироваться.\nВ <code>_posts</code> будут лежать опубликованный контент, а в <code>_drafts</code> черновики</li>\n<li><code>themes</code>      - темы оформления</li>\n</ul>\n<p>Также в нее будет установлена тема оформлению поумолчанию <code>landscape</code>.\nТеперь добавим несколько очень нужных плагинов. Это <code>sitemap.xml</code> генератор, поддержка шаблонизатора <code>jade</code> (сейчас он называется <code>pug</code>) и препроцессор <code>stylus</code>:</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code><span class="token function">npm</span> i --save hexo-generator-seo-friendly-sitemap hexo-renderer-jade hexo-renderer-stylus\n</code></pre>\n      </div>\n<p>Все необходимые модули установлены, теперь приступим к конфигурации. Откроем <code>_config.yml</code> и добавим/изменим следующие строки:</p>\n<div class="gatsby-highlight">\n      <pre class="language-yaml"><code><span class="token key atrule">sitemap</span><span class="token punctuation">:</span>\n    <span class="token key atrule">path</span><span class="token punctuation">:</span> sitemap.xml <span class="token comment" spellcheck="true"># &#x41F;&#x443;&#x442;&#x44C; &#x43A; sitemap.xml</span>\n\n<span class="token key atrule">marked</span><span class="token punctuation">:</span>\n  <span class="token key atrule">gfm</span><span class="token punctuation">:</span> <span class="token boolean important">true           </span><span class="token comment" spellcheck="true"># &#x41F;&#x43E;&#x434;&#x434;&#x435;&#x440;&#x436;&#x43A;&#x430; markdown</span>\n  <span class="token key atrule">breaks</span><span class="token punctuation">:</span> <span class="token boolean important">false       </span><span class="token comment" spellcheck="true"># &#x41E;&#x442;&#x43A;&#x43B;&#x44E;&#x447;&#x430;&#x435;&#x43C; &#x447;&#x443;&#x432;&#x441;&#x442;&#x432;&#x438;&#x442;&#x435;&#x43B;&#x44C;&#x43D;&#x43E;&#x441;&#x442;&#x44C; &#x43A; &#x440;&#x430;&#x437;&#x440;&#x44B;&#x432;&#x430;&#x43C; &#x441;&#x441;&#x442;&#x440;&#x43E;&#x43A;</span>\n\n<span class="token key atrule">skip_render</span><span class="token punctuation">:</span>          <span class="token comment" spellcheck="true"># &#x441;&#x435;&#x43A;&#x446;&#x438;&#x44F; &#x434;&#x43B;&#x44F; &#x438;&#x433;&#x43D;&#x43E;&#x440;&#x438;&#x440;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x44F; &#x444;&#x430;&#x439;&#x43B;&#x43E;&#x432; &#x432; source &#x434;&#x438;&#x440;&#x435;&#x43A;&#x442;&#x43E;&#x440;&#x438;&#x438;</span>\n  <span class="token punctuation">-</span> &apos;code/**/*&apos;       <span class="token comment" spellcheck="true"># blob &#x43C;&#x430;&#x441;&#x43A;&#x430; &#x434;&#x43B;&#x44F; &#x438;&#x433;&#x43D;&#x43E;&#x440;&#x438;&#x440;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x44F; &#x43E;&#x431;&#x440;&#x430;&#x431;&#x43E;&#x442;&#x43A;&#x438; &#x444;&#x430;&#x439;&#x43B;&#x43E;&#x432;, &#x44F; &#x438;&#x441;&#x43F;&#x43E;&#x43B;&#x44C;&#x437;&#x443;&#x44E; &#x44D;&#x442;&#x43E; &#x434;&#x43B;&#x44F; &#x434;&#x435;&#x43C;&#x43E;&#x43A;</span>\n\n<span class="token key atrule">new_post_name</span><span class="token punctuation">:</span> <span class="token punctuation">:</span>year/<span class="token punctuation">:</span>month/<span class="token punctuation">:</span>title.md   <span class="token comment" spellcheck="true"># &#x43A;&#x430;&#x436;&#x434;&#x44B;&#x439; &#x43F;&#x43E;&#x441;&#x442; &#x431;&#x443;&#x434;&#x435;&#x442; &#x445;&#x440;&#x430;&#x43D;&#x438;&#x442;&#x44C;&#x441;&#x44F; &#x43F;&#x43E; &#x43F;&#x443;&#x442;&#x438; /&#x433;&#x43E;&#x434;/&#x43C;&#x435;&#x441;&#x44F;&#x446;/&#x43D;&#x430;&#x437;&#x432;&#x430;&#x43D;&#x438;&#x435;-&#x43F;&#x43E;&#x441;&#x442;&#x430;.md</span>\n\n<span class="token key atrule">disqus_shortname</span><span class="token punctuation">:</span> mycoolblog            <span class="token comment" spellcheck="true"># &#x43D;&#x435;&#x43E;&#x431;&#x445;&#x43E;&#x434;&#x438;&#x43C;&#x43E; &#x437;&#x430;&#x440;&#x435;&#x433;&#x438;&#x441;&#x442;&#x440;&#x438;&#x440;&#x43E;&#x432;&#x430;&#x442;&#x44C;&#x441;&#x44F; &#x43D;&#x430; disqus.com &#x438; &#x43F;&#x43E;&#x43B;&#x443;&#x447;&#x438;&#x442;&#x44C; &#x441;&#x432;&#x43E;&#x439; ID</span>\n</code></pre>\n      </div>\n<p>После открываем файл <code>scaffolds/post.md</code> и изменяем его содержимое на следующее</p>\n<div class="gatsby-highlight">\n      <pre class="language-markdown"><code>title: {{ title }}\ndescription: {{ title }}\ndate: {{ date }}\nkeywords: []\ncategories: []\ntags: []\ncomments: true\n</code></pre>\n      </div>\n<h3><a name="&#x41F;&#x435;&#x440;&#x432;&#x44B;&#x439; &#x43F;&#x43E;&#x441;&#x442;">&#x41F;&#x435;&#x440;&#x432;&#x44B;&#x439; &#x43F;&#x43E;&#x441;&#x442;</a></h3>\n<p>Теперь можно открыть окно командной строки и выполнить команду</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code>hexo new my-first-cool-post\n</code></pre>\n      </div>\n<p>в результате выполнения будет сгенерирован файл поста и отображено сообщение</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code>INFO  Created: d:\\projects\\my-cool-blog\\source\\_posts\\year\\month\\my-first-cool-post.md\n</code></pre>\n      </div>\n<p>открываем файл в Markdown редакторе либо в онлайн редакторе вроде stackedit.io либо dillinger.io и редактируем</p>\n<div class="gatsby-highlight">\n      <pre class="language-markdown"><code><span class="token hr punctuation">---</span>\ntitle: &#x41C;&#x43E;&#x439; &#x43F;&#x435;&#x440;&#x432;&#x44B;&#x439; &#x43C;&#x435;&#x433;&#x430;&#x43F;&#x43E;&#x441;&#x442;\ndescription: &#x42D;&#x442;&#x43E; &#x43C;&#x43E;&#x439; &#x43F;&#x435;&#x440;&#x432;&#x44B;&#x439; &#x43C;&#x435;&#x433;&#x430;&#x43F;&#x43E;&#x441;&#x442; &#x432; &#x43C;&#x43E;&#x435;&#x43C; &#x441;&#x442;&#x430;&#x442;&#x438;&#x447;&#x435;&#x441;&#x43A;&#x43E;&#x43C; &#x431;&#x43B;&#x43E;&#x433;&#x435; &#x43D;&#x430; Hexo\ndate: 2016-10-10 20:22:45\nkeywords: [&#x411;&#x43B;&#x43E;&#x433;]\ncategories: [&#x421;&#x442;&#x430;&#x442;&#x44C;&#x44F;]\n<span class="token title important">tags: [&#x411;&#x43B;&#x43E;&#x433;, Hexo]\n<span class="token punctuation">---</span></span>\n\n&#x412;&#x441;&#x435;&#x43C; &#x43F;&#x440;&#x438;&#x432;&#x435;&#x442;!\n\n&#x42D;&#x442;&#x43E; &#x43C;&#x43E;&#x439; &#x43F;&#x435;&#x440;&#x432;&#x44B;&#x439; &#x43F;&#x43E;&#x441;&#x442; &#x432; &#x441;&#x442;&#x430;&#x442;&#x438;&#x447;&#x435;&#x441;&#x43A;&#x43E;&#x43C; &#x431;&#x43B;&#x43E;&#x433;&#x435;\n<span class="token comment" spellcheck="true">&lt;!-- More --&gt;</span>\n\n&#x421;&#x442;&#x430;&#x442;&#x438;&#x43A;&#x430; &#x44D;&#x442;&#x43E; &#x43A;&#x440;&#x443;&#x442;&#x43E;!\n</code></pre>\n      </div>\n<p>Сохраняем наши изменения и выполняем команду</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code>call hexo clean <span class="token operator">&amp;&amp;</span> call hexo server -l --config _config.yml\n</code></pre>\n      </div>\n<p>По умолчанию открыв адрес <code>http://localhost:4000/</code> вы должны увидеть ваш первый пост</p>',color:"rgba(26, 132, 203, 0.8)",title:"Как создать статический блог с коментариями на Hexo",description:"В статье подробное описание процесса создания статического блога на Hexo с подключением сервиса коментариев Disqus",category:"кодинг",tags:["node js","blog","hexo"],date:"2016-10-10T22:12:03.284Z",type:null},{images:{blurUp:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsSAAALEgHS3X78AAAAo0lEQVQY02P4jw1cunQpLCSkpqqquqrK29PzzZs3WJUxYBVdsXy5orw8HG3ZsoUEzY0NDdtm9T7cufTx3hUbp7R3d3URpfnXr1/v3r3bv3//lpk9746sfX90/fbZvXv37gUKAqWIsnn/ocMHDh22tjC3NDN98eLFfxyAAZfE8dNn7R0c3Tw8X3/8TJrml9//TD79MKy0NbKis//43Qeff2NVBgBlu3E3u+7kDwAAAABJRU5ErkJggg=="},share:{src:"/static/4ee960190d0f89f49bede6b7f8769d85-f5537.jpg"},heroPreviewLG:{src:"/static/4ee960190d0f89f49bede6b7f8769d85-294b1.webp"},heroPreviewMD:{src:"/static/4ee960190d0f89f49bede6b7f8769d85-d8cc9.webp"},heroPreviewSM:{src:"/static/4ee960190d0f89f49bede6b7f8769d85-c14dc.webp"},heroPreviewXS:{src:"/static/4ee960190d0f89f49bede6b7f8769d85-227ee.webp"},mediumPreview:{src:"/static/4ee960190d0f89f49bede6b7f8769d85-ce211.webp"},smallPreview:{src:"/static/4ee960190d0f89f49bede6b7f8769d85-051c1.webp"}},excerpt:"Ave $USER! В последнее время стали очень популярны статические сайты, а в том числе и статические блоги. Даже меня не обшло…",id:"/Users/ivan/projects/gatsby-blog/src/pages/2016/09/hello-world-github-pages/index.md absPath of file >>> MarkdownRemark",slug:"/2016/09/hello-world-github-pages",permalink:"https://potofcode.com/2016/09/hello-world-github-pages/",html:'<p>Ave $USER!</p>\n<p>В последнее время стали очень популярны статические сайты, а в том числе и статические блоги. Даже меня не обшло стороной это веяние и\nподдавшись искушению и всеобщему хайпу, я перевел свой блог в ряды статических сайтов. Хостится он на GitHub с Custom Domain и проксируется\nчерез Cloud Flare, раздавая трафик по HTTPS.</p>\n<h3>Подготовка</h3>\n<h4>Cloud Flare</h4>\n<p>Регистрируемся на <a href="https://cloudflare.com">Cloud Flare</a> и добавляем свое доменное имя, например <code>my-cool-blog.com</code></p>\n<div class="gallery">\n  \n  <a class="gatsby-resp-image-link" href="/static/e12c836a773bab981954530381657ac2-d2fa7.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; z-index: 1; max-width: 732px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 43.852459016393446%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAArElEQVQoz53O4Q6CIBAH8Hv4nqNn6QH6ljBta+YQ5iybyYEMsSIxV2tz2e/DcTv43wBKabSLCCGMsbIsT0sAz3POfcl9WAgROv4kwmRmI5wHRVForfuFAJXyMTVARN/7aq29/wDquvavW61DzK+QUiLK18Jx7odqhOEwxsAUcM7dFoLpz0HXdW5W73pjccvWm8MKCKVpmh4/ZVm2T5Ikjr+v3kFVXZpr0+r2Dw/dof17coh9VAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;" alt="cloudflare step 1" title="" src="/static/e12c836a773bab981954530381657ac2-d2fa7.png" srcset="/static/e12c836a773bab981954530381657ac2-c8a05.png 245w,\n/static/e12c836a773bab981954530381657ac2-f9878.png 490w,\n/static/e12c836a773bab981954530381657ac2-d2fa7.png 976w" sizes="(max-width: 732px) 100vw, 732px">\n    </span>\n  </span>\n  \n  </a>\n    \n</div>  \n<p>жмем <em>Begin Scan</em> и ждем окончания процесса. После окончания сканирования жмем продолжить, перед вами будет экран со всеми записями\nдомена, его можно пропустить (позже мы вернемся к нему) и нажать продолжить. Выбираем план подписки для данного домена и жмем продолжить.\nПоявится экран с NS записями, где необходимо скопировать адреса:</p>\n<div class="gatsby-highlight">\n      <pre class="language-none"><code>dana.ns.cloudflare.com\ntodd.ns.cloudflare.com</code></pre>\n      </div>\n<p>и заменить ими ваши текущие NS записи.</p>\n<p>Все должно быстро обновиться и теперь идем в раздел <em>Crypto</em> и выставляем SSL значение Flexible.</p>\n<p>Переходим в раздел <code>Page Rules</code> и создаем правило для URL <code>http://*my-cool-blog.com/*</code> жмем <em>Add Settings</em> и выбираем <em>Always use HTTPS</em>.</p>\n<p>И наконец переходим во вкладку <code>DNS</code> и добавляем 2 A-записи для IP адресов: 192.30.252.153 и 192.30.252.154.\nЭто адреса GitHub серверов и жмем на тучки, что бы выставить статус <em>DNS and HTTP proxy(CDN)</em>.</p>\n<h4>GitHub</h4>\n<p>Создаем одноименный аккаунт на <a href="https://github.com">GitHub</a> <code>my-cool-blog</code>.\nДалее создаем репозиторий с именем <code>my-cool-blog.github.io</code> и переходим в настройки.\nТам в группе <em>GitHub Pages</em> находим поле <em>Custom Domain</em> и вводим свое доменное имя.</p>\n<h3>Проверка</h3>\n<p>Выполняем</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code><span class="token function">mkdir</span> my-cool-blog\n<span class="token function">cd</span> my-cool-blog\n<span class="token function">git</span> clone https://github.com/my-cool-blog/my-cool-blog.github.io.git <span class="token keyword">.</span>\n</code></pre>\n      </div>\n<p>создаем файл <code>index.html</code></p>\n<div class="gatsby-highlight">\n      <pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>My Cool Blog<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>My Cool Blog<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>\n</code></pre>\n      </div>\n<p>Выполняем</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code><span class="token function">git</span> add --all\n<span class="token function">git</span> ci -am <span class="token string">&quot;my first post&quot;</span>\n<span class="token function">git</span> push\n</code></pre>\n      </div>\n<p>и переходим по URL <code>http://my-cool.blog.com</code>.</p>\n<p>Должен произойти редирект на <code>https://my-cool-blog.com</code>.</p>\n<h3>Профит</h3>\n<p>Качественный бесплатный хостинг, для статического сайта с HTTPS, DDoS защитой и самое главное - это версионность, так как все хостится на GitHub.</p>',color:"rgba(41, 29, 29, 0.8)",title:"Как создать свой сайт на GitHub с Custom Domain и HTTPS",description:"Подробное описание процесса создания сайта на GitHub с Custom Domain и HTTPS",category:"кодинг",tags:["hello world","github"],date:"2016-09-25T00:00:00.000Z",type:null}]}}}});
//# sourceMappingURL=path---2016-12-article-rest-api-design-best-practices-6ec8c879a3d17de3c04a.js.map