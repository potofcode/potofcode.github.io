webpackJsonp([0x8f4773b66946],{403:function(n,s){n.exports={pathContext:{post:{images:{blurUp:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAIppAACKaQGxZbMyAAACK0lEQVQozw2R30sUURTH5z+IcpzZ+XHvjrvuzuzsvXNnHHPXVdDQoF1wZ+fuzu5mhmZKLaZBatAPXyofgjK0EAw2Iih6EQmfAv+EIHzssZdehaKgoE7zcDhP5/v9HD6CE/SIrCbJJJRVm2tJi+uOGeplK8LXnSupJ6Mb7LD98tznme748cRDeuR3UntkOnk7H+EWjVDJqWObcJQiXEeUa4rgVEWDBmI/CXpzea64Vl2dzHK1kyknuwOV9NfKVXYyd7fwO5x3/7RvFr4P181v1lTqID9t3CORFpG6PpavIz/PESUNbAosEC0n6HVoIA0Snhi1QrWl2/KnyuXcj+6HAA4+rsDbw4uw+2YK3h/Ow/5RCI3OwK8+T/uSqyk3aJioOqEyzhp6kUXYE9yabDMuuw5PDBEuj6lWYpffykJ7MQ33H5Vhe3cZVlZbsLWzCq/frcPTFzOwvlGE+poBmiXt05oUxvcTXiiN+JE2KLhVMcMCyaY1mdlhoqA4vXcmZtDfcAFDZ53A3DUTFpYy8PhZJQ6iMLuUhbVND6qL/f90V9x2GuoFt4VHvCby/RamQixEdWoyjtFTJFSs+OWS4p55oGDlJGv1QY5kwB8y443iMcC0YzJD+5ksSDukicqkgc7SCOdZ08h47T5DiBtOsaZ+OjYk0oYm21xPx6aHcxU85/P+zeK0+byyXOpOLvqvxmfpXvFSbmuglVpmbXSeRYg6ETa8tqG4TSy5Eer5D2uBrkBagCp9AAAAAElFTkSuQmCC"},share:{src:"/static/wow-legion-74d2846f4142791072e182cb87d86f5f-f5537.jpg"},heroPreviewLG:{src:"/static/wow-legion-74d2846f4142791072e182cb87d86f5f-294b1.webp"},heroPreviewMD:{src:"/static/wow-legion-74d2846f4142791072e182cb87d86f5f-d8cc9.webp"},heroPreviewSM:{src:"/static/wow-legion-74d2846f4142791072e182cb87d86f5f-c14dc.webp"},heroPreviewXS:{src:"/static/wow-legion-74d2846f4142791072e182cb87d86f5f-227ee.webp"},mediumPreview:{src:"/static/wow-legion-74d2846f4142791072e182cb87d86f5f-ce211.webp"},smallPreview:{src:"/static/wow-legion-74d2846f4142791072e182cb87d86f5f-051c1.webp"}},excerpt:"Ave $USER! Не так давно, вышло очередное дополнение World of Warcraft Legion. Первым делом я принялся прокачивать шамана и был…",id:"/Users/ivan/projects/gatsby-blog/src/pages/2016/09/game-wow-legion-shaman-puzzles/index.md absPath of file >>> MarkdownRemark",slug:"/2016/09/game-wow-legion-shaman-puzzles",permalink:"https://potofcode.com/2016/09/game-wow-legion-shaman-puzzles/",html:'<p>Ave $USER!</p>\n<p>Не так давно, вышло очередное дополнение World of Warcraft Legion. Первым делом я принялся прокачивать шамана и был приятно\nудивлен получив артифактное оружие в оплоте шаманов. Я забрел к Мастеру головоломок Ло и увидел то, что вы подумали - головоломку.</p>\n<p>Передо мной был квадрат из огненных и водных тотемов 5 на 5, после того как кликаешь на тотем, он меняется на противоположный,\nнапример водный на огненный или огненный на водный и так же меняет сверху, снизу, слева и справа. Необходимо сделать так,\nчто бы все тотемы стали водными. После первого клика я понял, что срочно нужно написать решение для этой головоломки.</p>\n<p>Задача стояла следующая:\nДана матрица размерности N на M, каждая ячейка матрицы содержит либо 0 либо 1. При изменении значения ячейки матрицы\nна противоположное, автоматически меняются на противоположные значения на соседних ячейках сверху, снизу, слева и справа.\nНайти последовательность изменений ячеек, что бы матрица состояла только из нулей.</p>\n<p>Сначала в голову пришла мысль о переборе всех возможных комбинаций с оптимизацией. Но это все скучно. И я решил написать\nгенетический алгоритм решения задачи.</p>\n<h2>Немного теории</h2>\n<p>Для написания алгритма нам понадобится ввести поняия генов, генотипа, фитнес функции, мутация, поколения и выживания поколения.</p>\n<h3>Гены</h3>\n<p>Геном будем называть значение ячейки матрицы, т.е. это либо 1 либо 0</p>\n<h3>Генотип</h3>\n<p>Генотипом будем называть матрицу представленную в виде строки длинной L = N x M, которая будет содержать последовательно\nобъединенные строки матрицы, каждый символ строки - это ген</p>\n<blockquote>\n<p><strong>Пример</strong></p>\n</blockquote>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code><span class="token punctuation">[</span>\n    <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n    <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n    <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n    <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n    <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span>\n<span class="token punctuation">]</span>\n</code></pre>\n      </div>\n<p>Генотипом будет строка <code>0000011111000001111100000</code>, где L = 25</p>\n<h3>Фитнесс функция</h3>\n<p>Фитнесс функцией (Функцией приспособленности) назовем функцию, которая возвращает число от 0 до 1,\nчем ближе значение к 1 тем лучше преспособленность индивида. Остается вопрос, что же считать приспособленностью индивида.\nДля простоты можем обойтись количеством нулевых генов в генотипе разделенное на длину генотипа</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">fitness</span><span class="token punctuation">(</span>genotype<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> genotype<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/1/g</span><span class="token punctuation">,</span><span class="token string">\'\'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">/</span> genotype<span class="token punctuation">.</span>length<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre>\n      </div>\n<h3>Мутация</h3>\n<p>Изменение одного гена в генотипе индивида. Т.к. по правилам игры меняются 5 ячеек матрицы (целевая и соседние),\nто одна мутация будет давать 5 новых индивидов.</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code><span class="token keyword">const</span> DIRECTIONS <span class="token operator">=</span> <span class="token punctuation">[</span>\n    <span class="token punctuation">{</span>x<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">{</span>x<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">{</span>x<span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">{</span>x<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">{</span>x<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span>\n<span class="token punctuation">]</span><span class="token punctuation">;</span>\n\n<span class="token keyword">function</span> <span class="token function">mutate</span><span class="token punctuation">(</span>genotype<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> DIRECTIONS<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span> direction <span class="token operator">=></span> <span class="token punctuation">{</span>\n        <span class="token keyword">const</span> nextX <span class="token operator">=</span> x <span class="token operator">+</span> direction<span class="token punctuation">.</span>x<span class="token punctuation">;</span>\n        <span class="token keyword">const</span> nextY <span class="token operator">=</span> y <span class="token operator">+</span> direction<span class="token punctuation">.</span>y<span class="token punctuation">;</span>\n        <span class="token keyword">return</span> genotype<span class="token punctuation">.</span><span class="token function">flip</span><span class="token punctuation">(</span>nextX<span class="token punctuation">,</span> nextY<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre>\n      </div>\n<h3>Выживание</h3>\n<p>Селекция индивидов по приспособленности в результате которой, остается ограниченное число наиболее приспособленных.\nВ нашем случае мы сортируем всех индивидов по убыванию значения фитнесс функции и оставляем первых N x M x 8</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code><span class="token keyword">const</span> maxGenerationSize <span class="token operator">=</span> <span class="token number">400</span><span class="token punctuation">;</span> <span class="token comment">// 5 * 5 * 8</span>\n\n<span class="token keyword">function</span> <span class="token function">surviving</span><span class="token punctuation">(</span>populations<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> populations<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> b<span class="token punctuation">.</span>fitness <span class="token operator">-</span> a<span class="token punctuation">.</span>fitness<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> maxGenerationSize<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre>\n      </div>\n<h3>Поколение</h3>\n<p>Множество индивидов оставшихся после “Выживания”.\nПричем самый первый индивид поколения и будет решением, если его приспособленость равна единице</p>\n<h2>Еще немного теории</h2>\n<p>Можно заметить, что после мутации очень часто можно получить ранее известный геном либо геном, полученный меньшим количеством\nмутаций, но с такой же или лучшей приспособленностью. Что бы такого не происходило, создадим хэш-таблицу геномов, ключом которой\nбудет сам геном, а значением, массив из ячеек мутаций. В случае если этот геном уже встречался и количество ячеек мутаций\nне превосходит уже встречавшейся, создаем из него покаление.</p>\n<p>Также легко заметить, что мы меняем на всем поле либо 3 либо 5 ячеек, т.е. фитнесс функция возвращает 1 только после значений\n<code>L - 3</code> и <code>L - 5</code>. Для них, можно возращать значения фтнесс функции <code>0.999</code>, что бы увеличить их приспособленность</p>\n<blockquote>\n<p><strong>Пример</strong>\nДля марицы 5x5 значение фитнесс функции 1 будет при наличии всех 25 нулей в геноме, а им предшедствуют только либо 20 нулей либо 22</p>\n</blockquote>\n<p>Весь цикл поиска решения можно представить в виде следующего кода</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code><span class="token keyword">while</span> <span class="token punctuation">(</span> generation<span class="token operator">++</span> <span class="token operator">&lt;</span> maxGenerationsCount <span class="token operator">&amp;&amp;</span> populations<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>fitness <span class="token operator">!==</span> <span class="token number">1</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    populations <span class="token operator">=</span> <span class="token function">mutating</span><span class="token punctuation">(</span> populations <span class="token punctuation">)</span><span class="token punctuation">;</span>\n    populations <span class="token operator">=</span> <span class="token function">surviving</span><span class="token punctuation">(</span> populations <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre>\n      </div>\n<p>В итоге получилось такое вот приложение</p>\n<div class="gallery">\n  \n  <a class="gatsby-resp-image-link" href="/static/example-2678a6fc499e457e15f323881d5c21db-7d965.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; z-index: 1; max-width: 766px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 76.89295039164492%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAA7CAAAOwgEVKEqAAAAAsElEQVQ4y2NIuPL4v8OZe/89zt3/b3ryDkXY/vTd/ww+Z+/9Vz1y47/Zidv/JQ9e+y9BAVY5fP0/w4QHr//X3Xnxf/bjt////fuHgR99+/n/2ufvBGmYeoaNLz/8X/T07f/drz/9xwZSLz/8b3PyNkEaZBgIMHz79u3/hw8f/r99+w6rgVc/fPl/8NV7gjQMMPwnAEh2ISEDR104Elz46cfP/6++fidIE+1CUgHVDQQAhQU1Wj/eXjAAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;" alt="example" title="" src="/static/example-2678a6fc499e457e15f323881d5c21db-7d965.png" srcset="/static/example-2678a6fc499e457e15f323881d5c21db-4e00d.png 245w,\n/static/example-2678a6fc499e457e15f323881d5c21db-f9246.png 490w,\n/static/example-2678a6fc499e457e15f323881d5c21db-7d965.png 766w" sizes="(max-width: 766px) 100vw, 766px">\n    </span>\n  </span>\n  \n  </a>\n    \n</div>\n<ul>\n<li><a href="/code/shaman/" target="solution">Посмотреть на готовое решние можно здесь</a></li>\n<li><a href="https://github.com/potofcode/game-wow-legion-shaman-puzzles" target="sources">Исходники на GitHub</a></li>\n</ul>',color:"rgba(106, 151, 51, 0.9)",title:"World of Warcraft Legion головоломки шаманов. Генетический алгоритм решения",description:"World of Warcraft Legion головоломки шаманов. Генетический алгоритм решения",category:"игры",tags:["игры","WoW"],date:"2016-09-06T00:00:00.000Z",type:null},recommended:[{images:{blurUp:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAA7ElEQVQY02MQogAwQKgSbYUKHRBKVpfNz07v72xura9KjI1SVVEuzM2IiwoHigARnCErI4PQfNxea6GZaqeB0gpztX1b1xXnZV0+eXDxnGmmxkYHd26cN31CV3NdXmaql7vr0d1bWuoqpSQlEZpnmqhMNFJeZ6kO0RwTEXrh2D5kzQ+vnb194QTQwkWzp5qbGqM4e6WF2lZrjUQ12RnGKkDNdy+fWrFwFlyzgoK8oqLCvm3r5ORksWg+aKsJdDlQ/yIz1R3rVyybN+PWhePzpk98++jG+ye3p/Z1gBiPb8nJys6dNgFoIopm8gAAtox+i+ArJ08AAAAASUVORK5CYII="},share:{src:"/static/rust-9c7a1e1ac5d08ffc7dd84ab270e63d74-f5537.jpg"},heroPreviewLG:{src:"/static/rust-9c7a1e1ac5d08ffc7dd84ab270e63d74-294b1.webp"},heroPreviewMD:{src:"/static/rust-9c7a1e1ac5d08ffc7dd84ab270e63d74-d8cc9.webp"},heroPreviewSM:{src:"/static/rust-9c7a1e1ac5d08ffc7dd84ab270e63d74-c14dc.webp"},heroPreviewXS:{src:"/static/rust-9c7a1e1ac5d08ffc7dd84ab270e63d74-227ee.webp"},mediumPreview:{src:"/static/rust-9c7a1e1ac5d08ffc7dd84ab270e63d74-ce211.webp"},smallPreview:{src:"/static/rust-9c7a1e1ac5d08ffc7dd84ab270e63d74-051c1.webp"}},excerpt:"Ave $USER!  В этом посте я расскажу как установить и настроить свой Rust Server и моды к нему на примере Oxide.Ext.Rustio…",id:"/Users/ivan/projects/gatsby-blog/src/pages/2016/03/games-build-rust-server/index.md absPath of file >>> MarkdownRemark",slug:"/2016/03/games-build-rust-server",permalink:"https://potofcode.com/2016/03/games-build-rust-server/",html:'<p>Ave $USER!</p>\n<p> В этом посте я расскажу как установить и настроить свой Rust Server и моды к нему на примере Oxide.Ext.Rustio.</p>\n<p>Сначала утсановим SteamCMD. Для OS Windows <a href="https://steamcdn-a.akamaihd.net/client/installer/steamcmd.zip">скачаем</a> архив и распакуем в отдельную папку. Я буду использовать <code>D:\\bin\\steamcmd</code>.</p>\n<blockquote>\n<p>Для OS Ubuntu</p>\n</blockquote>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> lib32gcc1\n<span class="token function">sudo</span> <span class="token function">useradd</span> -m steam\n<span class="token function">su</span> - steam\n<span class="token function">mkdir</span> ~/steamcmd\n<span class="token function">cd</span> ~/steamcmd\n<span class="token function">wget</span> https://steamcdn-a.akamaihd.net/client/installer/steamcmd_linux.tar.gz\n<span class="token function">tar</span> -xvzf steamcmd_linux.tar.gz\n</code></pre>\n      </div>\n<p>После распаковки запускаем консоль <code>steamcmd</code> и ждем завершения процесса установки. Как только все будет установлено должна открыться консоль</p>\n<div class="gallery">\n  \n  <a class="gatsby-resp-image-link" href="/static/steamcmd-2d119bdca30693ac54dd670282c1c876-cf9e0.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; z-index: 1; max-width: 979px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 52.50255362614914%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAZUlEQVQoz+3LPQuAIBSF4SveWcRy8KP/PwmBYS7qX+saNAbi0NQznOm8sN9CCCmdtdbWGm0pJed8vIgxUkIH2Lw3xjjntNaLUkIIRIQBVIHuViklfzDGRmJrLSDnMKXH0/744/gCS74wB4r17PYAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;" alt="steamcmd" title="" src="/static/steamcmd-2d119bdca30693ac54dd670282c1c876-cf9e0.png" srcset="/static/steamcmd-2d119bdca30693ac54dd670282c1c876-11583.png 245w,\n/static/steamcmd-2d119bdca30693ac54dd670282c1c876-872f7.png 490w,\n/static/steamcmd-2d119bdca30693ac54dd670282c1c876-cf9e0.png 979w" sizes="(max-width: 979px) 100vw, 979px">\n    </span>\n  </span>\n  \n  </a>\n    \n</div>\n<p>Затем необходимо залогиниться и начать процесс установки сервера</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code>$ login anonymous\n$ app_update 258550 -beta experimental validate\n</code></pre>\n      </div>\n<div class="gallery">\n  \n  <a class="gatsby-resp-image-link" href="/static/steamcmd-rust-server-037c76aaa79ff4ac9c36d70592b3b7fd-cf9e0.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; z-index: 1; max-width: 979px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 52.50255362614914%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABEUlEQVQoz42SyY6DMBBEWZUQFrG3V8CEiK9HEGUOfN4UjDRzMpo+lCzbr8putbNt23t7r+u6LMvX/+rz+YDa990piqIsyzzP0zSN4/h2uyVJAvV937kszrkDEnxd1/f7PQiCMAx/9RoWQjiMcSHgwvu+l1JqrZumkVLhLIoiWMPUChMxKYRSCvCP4hVEZIypyvL1ejEiK8y5UGegGQx0HA1jDOFmGNqmmaYJjnZYCK1U13WIggLGF9qW5nlmjJ7TNAyDewErJfUJH/nmSG6J8OBOa/wCvOe6l7D+g49kotEY7B/w0w7jHrqNPiMHittoYVXVcMGxVAoLK4yRwGwkZ2VZ9ng8PM/zPcyIfyzOsjXsG0KwS4o01KHdAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;" alt="steamcmd rust server" title="" src="/static/steamcmd-rust-server-037c76aaa79ff4ac9c36d70592b3b7fd-cf9e0.png" srcset="/static/steamcmd-rust-server-037c76aaa79ff4ac9c36d70592b3b7fd-11583.png 245w,\n/static/steamcmd-rust-server-037c76aaa79ff4ac9c36d70592b3b7fd-872f7.png 490w,\n/static/steamcmd-rust-server-037c76aaa79ff4ac9c36d70592b3b7fd-cf9e0.png 979w" sizes="(max-width: 979px) 100vw, 979px">\n    </span>\n  </span>\n  \n  </a>\n    \n</div>\n<p>Из любопытства, со всем списком серверов можно ознакомиться <a href="https://developer.valvesoftware.com/wiki/Dedicated_Servers_List">здесь</a>.\nПо завершении установки в директории <code>d:\\bin\\steamcmd\\steamapps\\common</code> появится папка <code>rust_dedicated</code>.\nВ качестве движка для модов я использую <a href="http://oxidemod.org/downloads/oxide-for-rust.1659/">oxidemod</a>.\nГотовый движок можно скачать с форума либо собрать из исходников на <a href="https://github.com/OxideMod/Oxide">GitHub</a>.</p>\n<p>Распаковываем файл Oxide-Rust.zip с заменой в папку с сервером <code>d:\\bin\\steamcmd\\steamapps\\common\\rust_dedicated\\</code>.\nТеперь установи несколько плагинов и расширение:</p>\n<ul>\n<li><a href="http://oxidemod.org/extensions/rust-io.768/">Rust:IO</a> - Расширение добавляет карту местности доступную из браузера</li>\n<li><a href="http://oxidemod.org/plugins/kits.668/">Kits</a> - Добавляет возможность создавать наборы предметов</li>\n<li><a href="http://oxidemod.org/plugins/death-notes.819/">Death Notes</a> - Сообщает о смертях в мире</li>\n<li><a href="http://oxidemod.org/plugins/teleportation-system.660/">Teleportation System</a> - Позволяет телепортироваться</li>\n<li><a href="http://oxidemod.org/plugins/airdrop-controller.804/">Airdrop Controller</a> - Добавляет возможность контролировать Airdrop</li>\n<li><a href="http://oxidemod.org/plugins/give.666/">Give</a> - Добавляет возможность давать игрокам предметы</li>\n</ul>\n<p>Чтобы установить и нстроить расширение <code>Rust:IO</code> нужно сохранить файл <code>Oxide.Ext.RustIO.dll</code> в папку <code>rust_dedicated\\RustDedicated_Data\\Managed\\</code>.\nДля установки плагинов, нужно скопировать файлы в <code>rust_dedicated\\server\\facepunchdev\\oxide\\plugins\\</code>\nТеперь, чтобы запустить сервер выполним команду</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code>$ RustDedicated.exe -batchmode +server.hostname <span class="token string">"hostname"</span> +server.port 28015 +server.identity <span class="token string">"server name"</span> +server.seed 6738\n</code></pre>\n      </div>\n<p>Все параметры в таблице:</p>\n<table>\n<thead>\n<tr>\n<th align="left">Parameter</th>\n<th align="left">Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="left">server.port</td>\n<td align="left">Порт сервера</td>\n</tr>\n<tr>\n<td align="left">server.maxplayers</td>\n<td align="left">Максимальное количество игроков на сервере</td>\n</tr>\n<tr>\n<td align="left">server.hostname</td>\n<td align="left">Адрес сервера</td>\n</tr>\n<tr>\n<td align="left">server.identity</td>\n<td align="left">Название сервера</td>\n</tr>\n<tr>\n<td align="left">server.level</td>\n<td align="left">Тип карты “Procedural Map” - процедурная генерация или “TestLevel” - тестовая карта</td>\n</tr>\n<tr>\n<td align="left">server.seed</td>\n<td align="left">Вектор инициализации генератора карты. Может принять значения от -2,147,483,647 до 2,147,483,647</td>\n</tr>\n<tr>\n<td align="left">server.saveinterval</td>\n<td align="left">Интервал в секундах между автосохранениями</td>\n</tr>\n<tr>\n<td align="left">server.secure</td>\n<td align="left">Защита VAC и EAC</td>\n</tr>\n<tr>\n<td align="left">server.tickrate</td>\n<td align="left">Количество тиков в секунду. Меньше - быстрее но возможны странные вещи. По умолчанию 30</td>\n</tr>\n<tr>\n<td align="left">construct.frameminutes</td>\n<td align="left">Minutes before a frame is automatically destroyed</td>\n</tr>\n</tbody>\n</table>\n<p>Теперь, что бы играть на свеженьком сервере, запускаем клиент жмем F1 вводим <code>net.connect &#x3C;ip_address></code></p>',color:"rgba(18, 18, 18, 0.8)",title:"Настраиваем свой Rust сервер",description:"Установка и настройка локального игрового Rust сервера. Как настроить Oxide.Ext.Rustio и многое другое.",category:"игры",tags:["игпы","Steam","Rust"],date:"2016-03-13T00:00:00.000Z",type:null},{images:{blurUp:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAABZ0lEQVQoz5XM2yuDARjHcf+PGxcyLa9ymFDklNO4MrmZaCzbQk6hFRs5DNnmfVdsCHHh0JZbMULYbDdcUQjbnPnixo258NTveZ6b3ycmHHngr2zs+DDbFtCYJarbh6jpGKaqfRRV29ffZSEUjvzqxHyv27t79g8OmRJF7FMigWCQq+sbPNtHaC2LyDQTKPRWKo1OSntmKO6eJlVn5fo2FB10ulzo9HoEQUAul7O8vEIgEODE52dg1k1suYF0g52SXhdZrQ6Sm+ykGWzsnZ5HB73eXdbW15EcDkRR4vjEx8XFJfObXiqMs9QZrSiaRQSdREKjjbj6SRK/rnv3NDr48vrG+wc/8/T8QuThkf6lLWTqQdRmJ4K6j4QyDTJlA7LyBuKVWla3/dHBv9I5MUd6lZ6kWhMpqhbScgrJzC9BkVuEokCJZy/4PzCvsIjE7GI0JglV5xjJdYNkNVnI0I5Q0DKO13/2q/MJ4BC8mHcniWgAAAAASUVORK5CYII="},share:{src:"/static/image-df0d25f1561b77ae63b434cfcc90d637-f5537.jpg"},heroPreviewLG:{src:"/static/image-df0d25f1561b77ae63b434cfcc90d637-294b1.webp"},heroPreviewMD:{src:"/static/image-df0d25f1561b77ae63b434cfcc90d637-d8cc9.webp"},heroPreviewSM:{src:"/static/image-df0d25f1561b77ae63b434cfcc90d637-c14dc.webp"},heroPreviewXS:{src:"/static/image-df0d25f1561b77ae63b434cfcc90d637-227ee.webp"},mediumPreview:{src:"/static/image-df0d25f1561b77ae63b434cfcc90d637-ce211.webp"},smallPreview:{src:"/static/image-df0d25f1561b77ae63b434cfcc90d637-051c1.webp"}},excerpt:"Ave $USER! Сегодня я расскажу и покажу как сделать 3х кнопочное мини пианино на ардуино.\nЛунную сонату конечно мы не сыграем, но…",id:"/Users/ivan/projects/gatsby-blog/src/pages/2017/09/diy-pianoduino/index.md absPath of file >>> MarkdownRemark",slug:"/2017/09/diy-pianoduino",permalink:"https://potofcode.com/2017/09/diy-pianoduino/",html:'<p>Ave $USER!</p>\n<p>Сегодня я расскажу и покажу как сделать 3х кнопочное мини пианино на ардуино.\nЛунную сонату конечно мы не сыграем, но для понятия принципа работы вполне себе подойдет.</p>\n<p>Для начала нам понадобятся следующие комплектующие:</p>\n<ul>\n<li>Пьезо динамик</li>\n<li>1 х Резистор на 100 Ом</li>\n<li>3 х Резистор на 10 Ом</li>\n<li>3 кнопки</li>\n<li>11 соединительных проводов</li>\n</ul>\n<p>Подключаем все как показано на рисунке</p>\n<div class="presentation">\n  \n  <a class="gatsby-resp-image-link" href="/static/schematic-6632650e805337a6158c2008b48d0b96-94a4b.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; z-index: 1; max-width: 980px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 43.84275972723626%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAACG0lEQVQoz6WS30tTYRjHzx8TBBkRQRhhRTd1sRIzMiHKZmKkuZxMHaaGXcyYGWbir00s0hWINnQX2qy5dXaYO2fnnKUGkuXCQSGFm2a3n15XQnTRTRcf3ud535fv+32+vNL37R/8SXZrm/XsFl8ymznWs5t8y2TZyGTY2PgH4jwj7kkvpiN0jr3G0eGl3j1AfacXx/0hHO5BmrufENbf8X55EVUOYcRVDFVFVyJos1Nor6ZIyLOYUQUtFsNUFCTP2AzHHF7y7R4srU8pcT2n6K4Py50RzggmlCXS6RSBST+9vX0EAgEWTEOIRDCEsKHNkxSPaAIzHEFa/fiB085BjpQ1U9Q6TFXPJIVtoxxvGOZk4xCemTghWaG25gYH8vZwrdxKVDiKRqPIUZl4PE4ikSChaRhzc0iX2p9R/XCclqEABcLpwZp+DtkGcuyt7ME19gZFT9LY2MD+vH3YbDZiYrzxiXH8fj/BYBB1JwYhqodCSJZaN0ftfRyu6iL/oo2C4nJOFF+l5Mp5zlkL6R99wMJiADXmQw4Po877SJp+1LdBYqaMlkyIPvnbYRipoNjKhaYe7F0+ztpcnKpowmKto7SmAsv1W3SPTGIsLGEaIjfTzGGIWtf1HLu1KkZPRkSGpdVO7J2PKbs3yuWWR1Q2tHPT2YGztY262y5eTof5urJCenmZtdQn0qmUWAWrv9jpd/c+r60h/f0P/5efjlIxzVef1IYAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;" alt="schematic" title="" src="/static/schematic-6632650e805337a6158c2008b48d0b96-70dbf.png" srcset="/static/schematic-6632650e805337a6158c2008b48d0b96-5dcff.png 245w,\n/static/schematic-6632650e805337a6158c2008b48d0b96-4d433.png 490w,\n/static/schematic-6632650e805337a6158c2008b48d0b96-70dbf.png 980w,\n/static/schematic-6632650e805337a6158c2008b48d0b96-f4328.png 1470w,\n/static/schematic-6632650e805337a6158c2008b48d0b96-0e111.png 1960w,\n/static/schematic-6632650e805337a6158c2008b48d0b96-94a4b.png 2493w" sizes="(max-width: 980px) 100vw, 980px">\n    </span>\n  </span>\n  \n  </a>\n    \n</div>\n<p>Перепроверяем, что бы все было соединено согласно схеме и подключаем к USB порту лэптопа или ПК.</p>\n<p>Открываем Arduino IDE и вставляем следующий код:</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code>int pos <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n\n<span class="token keyword">void</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n  <span class="token function">pinMode</span><span class="token punctuation">(</span>A0<span class="token punctuation">,</span> INPUT<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token function">pinMode</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> OUTPUT<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token function">pinMode</span><span class="token punctuation">(</span>A1<span class="token punctuation">,</span> INPUT<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token function">pinMode</span><span class="token punctuation">(</span>A2<span class="token punctuation">,</span> INPUT<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">void</span> <span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n  <span class="token comment">// если обнаружено нажатие кнопки A0</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">digitalRead</span><span class="token punctuation">(</span>A0<span class="token punctuation">)</span> <span class="token operator">==</span> HIGH<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">tone</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">440</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// играем ноту 57 (A4 = 440 Hz)</span>\n  <span class="token punctuation">}</span>\n  <span class="token comment">// если обнаружено нажатие кнопки A1</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">digitalRead</span><span class="token punctuation">(</span>A1<span class="token punctuation">)</span> <span class="token operator">==</span> HIGH<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">tone</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">494</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// играем ноту 59 (B4 = 494 Hz)</span>\n  <span class="token punctuation">}</span>\n  <span class="token comment">// если обнаружено нажатие кнопки A2</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">digitalRead</span><span class="token punctuation">(</span>A2<span class="token punctuation">)</span> <span class="token operator">==</span> HIGH<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">tone</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">523</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// играем ноту 60 (C5 = 523 Hz)</span>\n  <span class="token punctuation">}</span>\n  <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Делаем небольшую задержку, что бы не нагружать arduino</span>\n<span class="token punctuation">}</span>\n</code></pre>\n      </div>\n<p>После жмем компилировать и записываем прошивку.\nВу а ля, все готово что бы сыграть простую мелодию.</p>\n<p>Если вы хотите настроить другие ноты, то можете воспользоваться таблицей\n<a href="https://ru.wikipedia.org/wiki/%D0%A7%D0%B0%D1%81%D1%82%D0%BE%D1%82%D1%8B_%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8_%D1%84%D0%BE%D1%80%D1%82%D0%B5%D0%BF%D0%B8%D0%B0%D0%BD%D0%BE" target="_wiki">частоты настройки фортепиано</a></p>',
color:"rgba(49, 110, 152, 0.9)",title:"Играем мелодию на arduino или пианодуино",description:"Делаем мини пианино на arduino, которое играет 3 ноты",category:"diy",tags:["hello world","arduino"],date:"2017-10-05T20:25:11.396Z",type:null},{images:{blurUp:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAxUlEQVQY02Nw97QDIjcPW1IRUBcDfs3RsSF49BPQvGnzusysRAKaY+NC9+/f093T5h1gWzzZPrPZ3tvXadHiuc+fP8vKTpo+Y9LWrRtDQr1D4u3Ckuz8w+08fJA0A6VnzZ56586t2Dy7icccgCgtO/rCxXOnTp/IzUt9+uzRzEWdsfGhiaX2Oe32Ycl2KH4uKMqMjA5sbqn1DbatmGOf12PvH+i6Y8eWPXt3BgZ7LFu+cO68GUANEel2kRl2fmF2RPkZPwIAZi2QqNzjmmsAAAAASUVORK5CYII="},share:{src:"/static/nodejs-b36310abf764c91568d26a134e70d9fa-f5537.jpg"},heroPreviewLG:{src:"/static/nodejs-b36310abf764c91568d26a134e70d9fa-294b1.webp"},heroPreviewMD:{src:"/static/nodejs-b36310abf764c91568d26a134e70d9fa-d8cc9.webp"},heroPreviewSM:{src:"/static/nodejs-b36310abf764c91568d26a134e70d9fa-c14dc.webp"},heroPreviewXS:{src:"/static/nodejs-b36310abf764c91568d26a134e70d9fa-227ee.webp"},mediumPreview:{src:"/static/nodejs-b36310abf764c91568d26a134e70d9fa-ce211.webp"},smallPreview:{src:"/static/nodejs-b36310abf764c91568d26a134e70d9fa-051c1.webp"}},excerpt:"Ave $USER! Node.JS - это платформа для выполнения JavaScript основаная на движке V8. \nВ этой статье мы установим node.js и…",id:"/Users/ivan/projects/gatsby-blog/src/pages/2017/09/hello-world-node-js/index.md absPath of file >>> MarkdownRemark",slug:"/2017/09/hello-world-node-js",permalink:"https://potofcode.com/2017/09/hello-world-node-js/",html:'<p>Ave $USER!</p>\n<p>Node.JS - это платформа для выполнения JavaScript основаная на движке V8.\nВ этой статье мы установим node.js и напишем простой веб-сервис,\nкоторый будет показывать топ 10 новостей с Hacker News.</p>\n<h3>Установка</h3>\n<h4>Windows</h4>\n<p>Для установки нужно перейти на сайт <a href="https://nodejs.org/en/">nodejs.org</a> скачать и установить.</p>\n<blockquote>\n<p><strong>Примечание:</strong>\nЕсли вы используете <code>Visual Studio 2015</code>, установите переменную окружения <code>GYP_MSVS_VERSION=2015</code>, что бы собирать модули Node JS с помощью <code>Visual Studio 2015</code></p>\n</blockquote>\n<h4>Ubuntu</h4>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code>curl -sL https://deb.nodesource.com/setup_8.x <span class="token operator">|</span> <span class="token function">sudo</span> -E <span class="token function">bash</span> -\n<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> -y nodejs\n</code></pre>\n      </div>\n<h4>MacOS</h4>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code>brew <span class="token function">install</span> node\n</code></pre>\n      </div>\n<h3>Проверка</h3>\n<p>Вместе с node.js будет установлен менеджер пакетов <code>npm</code>. Что бы проверить версию <code>node</code> и <code>npm</code> введем команды</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code>node -v\n<span class="token function">npm</span> -v\n</code></pre>\n      </div>\n<p>На момент написания статьи я использую <code>node</code> версии <code>8.4.0</code>. Давайте запустим простейший http сервер на node.js.</p>\n<h3>Создание проекта</h3>\n<p>У меня все проекты находятся по пути <code>~/projects/JavaScript</code>.\nОткроем консоль, создадим директорию для нашего проекта <code>hacker-blog</code> и перейдем в нее.\nСначала нам нужно инициализировать проект командой <code>npm init -y</code>.\nВ результате должен появиться файл <code>package.json</code>. Откроем его и изменим секцию <code>scripts</code>:</p>\n<div class="gatsby-highlight">\n      <pre class="language-json"><code>...\n  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token property">"start"</span><span class="token operator">:</span> <span class="token string">"nodemon index.js"</span>\n  <span class="token punctuation">}</span>\n...\n</code></pre>\n      </div>\n<p>Далее установим необходимые модули с помощью следующей команды:</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> --save express isomorphic-fetch nodemon\n</code></pre>\n      </div>\n<p>Немного о модулях:</p>\n<ul>\n<li>express - <a href="https://expressjs.com/">мини веб-фреймворк</a>, с очень удобным API</li>\n<li>isomorphic-fetch - модуль позволяет использовать <a href="https://developer.mozilla.org/ru/docs/Web/API/Fetch_API">Fetch API</a> на стороне сервера</li>\n<li>nodemon - модуль позволяет автоматически перезапускать скрипт при его изменении </li>\n</ul>\n<p>Сначала создадим шаблон для нашего сайта в обычном <code>index.html</code> файле</p>\n<div class="gatsby-highlight">\n      <pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Top 10 Hacker News stories<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style language-css">\n    <span class="token selector">html, body</span> <span class="token punctuation">{</span>\n      <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n      <span class="token property">min-height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>\n      <span class="token property">background-color</span><span class="token punctuation">:</span> #f6f6ef<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token selector">.title</span> <span class="token punctuation">{</span>\n      <span class="token property">background-color</span><span class="token punctuation">:</span> #f60<span class="token punctuation">;</span>\n      <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>\n      <span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token selector">.stories</span> <span class="token punctuation">{</span>\n      <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>\n      <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token selector">.story</span> <span class="token punctuation">{</span>\n      <span class="token property">text-decoration</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>\n      <span class="token property">color</span><span class="token punctuation">:</span> #333<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token selector">.story__details</span> <span class="token punctuation">{</span>\n      <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>\n      <span class="token property">color</span><span class="token punctuation">:</span> #888\n    <span class="token punctuation">}</span>\n  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Top 10 Hacker News<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ol</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stories<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n  <span class="token comment">&lt;!--STORIES--></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ol</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span>\n</code></pre>\n      </div>\n<p>Здесь все просто, в списке есть комментарий <code>&#x3C;!--STORIES--></code>, который будем использовать как метку, куда поместить наши новости.\nСтили можете изменить на свой вкус и цвет.</p>\n<p>Теперь создадим файл <code>service.js</code> где будут функции вызова API Hacker News:</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'isomorphic-fetch\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// Т.к. у нас установлен node 8+ то можем использовать async/await, </span>\n<span class="token comment">// что делает код более читабельным и линейным, нежели лапша из `Promise.then`.</span>\n\n<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getTopStoriesIds</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n<span class="token comment">// Здесь используется URL `https://hacker-news.firebaseio.com/v0/topstories.json?print=pretty`,</span>\n<span class="token comment">// который возвращает массив из числовых значений топ новостей, где мы получам `count` первых значений.</span>\n\n  <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">\'https://hacker-news.firebaseio.com/v0/topstories.json?print=pretty\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">const</span> ids <span class="token operator">=</span> <span class="token keyword">await</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">return</span> ids<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fetchTopStories</span><span class="token punctuation">(</span>ids<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n<span class="token comment">// Здесь мы получем информацию о каждой новости по ее номеру </span>\n<span class="token comment">// через URL `https://hacker-news.firebaseio.com/v0/item/${id}.json`.</span>\n\n  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>ids<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">async</span> id <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`https://hacker-news.firebaseio.com/v0/item/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.json`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  getTopStoriesIds<span class="token punctuation">,</span>\n  fetchTopStories<span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n</code></pre>\n      </div>\n<p>И наконец создадим файл <code>index.js</code>, это и будет наш сервер:</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code><span class="token comment">// Импортируем установленные модули</span>\n<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'fs\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> Express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'express\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">Express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// Импортируем наш сервис</span>\n<span class="token keyword">const</span> <span class="token punctuation">{</span> getTopStoriesIds<span class="token punctuation">,</span> fetchTopStories <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'./services\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// Записываем шаблон в строку</span>\n<span class="token keyword">const</span> template <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">\'./index.html\'</span><span class="token punctuation">,</span> <span class="token string">\'utf8\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// Функция для отрисовки новости</span>\n<span class="token keyword">function</span> <span class="token function">renderStory</span><span class="token punctuation">(</span><span class="token punctuation">{</span> url<span class="token punctuation">,</span> title<span class="token punctuation">,</span> by<span class="token punctuation">,</span> time <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`\n&lt;li class="story">\n  &lt;a href="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">" class="story" target="_blank"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>title<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/a>\n  &lt;div class="story__details">by </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>by<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> | </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>time <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/div>\n&lt;/li>\n`</span></span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// Задаем обрабатчик HTTP запроса</span>\napp<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">\'/\'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token keyword">try</span> <span class="token punctuation">{</span>\n    <span class="token comment">// Ожидаем получение топ 10 новостей</span>\n    <span class="token keyword">const</span> topIds <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getTopStoriesIds</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment">// Ожидаем получение информации о новостях</span>\n    <span class="token keyword">const</span> items <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetchTopStories</span><span class="token punctuation">(</span>topIds<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment">// Отрисовываем их в строки</span>\n    <span class="token keyword">const</span> stories <span class="token operator">=</span> items<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>renderStory<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// Задаем время актуальности запроса</span>\n    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">\'Cache-Control\'</span><span class="token punctuation">,</span> <span class="token string">\'public, max-age=100\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">\'Expires\'</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUTCString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    \n    <span class="token comment">// Заменяем нашу метку на строки и отправляем ответ</span>\n    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>template<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">\'&lt;!--STORIES-->\'</span><span class="token punctuation">,</span> stories<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">\'\\n\'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    \n  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// Обрабатываем ошибку, если что-то не так</span>\n    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>stack<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">\'Something broke!\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> port <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>NODE_PORT <span class="token operator">||</span> <span class="token number">9191</span><span class="token punctuation">;</span>\n\n<span class="token comment">// Запускаем сервер</span>\napp<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Served from http://localhost:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  \n</code></pre>\n      </div>\n<h3>Запуск</h3>\n<p>Теперь запустим наш сервер командой:</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code><span class="token function">npm</span> start\n</code></pre>\n      </div>\n<p>Перейдя по адресу <a href="http://127.0.0.1:9191">127.0.0.1:9191</a> мы увидим нашу страницу:</p>\n<div class="gallery">\n  \n  <a class="gatsby-resp-image-link" href="/static/result-905384fc0b7743bab771ef2893a36f3d-56888.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; z-index: 1; max-width: 980px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAAA7ElEQVQ4y+2RQW7CMBBFfdYcqKoqcYDehCULCAI7EJMU6pDINhapQCVddPHrGSR2SCRdVeri68uW/fQ8Ft+vCe6lHCVYPCeYPl179ZLgbXT/PEWcygm8GsPJMXdnZviqUk4X82nS2/qRiBBqbDYKeb5EUWRomi0ul5bTdR+9I6x9R5bNodScW8oU6/UCh8N+GJAM81xGyBJluWLLoXYM9L6KVjM2I2Bdb+H9HrRvrUEITX9DrRUbai2j4RXqnGEwdR9jQRY0O/qU3U7DmOIGcq6Ks6y5HwaezwFkSU9rW4vj0f5uhkMv/gP/EPAH51Fgl8eicBEAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;" alt="result" title="" src="/static/result-905384fc0b7743bab771ef2893a36f3d-70dbf.png" srcset="/static/result-905384fc0b7743bab771ef2893a36f3d-5dcff.png 245w,\n/static/result-905384fc0b7743bab771ef2893a36f3d-4d433.png 490w,\n/static/result-905384fc0b7743bab771ef2893a36f3d-70dbf.png 980w,\n/static/result-905384fc0b7743bab771ef2893a36f3d-56888.png 1024w" sizes="(max-width: 980px) 100vw, 980px">\n    </span>\n  </span>\n  \n  </a>\n    \n</div>\n<p><a href="https://github.com/potofcode/hacker-blog.git" target="_github">Исходники</a></p>',color:"rgba(70, 72, 62, 0.9)",title:"Hello World. Простейший Node JS Hacker News сервер",description:"Hello World. Установка и запуск простейшего приложения на Node JS показывающее новости с Hacker News",category:"кодинг",tags:["hello world","node js"],date:"2017-09-01T00:00:00.000Z",type:null}]}}}});
//# sourceMappingURL=path---2016-09-game-wow-legion-shaman-puzzles-7eafe7f5bb8e7b411881.js.map